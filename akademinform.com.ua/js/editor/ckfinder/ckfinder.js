(function(){function e(a,b,c){b.on("appReady",function(d){d.aF();a.document=b.document.$;a.folders=b.folders;a.files=b.aG["filesview.filesview"][0].data().files;a.basketFiles=b.basketFiles;a.resourceTypes=b.resourceTypes;a.connector=b.connector;a.lang=b.lang;a.langCode=b.langCode;a.config=b.config;b.aG["foldertree.foldertree"][0].on("afterAddFolder",function(b){b.aF();if(c)c(a)},a)},a,null,999)}function d(b){var c=this;c.id=b.name;var d=b.ax.getDocument().getWindow().$,e=a.oC.getWindow().$;c.inPopup=!!(d&&d.opener);c.inIframe=!c.inPopup&&d!=e.top&&d.frameElement.nodeName.toLowerCase()=="iframe";c.inFrame=!c.inPopup&&d!=e.top&&d.frameElement.nodeName.toLowerCase()=="frame";c.inUrlPopup=!!(c.inPopup&&e.opener)}function b(b){return a.instances[b]}var a=function(){var a={jY:"B23B",_:{},status:"unloaded",basePath:function(){var a=window.CKFINDER_BASEPATH||"";if(!a){var b=document.getElementsByTagName("script");for(var c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}}if(a.indexOf("://")==-1)if(a.indexOf("/")===0)a=location.href.match(/^.*?:\/\/[^\/]*/)[0]+a;else a=location.href.match(/^[^\?]*\/(?:)/)[0]+a;return a}(),getUrl:function(a){if(a.indexOf("://")==-1&&a.indexOf("/")!==0)a=this.basePath+a;if(this.jY&&a.charAt(a.length-1)!="/")a+=(a.indexOf("?")>=0?"&":"?")+"t="+this.jY;return a}},b=window.CKFINDER_GETURL;if(b){var c=a.getUrl;a.getUrl=function(d){return b.call(a,d)||c.call(a,d)}}return a}();var c={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};a.jd=function(){var a=this;var b={};for(var d in a){if(!a.hasOwnProperty(d))continue;if(typeof a[d]=="function"&&!c[d])continue;b[d]=a[d]}if(a.callback)b.callback=a.callback;return b};a.lj=function(a){var b=this;a=a||b.basePath;var c="";if(!a||a.length===0)a=CKFinder.DEFAULT_basePath;if(a.substr(a.length-1,1)!="/")a+="/";a+="ckfinder.html";var d;if(b.hh){d=b.hh;if(typeof d=="function")d=d.toString().match(/function ([^(]+)/)[1];c+="?action=js&func="+d}if(b.jx){c+=c?"&":"?";c+="data="+encodeURIComponent(b.jx)}if(b.disableThumbnailSelection){c+=c?"&":"?";c+="dts=1"}else if(b.lH||b.hh){d=b.lH||b.hh;if(typeof d=="function")d=d.toString().match(/function ([^(]+)/)[1];c+=c?"&":"?";c+="thumbFunc="+d;if(b.nm)c+="&tdata="+encodeURIComponent(b.nm);else if(!b.lH&&b.jx)c+="&tdata="+encodeURIComponent(b.jx)}if(b.startupPath){c+=c?"&":"?";c+="start="+encodeURIComponent(b.startupPath+(b.startupFolderExpanded?":1":":0"))}if(!b.rememberLastFolder){c+=c?"&":"?";c+="rlf=0"}if(b.id){c+=c?"&":"?";c+="id="+encodeURIComponent(b.id)}if(b.skin){c+=c?"&":"?";c+="skin="+encodeURIComponent(b.skin)}return a+c};d.prototype={_:{},addFileContextMenuOption:function(c,d,e){var f=b(this.id),g="FileContextMenu_"+c.command;f.bD(g,{exec:function(a){var b=a.aG["filesview.filesview"][0].tools.dH();d(a.cg,b)}});c.command=g;if(!c.group)c.group="file1";f.gp(g,c);var h=f.aG["filesview.filesview"];for(var i=0;i<h.length;i++)h[i].on("beforeContextMenu",function j(b){if(e){var c=e(this.tools.dH());if(c)b.data.bj[g]=c==-1?a.aY:a.aS}else b.data.bj[g]=a.aS})},disableFileContextMenuOption:function(a,c){var d=b(this.id),e=c?"FileContextMenu_"+a:a,f=d.aG["filesview.filesview"],g=[];for(var h=0;h<f.length;h++){var i=g.push(function j(a){delete a.data.bj[e]});f[h].on("beforeContextMenu",g[i-1])}return function(){for(var a=0;a<g.length;a++)d.aG["foldertree.foldertree"][a].aF("beforeContextMenu",g[a])}},addFolderContextMenuOption:function(c,d,e){var f=b(this.id),g="FolderContextMenu_"+c.command;f.bD(g,{exec:function(a){d(a.cg,a.aV)}});c.command=g;if(!c.group)c.group="folder1";f.gp(g,c);var h=f.aG["foldertree.foldertree"];for(var i=0;i<h.length;i++)h[i].on("beforeContextMenu",function j(b){if(e){var c=e(this.app.aV);if(c)b.data.bj[g]=c==-1?a.aY:a.aS}else b.data.bj[g]=a.aS})},disableFolderContextMenuOption:function(a,c){var d=b(this.id),e=c?"FolderContextMenu_"+a:a,f=d.aG["foldertree.foldertree"],g=[];for(var h=0;h<f.length;h++){var i=g.push(function j(a){delete a.data.bj[e]});f[h].on("beforeContextMenu",g[i-1])}return function(){for(var a=0;a<g.length;a++)d.aG["foldertree.foldertree"][a].aF("beforeContextMenu",g[a])}},getSelectedFile:function(){return b(this.id).aG["filesview.filesview"][0].tools.dH()},getSelectedFolder:function(){return b(this.id).aV},setUiColor:function(a){return b(this.id).setUiColor(a)},openDialog:function(c,d){var e=this;var f=(new a.dom.document(window.document)).eD(),g=b(e.id).document.getWindow();if(e.inFrame||e.inPopup||e.inIframe)a.document=b(e.id).document;return b(e.id).openDialog(c,d,f)},openMsgDialog:function(a,c){b(this.id).msgDialog(a,c)},openConfirmDialog:function(a,c,d){b(this.id).fe(a,c,d)},openInputDialog:function(a,c,d,e){b(this.id).hs(a,c,d,e)},addTool:function(a){return b(this.id).plugins.tools.addTool(a)},addToolPanel:function(a){return b(this.id).plugins.tools.addToolPanel(a)},removeTool:function(a){b(this.id).plugins.tools.removeTool(a)},showTool:function(a){b(this.id).plugins.tools.showTool(a)},hideTool:function(a){b(this.id).plugins.tools.hideTool(a)},getResourceType:function(a){return b(this.id).getResourceType(a)},log:function(b){a.log.apply(a.log,arguments)},getLog:function(){return a.mZ()},emptyBasket:function(){b(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(c,d){var e=b(this.id);e.aG["formpanel.formpanel"][0].on("beforeUploadFileForm",function(b){if(b.data.step!=2)return;b.cancel(true);var e=this.data(),f=b.data.folder;try{if(e.dc=="upload")this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(a.aS)});else{if(this.data().dc)this.oW("requestUnloadForm");this.oW("requestLoadForm",{html:c,command:"upload"});d&&d()}}catch(g){this.oW("failedUploadFileForm",b.data);this.oW("afterUploadFileForm",b.data);throw a.ba(g)}});return{hide:function(){e.oW("requestUnloadForm",function(){e.cS("upload").bR(a.aS)})}}},refreshOpenedFolder:function(){var a=b(this.id),c=a.aG["filesview.filesview"][0].tools.currentFolder();a.oW("requestSelectFolder",{folder:c})},closePopup:function(){if(!this.inPopup)return;b(this.id).ax.getDocument().getWindow().$.close()}};(function(){window.CKFinder=function(a,b){if(a)for(var c in a){if(!a.hasOwnProperty(c))continue;if(typeof a[c]=="function"&&c!="callback")continue;this[c]=a[c]}this.callback=b};CKFinder.prototype={create:function(b){var c="ckf"+Math.random().toString().substr(2,4);document.write('<span id="'+c+'"></span>');b=a.tools.extend(a.jd.call(this),b,true);var d=a.replace(c,b,CKFinder);this.lN=d.cg;return d.cg},appendTo:function(b,c){c=a.tools.extend(a.jd.call(this),c,true);var d=a.appendTo(b,c,CKFinder);this.lN=d.cg;return d.cg},replace:function(b,c){c=a.tools.extend(a.jd.call(this),c,true);var d=a.replace(b,c,CKFinder);this.lN=d.cg;return d.cg},popup:function(b,c){var d=this;b=b||"80%";c=c||"70%";if(typeof b=="string"&&b.length>1&&b.substr(b.length-1,1)=="%")b=parseInt(window.screen.width*parseInt(b,10)/100,10);if(typeof c=="string"&&c.length>1&&c.substr(c.length-1,1)=="%")c=parseInt(window.screen.height*parseInt(c,10)/100,10);if(b<200)b=200;if(c<200)c=200;var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10),g="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,jy=yes,width="+b+",height="+c+",top="+e+",left="+f,h=a.env.webkit?"about:blank":"",i=window.open(h,"CKFinderpopup",g,true);if(!i)return false;d.width=d.height="100%";var j='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>CKFinder 2</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>',k=new a.dom.document(i.document);k.$.open();if(a.env.isCustomDomain())k.$.domain=window.document.domain;k.$.write(j);k.$.close();try{i.moveTo(f,e);i.resizeTo(b,c);i.focus();return d.appendTo(k.bH())}catch(l){return d.appendTo(k.bH())}return false}};CKFinder._={};CKFinder.lang={};CKFinder.version="2.0.2";CKFinder.revision="UNKNOWN";CKFinder.addPlugin=function(b,c,d){var e={bM:d||[]};if(typeof c=="function")c={appReady:c};for(var f in c){if(!c.hasOwnProperty(f))continue;if(f!="connectorInitialized"&&f!="uiReady")e[f]=c[f]}e.bz=function(a){if(c.connectorInitialized)a.on("connectorInitialized",function(b){var d=c.connectorInitialized;if(d)d.call(d,a.cg,b.data.xml)},null,null,1e3);if(c.uiReady)a.on("uiReady",function(){var b=c.uiReady;b.call(b,a.cg)},null,null,1e3);if(c.appReady)a.on("appReady",function(){var b=c.appReady;b.call(b,a.cg)},null,null,1e3)};a.plugins.add(b,e)};CKFinder.getPluginPath=function(b){return a.plugins.getPath(b)};CKFinder.addExternalPlugin=function(b,c,d){a.plugins.tR(b,c,d)};CKFinder.setPluginLang=function(b,c,d){a.plugins.rX(b,c,d)};CKFinder.dialog={add:function(b,c){if(typeof c=="function")c=a.tools.override(c,function(a){return function(b){return a(b.cg)}});a.dialog.add(b,c)}};CKFinder.tools={};CKFinder.env={};CKFinder.dom={};CKFinder.create=function(a,b,c,d,e){var f;if(a!==null&&typeof a==="object"){f=new CKFinder;for(var g in a)f[g]=a[g]}else{f=new CKFinder;f.basePath=a;if(b)f.width=b;if(c)f.height=b;if(d)f.selectActionFunction=d;if(e)f.callback=e}return f.create()};CKFinder.popup=function(a,b,c,d,e){var f;if(a!==null&&typeof a==="object"){f=new CKFinder;for(var g in a)f[g]=a[g]}else{f=new CKFinder;f.basePath=a;if(d)f.selectActionFunction=d;if(e)f.callback=e}return f.popup(b,c)};CKFinder.setupFCKeditor=function(b,c,d,e){var f;if(c!==null&&typeof c==="object"){f=new CKFinder;for(var g in c){f[g]=c[g];if(g=="width"){var h=f[g]||800;if(typeof h=="string"&&h.length>1&&h.substr(h.length-1,1)=="%")h=parseInt(window.screen.width*parseInt(h,10)/100,10);b.Config.LinkBrowserWindowWidth=h;b.Config.ImageBrowserWindowWidth=h;b.Config.FlashBrowserWindowWidth=h}else if(g=="height"){var i=f[g]||600;if(typeof i=="string"&&i.length>1&&i.substr(i.length-1,1)=="%")i=parseInt(window.screen.height*parseInt(i,10)/100,10);b.Config.LinkBrowserWindowHeight=i;b.Config.ImageBrowserWindowHeight=i;b.Config.FlashBrowserWindowHeight=i}}}else{f=new CKFinder;f.basePath=c}alert(f.basePath);var j=f.basePath;if(j.substr(0,1)!="/"&&j.indexOf("://")==-1)j=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+j;j=a.lj.call(f,j);var k=j.indexOf("?")!==-1?"&":"?";b.Config.LinkBrowserURL=j;b.Config.ImageBrowserURL=j+k+"type="+(d||"Images");b.Config.FlashBrowserURL=j+k+"type="+(e||"Flash");var l=j.substring(0,1+j.lastIndexOf("/"));b.Config.LinkUploadURL=l+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";b.Config.ImageUploadURL=l+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(d||"Images");b.Config.FlashUploadURL=l+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Flash")};CKFinder.setupCKEditor=function(b,c,d,e){if(b===null){for(var f in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[f],c,d,e);CKEDITOR.on("instanceCreated",function(a){CKFinder.setupCKEditor(a.editor,c,d,e)});return}var g;if(c!==null&&typeof c==="object"){g=new CKFinder;for(var h in c){g[h]=c[h];if(h=="width"){var i=g[h]||800;if(typeof i=="string"&&i.length>1&&i.substr(i.length-1,1)=="%")i=parseInt(window.screen.width*parseInt(i,10)/100,10);b.config.filebrowserWindowWidth=i}else if(h=="height"){var j=g[h]||600;if(typeof j=="string"&&j.length>1&&j.substr(j.length-1,1)=="%")j=parseInt(window.screen.height*parseInt(j,10)/100,10);b.config.filebrowserWindowHeight=i}}}else{g=new CKFinder;g.basePath=c}var k=g.basePath;if(k.substr(0,1)!="/"&&k.indexOf("://")==-1)k=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+k;k=a.lj.call(g,k);var l=k.indexOf("?")!==-1?"&":"?";b.config.filebrowserBrowseUrl=k;b.config.filebrowserImageBrowseUrl=k+l+"type="+(d||"Images");b.config.filebrowserFlashBrowseUrl=k+l+"type="+(e||"Flash");var m=k.substring(0,1+k.lastIndexOf("/"));b.config.filebrowserUploadUrl=m+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";b.config.filebrowserImageUploadUrl=m+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(d||"Images");b.config.filebrowserFlashUploadUrl=m+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Flash")}})();if(!a.event){a.event=function(){};a.event.du=function(b,c){var d=a.event.prototype;for(var e in d){if(b[e]==undefined)b[e]=d[e]}};a.event.prototype=function(){var b=function(a){var b=a.kk&&a.kk()||a._||(a._={});return b.cC||(b.cC={})},c=function(a){this.name=a;this.dF=[]};c.prototype={mi:function(a){for(var b=0,c=this.dF;b<c.length;b++){if(c[b].gg==a)return b}return-1}};return{on:function(a,d,e,f,g){var h=b(this),i=h[a]||(h[a]=new c(a));if(i.mi(d)<0){var j=i.dF;if(!e)e=this;if(isNaN(g))g=10;var k=this,l=function(b,c,g,h){var i={name:a,jN:this,application:b,data:c,jO:f,stop:g,cancel:h,aF:function(){k.aF(a,d)}};d.call(e,i);return i.data};l.gg=d;l.nT=g;for(var m=j.length-1;m>=0;m--){if(j[m].nT<=g){j.splice(m+1,0,l);return}}j.unshift(l)}},oW:function(){var c=false,d=function(){c=true},e=false,f=function(a){e=a?2:true};return function g(g,h,i,j){if(typeof h=="function"){j=h;h=null}else if(typeof i=="function"){j=i;i=null}if(g!="mousemove")a.log("[EVENT] "+g,h,j);var k=b(this)[g],l=c,m=e;c=e=false;if(k){var n=k.dF;if(n.length){n=n.slice(0);for(var o=0;o<n.length;o++){var p=n[o].call(this,i,h,d,f);if(typeof p!="undefined")h=p;if(c||e&&e!=2)break}}}var q=e||(typeof h=="undefined"?false:!h||typeof h.result=="undefined"?h:h.result);if(typeof j==="function"&&e!=2)q=j.call(this,e,h)||q;c=l;e=m;return q}}(),cr:function(a,c,d){var e=this.oW(a,c,d);delete b(this)[a];return e},aF:function(a,c){var d=b(this)[a];if(d){var e=d.mi(c);if(e>=0)d.dF.splice(e,1)}},mF:function(){var a=b(this);for(var c=0;c<a.length;c++)a[c].dF=[]},rC:function(a){var c=b(this)[a];return c&&c.dF.length>0}}}()}if(!a.application){a.kZ=0;a.fc=1;a.qE=2;a.application=function(b,c,d,e){var f=this;f._={kw:b,ax:c};f.ff=d||a.kZ;a.event.call(f);f.iI(e)};a.application.replace=function(b,c,d){var e=b;if(typeof e!="object"){e=document.getElementById(b);if(!e){var f=0,g=document.getElementsByName(b);while((e=g[f++])&&e.tagName.toLowerCase()!="textarea"){};}if(!e)throw'[CKFINDER.application.replace] The ax with id or name "'+b+'" was not found.'}return new a.application(c,e,a.fc,d)};a.application.appendTo=function(b,c,d){if(typeof b!="object"){b=document.getElementById(b);if(!b)throw'[CKFINDER.application.appendTo] The ax with id "'+b+'" was not found.'}return new a.application(c,b,a.qE,d)};a.application.prototype={iI:function(){var b=a.application.eb||(a.application.eb=[]);b.push(this)},oW:function(b,c,d){return a.event.prototype.oW.call(this,b,c,this,d)},cr:function(b,c,d){return a.event.prototype.cr.call(this,b,c,this,d)}};a.event.du(a.application.prototype,true)}if(!a.env){a.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:false,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera;var d=0;if(c.ie){d=parseFloat(a.match(/msie (\d+)/)[1]);c.ie8=!!document.documentMode;c.ie8Compat=document.documentMode==8;c.ie7Compat=d==7&&!document.documentMode||document.documentMode==7;c.ie6Compat=d<7||c.quirks}if(c.gecko){var e=a.match(/rv:([\d\.]+)/);if(e){e=e[1].split(".");d=e[0]*1e4+(e[1]||0)*100+ +(e[2]||0)}}if(c.opera)d=parseFloat(b.version());if(c.air)d=parseFloat(a.match(/ adobeair\/(\d+)/)[1]);if(c.webkit)d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]);c.version=d;c.isCompatible=c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||false;c.cssClass="browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.air?"air":c.webkit?"webkit":"unknown");if(c.quirks)c.cssClass+=" browser_quirks";if(c.ie){c.cssClass+=" browser_ie"+(c.version<7?"6":c.version>=8?"8":"7");if(c.quirks)c.cssClass+=" browser_iequirks"}if(c.gecko&&d<10900)c.cssClass+=" browser_gecko18";return c}();CKFinder.env=a.env}var f=a.env;var g=f.ie;if(a.status=="unloaded")(function(){a.event.du(a);a.dO=function(){if(a.status!="basic_ready"){a.dO.qr=true;return}delete a.dO;var b=document.createElement("script");b.type="text/javascript";b.src=a.basePath+"ckfinder.js";document.getElementsByTagName("head")[0].appendChild(b)};a.mS=0;a.uQ="ckfinder";a.uM=true;var b=function(b,c,d,e){if(f.isCompatible){if(a.dO)a.dO();var g=d(b,c,e);a.add(g);return g}return null};a.replace=function(c,d,e){return b(c,d,a.application.replace,e)};a.appendTo=function(c,d,e){return b(c,d,a.application.appendTo,e)};a.add=function(a){var b=this._.io||(this._.io=[]);b.push(a)};a.uL=function(){var a=document.getElementsByTagName("textarea");for(var b=0;b<a.length;b++){var c=null,d=a[b],e=d.name;if(!d.name&&!d.id)continue;if(typeof arguments[0]=="string"){var f=new RegExp("(?:^| )"+arguments[0]+"(?:$| )");if(!f.test(d.className))continue}else if(typeof arguments[0]=="function"){c={};if(arguments[0](d,c)===false)continue}this.replace(d,c)}};(function(){var b=function(){var b=a.dO,c=a.mS;a.status="basic_ready";if(b&&b.qr)b();else if(c)setTimeout(function(){if(a.dO)a.dO()},c*1e3)};if(window.addEventListener)window.addEventListener("load",b,false);else if(window.attachEvent)window.attachEvent("onload",b)})();a.status="basic_loaded"})();a.dom={};CKFinder.dom=a.dom;var h=a.dom;a.ajax=function(){var b=function(){if(!g||location.protocol!="file:")try{return new XMLHttpRequest}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return null},c=function(a){return a.readyState==4&&(a.status>=200&&a.status<300||a.status==304||a.status===0||a.status==1223)},d=function(a){if(c(a))return a.responseText;return null},e=function(b){if(c(b)){var d=b.responseXML,e=new a.xml(d&&d.firstChild&&d.documentElement&&d.documentElement.nodeName!="parsererror"?d:b.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,""));if(e&&e.mq&&e.mq.documentElement&&e.mq.documentElement.nodeName!="parsererror"&&e.mq.documentElement.nodeName!="html"&&e.mq.documentElement.nodeName!="br")return e}var f=a.eq||a.jt,g=b.responseText;if(/text\/plain/.test(b.getResponseHeader("Content-Type"))){g=a.tools.htmlEncode(g);g=g.replace(/\n/g,"<br>");g='<div style="width:600px; overflow:scroll"><font>'+g+"</font></div>"}f.msgDialog(f.lang.SysErrorDlgTitle,g);return{}},f=function(c,d,e,f){var g=!!d;a.log("[AJAX] POST "+c);var h=b();if(!h)return null;if(!f)h.open("GET",c,g);else h.open("POST",c,g);if(g)h.onreadystatechange=function(){if(h.readyState==4){d(e(h));h=null}};if(f){h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(f)}else h.send(null);return g?"":e(h)};return{load:function(a,b,c){return f(a,b,d,c)},loadXml:function(a,b,c){return f(a,b,e,c)}}}();CKFinder.ajax=a.ajax;(function(){var b=[];a.tools={arrayCompare:function(a,b){if(!a&&!b)return true;if(!a||!b||a.length!=b.length)return false;for(var c=0;c<a.length;c++){if(a[c]!=b[c])return false}return true},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=this.clone(a[c]);return b}if(a===null||typeof a!="object"||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date)return a;b=new a.constructor;for(var d in a){var e=a[d];b[d]=this.clone(e)}return b},extend:function(a){var b=arguments.length,c,d;if(typeof (c=arguments[b-1])=="boolean")b--;else if(typeof (c=arguments[b-2])=="boolean"){d=arguments[b-1];b-=2}for(var e=1;e<b;e++){var f=arguments[e];for(var g in f){if(c===true||a[g]==undefined)if(!d||g in d)a[g]=f[g]}}return a},prototypedCopy:function(a){var b=function(){};b.prototype=a;return new b},isArray:function(a){return!!a&&a instanceof Array},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b=typeof a.cssFloat!="undefined"?"cssFloat":typeof a.styleFloat!="undefined"?"styleFloat":"float";return function(a){if(a=="float")return b;else return a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),htmlEncode:function(a){var b=function(a){var b=new h.ax("span");b.setText(a);return b.getHtml()},c=b("\n").toLowerCase()=="<br>"?function(a){return b(a).replace(/<br>/gi,"\n")}:b,d=b(">")==">"?function(a){return c(a).replace(/>/g,">")}:c,e=b("  ")=="  "?function(a){return d(a).replace(/ /g," ")}:d;this.htmlEncode=e;return this.htmlEncode(a)},getNextNumber:function(){var a=0;return function(){return++a}}(),override:function(a,b){return b(a)},setTimeout:function(a,b,c,d,e){if(!e)e=window;if(!c)c=e;return e.setTimeout(function(){if(d)a.apply(c,[].concat(d));else a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b?b.replace(a,""):null}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b?b.replace(a,""):null}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b?b.replace(a,""):null}}(),indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;c<d;c++){if(a[c]===b)return c}return-1},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(b){var c=b.$,d=b.base,e=b.vd||b._,f=b.ej,g=b.statics;if(e){var h=c;c=function(){var b=this;var c=b._||(b._={});for(var d in e){var f=e[d];c[d]=typeof f=="function"?a.tools.bind(f,b):f}h.apply(b,arguments)}}if(d){c.prototype=this.prototypedCopy(d.prototype);c.prototype["constructor"]=c;c.prototype.base=function(){this.base=d.prototype.base;d.apply(this,arguments);this.base=arguments.callee}}if(f)this.extend(c.prototype,f,true);if(g)this.extend(c,g,true);return c},addFunction:function(a,c){return b.push(function(){a.apply(c||this,arguments)})-1},callFunction:function(a){var c=b[a];return c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^\d+(?:\.\d+)?$/;return function(b){return b+(a.test(b)?"px":"")}}(),repeat:function(a,b){return(new Array(b+1)).join(a)},deepCopy:function(b){var c={};if(typeof b=="object"){if(typeof b.length!="undefined")c=[];for(var d in b){if(b[d]===null)c[d]=b[d];else if(typeof b[d]=="object")c[d]=a.tools.deepCopy(b[d]);else if(typeof b[d]=="string")c[d]=b[d];else if(typeof b[d]=="number")c[d]=b[d];else if(typeof b[d]=="boolean")b[d]===true?c[d]=true:c[d]=false}}return c},getUrlParam:function(a,b){var c=new RegExp("(?:[?&]|&)"+a+"=([^&]+)","i"),d=(b||window).location.search.match(c);return d&&d.length>1?d[1]:null},htmlEncode:function(a){if(!a)return"";a=typeof a!="string"?a.toString():a;a=a.replace(/&/g,"&");a=a.replace(/</g,"<");a=a.replace(/>/g,">");return a},setCookie:function(a,b,c){document.cookie=a+"="+b+(!c?"; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/":"")},getCookie:function(a){var b=document.cookie.match(new RegExp("(^|\\s|;)"+a+"=([^;]*)"));return b&&b.length>0?b[2]:""}};CKFinder._.callFunction=a.tools.callFunction;CKFinder.tools=a.tools})();var i=a.tools;h.event=function(a){this.$=a};h.event.prototype={oV:function(){return this.$.keyCode||this.$.which},db:function(){var b=this;var c=b.oV();if(b.$.ctrlKey||b.$.metaKey)c+=a.bP;if(b.$.shiftKey)c+=a.dy;if(b.$.altKey)c+=a.eJ;return c},preventDefault:function(a){var b=this.$;if(b.preventDefault)b.preventDefault();else b.returnValue=false;if(a)this.stopPropagation()},stopPropagation:function(){var a=this.$;if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},bK:function(){var a=this.$.target||this.$.srcElement;return a?new h.bi(a):null}};a.bP=1e3;a.dy=2e3;a.eJ=4e3;h.dE=function(a){if(a)this.$=a};h.dE.prototype=function(){var b=function(b,c){return function(d){if(typeof a!="undefined")b.oW(c,new h.event(d))}};return{kk:function(){var a;if(!(a=this.dw("_")))this.fL("_",a={});return a},on:function(c){var d=this;var e=d.dw("_cke_nativeListeners");if(!e){e={};d.fL("_cke_nativeListeners",e)}if(!e[c]){var f=e[c]=b(d,c);if(d.$.addEventListener&&!g)d.$.addEventListener(c,f,!!a.event.jP);else if(d.$.attachEvent)d.$.attachEvent("on"+c,f)}return a.event.prototype.on.apply(d,arguments)},aF:function(b){var c=this;a.event.prototype.aF.apply(c,arguments);if(!c.rC(b)){var d=c.dw("_cke_nativeListeners"),e=d&&d[b];if(e){if(c.$.removeEventListener)c.$.removeEventListener(b,e,false);else if(c.$.detachEvent)c.$.detachEvent("on"+b,e);delete d[b]}}}}}();(function(b){var c={};b.equals=function(a){return a&&a.$===this.$};b.fL=function(a,b){var d=this.iY(),e=c[d]||(c[d]={});e[a]=b;return this};b.dw=function(a){var b=this.$.dj,d=b&&c[b];return d&&d[a]};b.jF=function(a){var b=this.$.dj,d=b&&c[b],e=d&&d[a];if(typeof e!="undefined")delete d[a];return e||null};b.iY=function(){return this.$.dj||(this.$.dj=i.getNextNumber())};a.event.du(b)})(h.dE.prototype);h.window=function(a){h.dE.call(this,a)};h.window.prototype=new h.dE;i.extend(h.window.prototype,{focus:function(){if(f.webkit&&this.$.parent)this.$.parent.focus();this.$.focus()},eR:function(){var a=this.$.document,b=a.compatMode=="CSS1Compat";return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},hV:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};else{var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}}});h.document=function(a){h.dE.call(this,a)};var j=h.document;j.prototype=new h.dE;i.extend(j.prototype,{pb:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new h.ax("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.eD().append(b)}},createElement:function(a,b){var c=new h.ax(a,this);if(b){if(b.attributes)c.setAttributes(b.attributes);if(b.gS)c.setStyles(b.gS)}return c},jT:function(a){return new h.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){var b=this.$.getElementById(a);return b?new h.ax(b):null},vu:function(a,b){var c=this.$.documentElement;for(var d=0;c&&d<a.length;d++){var e=a[d];if(!b){c=c.childNodes[e];continue}var f=-1;for(var g=0;g<c.childNodes.length;g++){var i=c.childNodes[g];if(b===true&&i.nodeType==3&&i.previousSibling&&i.previousSibling.nodeType==3)continue;f++;if(f==e){c=i;break}}}return c?new h.bi(c):null},eG:function(a,b){if(!g&&b)a=b+":"+a;return new h.iT(this.$.getElementsByTagName(a))},eD:function(){var a=this.$.getElementsByTagName("head")[0];a=new h.ax(a);return(this.eD=function(){return a})()},bH:function(){var a=new h.ax(this.$.body);return(this.bH=function(){return a})()},gT:function(){var a=new h.ax(this.$.documentElement);return(this.gT=function(){return a})()},getWindow:function(){var a=new h.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()}});h.bi=function(b){if(b){switch(b.nodeType){case a.cv:return new h.ax(b);case a.fl:return new h.text(b)}h.dE.call(this,b)}return this};h.bi.prototype=new h.dE;a.cv=1;a.fl=3;a.va=8;a.om=11;a.oh=0;a.op=1;a.gW=2;a.gX=4;a.mo=8;a.lF=16;i.extend(h.bi.prototype,{appendTo:function(a,b){a.append(this,b);return a},clone:function(b,c){var d=this.$.cloneNode(b);if(!c){var e=function(b){if(b.nodeType!=a.cv)return;b.removeAttribute("id",false);b.removeAttribute("dj",false);var c=b.childNodes;for(var d=0;d<c.length;d++)e(c[d])};e(d)}return new h.bi(d)},gE:function(){return!!this.$.previousSibling},ge:function(){return!!this.$.nextSibling},kB:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},vP:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},lU:function(a){var b=[],c=this.getDocument().$.documentElement,d=this.$;while(d&&d!=c){var e=d.parentNode,f=-1;for(var g=0;g<e.childNodes.length;g++){var h=e.childNodes[g];if(a&&h.nodeType==3&&h.previousSibling&&h.previousSibling.nodeType==3)continue;f++;if(h==d)break}b.unshift(f);d=d.parentNode}return b},getDocument:function(){var a=new j(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return a})()},vA:function(){var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;while(b){c++;if(b==a)return c;b=b.nextSibling}return-1},hL:function(b,c,d){if(d&&!d.call){var e=d;d=function(a){return!a.equals(e)}}var f=!b&&this.getFirst&&this.getFirst(),g;if(!f){if(this.type==a.cv&&d&&d(this,true)===false)return null;f=this.dG()}while(!f&&(g=(g||this).getParent())){if(d&&d(g,true)===false)return null;f=g.dG()}if(!f)return null;if(d&&d(f)===false)return null;if(c&&c!=f.type)return f.hL(false,c,d);return f},hZ:function(b,c,d){if(d&&!d.call){var e=d;d=function(a){return!a.equals(e)}}var f=!b&&this.dB&&this.dB(),g;if(!f){if(this.type==a.cv&&d&&d(this,true)===false)return null;f=this.cf()}while(!f&&(g=(g||this).getParent())){if(d&&d(g,true)===false)return null;f=g.cf()}if(!f)return null;if(d&&d(f)===false)return null;if(c&&f.type!=c)return f.hZ(false,c,d);return f},cf:function(a){var b=this.$,c;do{b=b.previousSibling;c=b&&new h.bi(b)}while(c&&a&&!a(c));return c},vs:function(){return this.cf(function(a){return a.$.nodeType==1})},dG:function(a){var b=this.$,c;do{b=b.nextSibling;c=b&&new h.bi(b)}while(c&&a&&!a(c));return c},vk:function(){return this.dG(function(a){return a.$.nodeType==1})},getParent:function(){var a=this.$.parentNode;return a&&a.nodeType==1?new h.bi(a):null},vn:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},vv:function(a){var b=this;if(a.equals(b))return b;if(a.contains&&a.contains(b))return a;var c=b.contains?b:b.getParent();do{if(c.contains(a))return c}while(c=c.getParent());return null},gz:function(b){var c=this.$,d=b.$;if(c.compareDocumentPosition)return c.compareDocumentPosition(d);if(c==d)return a.oh;if(this.type==a.cv&&b.type==a.cv){if(c.contains){if(c.contains(d))return a.lF+a.gX;if(d.contains(c))return a.mo+a.gW}if("sourceIndex"in c)return c.sourceIndex<0||d.sourceIndex<0?a.op:c.sourceIndex<d.sourceIndex?a.gX:a.gW}var e=this.lU(),f=b.lU(),g=Math.min(e.length,f.length);for(var h=0;h<=g-1;h++){if(e[h]!=f[h]){if(h<g)return e[h]<f[h]?a.gX:a.gW;break}}return e.length<f.length?a.lF+a.gX:a.mo+a.gW},vw:function(a,b){var c=this.$;if(!b)c=c.parentNode;while(c){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new h.bi(c);c=c.parentNode}return null},vX:function(a,b){var c=this.$;if(!b)c=c.parentNode;while(c){if(c.nodeName&&c.nodeName.toLowerCase()==a)return true;c=c.parentNode}return false},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(var d;d=b.firstChild;)c.insertBefore(b.removeChild(d),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){var b=this;var c;while(b.getFirst&&(c=b.getFirst())){if(c.type==a.fl){var d=i.ltrim(c.getText()),e=c.hJ();if(!d){c.remove();continue}else if(d.length<e){c.split(e-d.length);b.$.removeChild(b.$.firstChild)}}break}},rtrim:function(){var b=this;var c;while(b.dB&&(c=b.dB())){if(c.type==a.fl){var d=i.rtrim(c.getText()),e=c.hJ();if(!d){c.remove();continue}else if(d.length<e){c.split(d.length);b.$.lastChild.parentNode.removeChild(b.$.lastChild)}}break}if(!g&&!f.opera){c=b.$.lastChild;if(c&&c.type==1&&c.nodeName.toLowerCase()=="br")c.parentNode.removeChild(c)}}});h.iT=function(a){this.$=a};h.iT.prototype={count:function(){return this.$.length},getItem:function(a){var b=this.$[a];return b?new h.bi(b):null}};h.ax=function(a,b){if(typeof a=="string")a=(b?b.$:document).createElement(a);h.dE.call(this,a)};var k=h.ax;k.eB=function(a){return a&&(a.$?a:new k(a))};k.prototype=new h.bi;k.et=function(a,b){var c=new k("div",b);c.setHtml(a);return c.getFirst().remove()};k.rS=function(a,b,c,d){var e=b.dw("list_marker_id")||b.fL("list_marker_id",i.getNextNumber()).dw("list_marker_id"),f=b.dw("list_marker_names")||b.fL("list_marker_names",{}).dw("list_marker_names");a[e]=b;f[c]=1;return b.fL(c,d)};k.sM=function(a){for(var b in a)k.qZ(a,a[b],true)};k.qZ=function(a,b,c){var d=b.dw("list_marker_names"),e=b.dw("list_marker_id");for(var f in d)b.jF(f);b.jF("list_marker_names");if(c){b.jF("list_marker_id");delete a[e]}};i.extend(k.prototype,{type:a.cv,addClass:function(a){var b=this.$.className;if(b){var c=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","");if(!c.test(b))b+=" "+a}this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){var c=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");if(c.test(b)){b=b.replace(c,"").replace(/^\s+/,"");if(b)this.setAttribute("class",b);else this.removeAttribute("class")}}},hasClass:function(a){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","");return b.test(this.getAttribute("class"))},append:function(b,c){var d=this;if(typeof b=="string")b=d.getDocument().createElement(b);if(c)d.$.insertBefore(b.$,d.$.firstChild);else d.$.appendChild(b.$);a.log("[DOM] DOM flush into "+d.getName());return b},appendHtml:function(a){var b=this;if(!b.$.childNodes.length)b.setHtml(a);else{var c=new k("div",b.getDocument());c.setHtml(a);c.jg(b)}},appendText:function(a){if(this.$.text!=undefined)this.$.text+=a;else this.append(new h.text(a))},pd:function(){var b=this;var c=b.dB();while(c&&c.type==a.fl&&!i.rtrim(c.getText()))c=c.cf();if(!c||!c.is||!c.is("br"))b.append(f.opera?b.getDocument().jT(""):b.getDocument().createElement("br"))},tV:function(a){var b=this;var c=new h.mk(b.getDocument());c.setStartAfter(b);c.setEndAfter(a);var d=c.extractContents();c.insertNode(b.remove());d.kA(b)},contains:g||f.webkit?function(b){var c=this.$;return b.type!=a.cv?c.contains(b.getParent().$):c!=b.$&&c.contains(b.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){try{this.$.focus()}catch(a){}},getHtml:function(){return this.$.innerHTML},vi:function(){var a=this;if(a.$.outerHTML)return a.$.outerHTML.replace(/<\?[^>]*>/,"");var b=a.$.ownerDocument.createElement("div");b.appendChild(a.$.cloneNode(true));return b.innerHTML},setHtml:function(b){a.log("[DOM] DOM flush into "+this.getName());return this.$.innerHTML=b},setText:function(b){k.prototype.setText=this.$.innerText!=undefined?function(b){a.log("[DOM] Text flush");return this.$.innerText=b}:function(b){a.log("[DOM] Text flush");return this.$.textContent=b};return this.setText(b)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};if(g&&(f.ie7Compat||f.ie6Compat))return function(b){var c=this;switch(b){case"class":b="className";break;case"tabindex":var d=a.call(c,b);if(d!==0&&c.$.tabIndex===0)d=null;return d;break;case"checked":return c.$.checked;break;case"style":return c.$.style.cssText}return a.call(c,b)};else return a}(),getChildren:function(){return new h.iT(this.$.childNodes)},getComputedStyle:g?function(a){return this.$.currentStyle[i.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},pf:function(){var b=a.ga[this.getName()];this.pf=function(){return b};return b},eG:j.prototype.eG,vp:g?function(){var b=this.$.tabIndex;if(b===0&&!a.ga.ug[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0)b=-1;return b}:f.webkit?function(){var a=this.$.tabIndex;if(a==undefined){a=parseInt(this.getAttribute("tabindex"),10);if(isNaN(a))a=-1}return a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},vm:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(g){var b=this.$.scopeName;if(b!="HTML")a=b.toLowerCase()+":"+a}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(){var a=this.$.firstChild;return a?new h.bi(a):null},dB:function(a){var b=this.$.lastChild,c=b&&new h.bi(b);if(c&&a&&!a(c))c=c.cf(a);return c},rd:function(a){return this.$.style[i.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();for(var b=0;b<arguments.length;b++){if(arguments[b]==a)return true}return false},vL:function(){var b=this.getName(),c=!a.ga.uj[b]&&(a.ga[b]||a.ga.span);return c&&c["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return false;var b=this.$.attributes,c=a.$.attributes,d=b.length,e=c.length;if(!g&&d!=e)return false;for(var f=0;f<d;f++){var h=b[f];if((!g||h.specified&&h.nodeName!="dj")&&h.nodeValue!=a.getAttribute(h.nodeName))return false}if(g)for(f=0;f<e;f++){h=c[f];if((!g||h.specified&&h.nodeName!="dj")&&h.nodeValue!=b.getAttribute(h.nodeName))return false}return true},isVisible:function(){return this.$.offsetWidth&&this.$.style.visibility!="hidden"},hasAttributes:g&&(f.ie7Compat||f.ie6Compat)?function(){var a=this.$.attributes;for(var b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return true;case"dj":continue;default:if(c.specified)return true}}return false}:function(){var a=this.$.attributes;return a.length>1||a.length==1&&a[0].nodeName!="dj"},hasAttribute:function(a){var b=this.$.attributes.getNamedItem(a);return!!(b&&b.specified)},hide:function(){this.setStyle("display","none")},jg:function(a,b){var c=this.$;a=a.$;if(c==a)return;var d;if(b)while(d=c.lastChild)a.insertBefore(c.removeChild(d),a.firstChild);else while(d=c.firstChild)a.appendChild(c.removeChild(d))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){this.$.setAttribute(a,b);return this};if(g&&(f.ie7Compat||f.ie6Compat))return function(b,c){var d=this;if(b=="class")d.$.className=c;else if(b=="style")d.$.style.cssText=c;else if(b=="tabindex")d.$.tabIndex=c;else if(b=="checked")d.$.checked=c;else a.apply(d,arguments);return d};else return a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};if(g&&(f.ie7Compat||f.ie6Compat))return function(b){if(b=="class")b="className";else if(b=="tabindex")b="tabIndex";a.call(this,b)};else return a}(),uW:function(a){for(var b=0;b<a.length;b++)this.removeAttribute(a[b])},removeStyle:function(a){var b=this;if(b.$.style.removeAttribute)b.$.style.removeAttribute(i.cssStyleToDomStyle(a));else b.setStyle(a,"");if(!b.$.style.cssText)b.removeAttribute("style")},setStyle:function(a,b){this.$.style[i.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){if(g){a=Math.round(a*100);this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")}else this.setStyle("opacity",a)},unselectable:f.gecko?function(){this.$.style.MozUserSelect="none"}:f.webkit?function(){this.$.style.uE="none"}:function(){if(g||f.opera){var a=this.$,b,c=0;a.unselectable="on";while(b=a.all[c++])switch(b.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:b.unselectable="on"}}},vr:function(){var a=this;while(a.getName()!="html"){if(a.getComputedStyle("position")!="static")return a;a=a.getParent()}return null},ir:function(a){var b=this;var c=0,d=0,e=b.getDocument().bH(),h=b.getDocument().$.compatMode=="BackCompat",i=b.getDocument();if(document.documentElement.getBoundingClientRect){var j=b.$.getBoundingClientRect(),l=i.$,m=l.documentElement,n=m.clientTop||e.$.clientTop||0,o=m.clientLeft||e.$.clientLeft||0,p=true;if(g){var q=i.gT().contains(b),r=i.bH().contains(b);p=h&&r||!h&&q}if(p){c=j.left+(!h&&m.scrollLeft||e.$.scrollLeft);c-=o;d=j.top+(!h&&m.scrollTop||e.$.scrollTop);d-=n}}else{var s=b,t=null,u;while(s&&!(s.getName()=="body"||s.getName()=="html")){c+=s.$.offsetLeft-s.$.scrollLeft;d+=s.$.offsetTop-s.$.scrollTop;if(!s.equals(b)){c+=s.$.clientLeft||0;d+=s.$.clientTop||0}var v=t;while(v&&!v.equals(s)){c-=v.$.scrollLeft;d-=v.$.scrollTop;v=v.getParent()}t=s;s=(u=s.$.offsetParent)?new k(u):null}}if(a){var w=b.getWindow(),x=a.getWindow();if(!w.equals(x)&&w.$.frameElement){var y=(new k(w.$.frameElement)).ir(a);c+=y.x;d+=y.y}}if(!document.documentElement.getBoundingClientRect)if(f.gecko&&!h){c+=b.$.clientLeft?1:0;d+=b.$.clientTop?1:0}return{x:c,y:d}},scrollIntoView:function(a){var b=this;var c=b.getWindow(),d=c.eR().height,e=d*-1;if(a)e+=d;else{e+=b.$.offsetHeight||0;e+=parseInt(b.getComputedStyle("marginBottom")||0,10)||0}var f=b.ir();e+=f.y;e=e<0?0:e;var g=c.hV().y;if(e>g||e<g-d)c.$.scrollTo(0,e)},bR:function(b){var c=this;switch(b){case a.eV:c.addClass("cke_on");c.removeClass("cke_off");c.removeClass("cke_disabled");break;case a.aY:c.addClass("cke_disabled");c.removeClass("cke_off");c.removeClass("cke_on");break;default:c.addClass("cke_off");c.removeClass("cke_on");c.removeClass("cke_disabled");break}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src;if(g&&f.version<7)window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")')}return a&&new j(a.contentWindow.document)},qw:function(a,b){var c=this;var d=c.$.attributes;b=b||{};for(var e=0;e<d.length;e++){var f=d[e];if(f.specified||g&&f.nodeValue&&f.nodeName.toLowerCase()=="value"){var h=f.nodeName;if(h in b)continue;var i=c.getAttribute(h);if(i===null)i=f.nodeValue;a.setAttribute(h,i)}}if(c.$.style.cssText!=="")a.$.style.cssText=c.$.style.cssText},renameNode:function(a){var b=this;if(b.getName()==a)return;var c=b.getDocument(),d=new k(a,c);b.qw(d);b.jg(d);b.$.parentNode.replaceChild(d.$,b.$);d.$.dj=b.$.dj;b.$=d.$},aC:function(a){var b=this.$;if(!a.slice)b=b.childNodes[a];else while(a.length>0&&b)b=b.childNodes[a.shift()];return b?new h.bi(b):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(a){if(!a.data.bK().hasClass("cke_enable_context_menu"))a.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}});a.command=function(b,c){this.pW=[];this.exec=function(d){if(this.bu==a.aY)return false;if(c.oD)b.focus();return c.exec.call(this,b,d)!==false};i.extend(this,c,{iH:{qt:1},oD:true,bu:a.aS});a.event.call(this)};a.command.prototype={enable:function(){var b=this;if(b.bu==a.aY)b.bR(!b.vf||typeof b.lJ=="undefined"?a.aS:b.lJ)},disable:function(){this.bR(a.aY)},bR:function(a){var b=this;if(b.bu==a)return false;b.lJ=b.bu;b.bu=a;b.oW("bu");return true},rJ:function(){var b=this;if(b.bu==a.aS)b.bR(a.eV);else if(b.bu==a.eV)b.bR(a.aS)}};a.event.du(a.command.prototype,true);a.config={customConfig:a.getUrl("config.js"),connectorLanguage:"php",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:true,defaultDisplayDate:true,defaultDisplayFilesize:true,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,help",extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1e4,directDownload:false,log:false,logStackTrace:false,rememberLastFolder:true,id:null,startupPath:"",startupFolderExpanded:true,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:false,thumbsUrl:null,thumbsDirectAccess:false,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:false,connectorPath:"core/connector/"};CKFinder.config=a.config;var l=a.config;a.dU=function(a,b){this.rG=a;this.message=b};a.fs=function(a){if(a.fs)return a.fs;this.hasFocus=false;this._={application:a};return this};a.fs.prototype={focus:function(){var b=this;if(b._.fW)clearTimeout(b._.fW);if(!b.hasFocus){if(a.eq)a.eq.fs.ly();var c=b._.application;c.container.getFirst().addClass("cke_focus");b.hasFocus=true;c.oW("focus")}},blur:function(){var a=this;if(a._.fW)clearTimeout(a._.fW);a._.fW=setTimeout(function(){delete a._.fW;a.ly()},100)},ly:function(){if(this.hasFocus){var a=this._.application;a.container.getFirst().removeClass("cke_focus");this.hasFocus=false;a.oW("blur")}}};(function(){var b={};a.lang={ko:{cs:1,da:1,de:1,el:1,en:1,es:1,"es-mx":1,fi:1,fr:1,he:1,hu:1,it:1,ja:1,lv:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ru:1,sk:1,sl:1,sv:1,"zh-cn":1,"zh-tw":1},load:function(b,c,d){if(!b||!a.lang.ko[b])b=this.jV(c,b);if(!this[b])a.ec.load(a.getUrl("lang/"+b+".js"),function(){d(b,CKFinder.lang[b])},this);else d(b,this[b])},jV:function(b,c){var d=this.ko;c=c||navigator.userLanguage||navigator.language;var e=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=e[1],g=e[2];if(d[f+"-"+g])f=f+"-"+g;else if(!d[f])f=null;a.lang.jV=f?function(){return f}:function(a){return a};return f||b}}})();(function(){a.log=function(){if(!l.log&&!window.CKFINDER_LOG)return;var b="";for(var c=0;c<arguments.length;c++){var d=arguments[c];if(!d)continue;if(b)b+="; ";switch(typeof d){case"function":var e=/function (\w+?)\(/.exec(d.toString());e=e?e[1]:"anonymous func";b+=e;break;default:b+=d?d.toString():""}}a._.log.push(b);if(typeof window.console=="object")if(!console.log.apply)console.log(b);else console.log.apply(console,arguments)};a.ba=function(b){if(l.logStackTrace)a.log("[EXCEPTION] "+b.toString());return b};a.mZ=function(b){var c="";for(var d=0;d<a._.log.length;d++)c+=d+1+". "+a._.log[d]+"\n";return c};a._.log=[]})();a.ec=function(){var b={},c={};return{load:function(d,e,f,h,i){var j=typeof d=="string";if(j)d=[d];if(!f)f=a;var l=d.length,m=[],n=[],o=function(a){if(e)if(j)e.call(f,a);else e.call(f,m,n)};if(l===0){o(true);return}var p=function(a,b){(b?m:n).push(a);if(--l<=0)o(b)},q=function(a,d){b[a]=1;var e=c[a];delete c[a];for(var f=0;f<e.length;f++)e[f](a,d)},r=function(d){if(h!==true&&b[d]){p(d,true);return}var f=c[d]||(c[d]=[]);f.push(p);if(f.length>1)return;var j=new k("script");j.setAttributes({type:"text/javascript",src:d});if(e)if(g)j.$.onreadystatechange=function(){if(j.$.readyState=="loaded"||j.$.readyState=="complete"){j.$.onreadystatechange=null;a.log("[LOADED] "+d);q(d,true)}};else{j.$.onload=function(){setTimeout(function(){a.log("[LOADED] "+d);q(d,true)},0)};j.$.onerror=function(){q(d,false)}}j.appendTo(i?i:a.document.eD())};for(var s=0;s<l;s++)r(d[s])},uq:function(b){var c=new k("script");c.setAttribute("type","text/javascript");c.appendText(b);c.appendTo(a.document.eD())}}}();a.fQ=function(a,b){var c=this;c.basePath=a;c.fileName=b;c.bX={};c.loaded={};c.jn={};c._={rZ:{}}};a.fQ.prototype={add:function(a,b){if(this.bX[a])throw'[CKFINDER.fQ.add] The resource name "'+a+'" is already bX.';this.bX[a]=b||{}},eB:function(a){return this.bX[a]||null},getPath:function(b){var c=this.jn[b];return a.getUrl(c&&c.dir||this.basePath+b+"/")},pi:function(b){var c=this.jn[b];return a.getUrl(this.getPath(b)+(c&&c.file||this.fileName+".js"))},tR:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++){var e=a[d];this.jn[e]={dir:b,file:c}}},load:function(b,c,d){if(!i.isArray(b))b=b?[b]:[];var e=this.loaded,f=this.bX,g=[],h={},j={};for(var k=0;k<b.length;k++){var l=b[k];if(!l)continue;if(!e[l]&&!f[l]){var m=this.pi(l);g.push(m);if(!(m in h))h[m]=[];h[m].push(l)}else j[l]=this.eB(l)}a.ec.load(g,function(a,b){if(b.length)throw'[CKFINDER.fQ.load] Resource name "'+h[b[0]].join(",")+'" was not found at "'+b[0]+'".';for(var f=0;f<a.length;f++){var g=h[a[f]];for(var i=0;i<g.length;i++){var k=g[i];j[k]=this.eB(k);e[k]=1}}c.call(d,j)},this)}};a.plugins=new a.fQ("plugins/","plugin");var m=a.plugins;m.load=i.override(m.load,function(a){return function(b,c,d){var e={},f=function(b){a.call(this,b,function(a){i.extend(e,a);var b=[];for(var g in a){var h=a[g],j=h&&h.bM;if(j)for(var k=0;k<j.length;k++){if(!e[j[k]])b.push(j[k])}}if(b.length)f.call(this,b);else{for(g in e){h=e[g];if(h.onLoad&&!h.onLoad.qK){h.onLoad();h.onLoad.qK=1}}if(c)c.call(d||window,e)}},this)};f.call(this,b)}});m.rX=function(a,b,c){var d=this.eB(a);d.lang[b]=c};(function(){var b={},c=function(a,c){var d=function(){b[a]=1;c()},e=new k("img");e.on("load",d);e.on("error",d);e.setAttribute("src",a)};a.rw={load:function(a,d){var e=a.length,f=function(){if(--e===0)d()};for(var g=0;g<a.length;g++){var h=a[g];if(b[h])f();else c(h,f)}}}})();a.skins=function(){var b={},c={},d={},e=function(f,g,h,i){var j=b[g];if(!f.skin){f.skin=j;if(j.bz)j.bz(f)}var k=function(b){for(var c=0;c<b.length;c++)b[c]=a.getUrl(d[g]+b[c])};if(!c[g]){var l=j.ls;if(l&&l.length>0){k(l);a.rw.load(l,function(){c[g]=1;e(f,g,h,i)});return}c[g]=1}h=j[h];var m=0;if(h){if(!h.iB)h.iB=[];else if(h.iB[f.name])m=1}else m=1;if(m)i&&i();else{if(h.eb===undefined)h.eb=[];if(h.eb[f.name]===undefined)h.eb[f.name]=[];var n=h.eb[f.name];n.push(i);if(n.length>1)return;var o=!h.css||!h.css.length,r=!h.js||!h.js.length,s=function(){if(o&&r){h.iB[f.name]=1;for(var a=0;a<n.length;a++){if(n[a])n[a]()}}};if(!o){if(!h.rr){k(h.css);h.rr=1}if(h.qx)for(var t=0;t<h.css.length;t++)a.oC.pb(h.css[t]);else f.on("themeSpace",function(a){if(a.data.space=="head")for(var b=0;b<h.css.length;b++)a.data.html+="<link rel='stylesheet' href='"+h.css[b]+"'>\n";a.aF()});o=1}if(!r){k(h.js);f.ec.load(h.js,function(){r=1;s()})}s()}};return{add:function(c,e){b[c]=e;e.fh=d[c]||(d[c]=a.getUrl("skins/"+c+"/"))},loaded:b,load:function(c,f,g){var h=c.gd,i=c.fh;if(b[h]){e(c,h,f,g);var j=b[h]}else{d[h]=i;a.ec.load(i+"skin.js",function(){e(c,h,f,g)})}}}}();a.gc=new a.fQ("gc/","theme");a.bY=function(a){if(a.bY)return a.bY;this._={jZ:{},items:{},application:a};return this};var n=a.bY;n.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this;var c=b._.items[a],d=c&&b._.jZ[c.type],e=c&&c.command&&b._.application.cS(c.command),f=d&&d.create.apply(b,c.mp);if(e)e.pW.push(f);return f},kd:function(a,b){this._.jZ[a]=b}};(function(){var b=0,c=function(){var d="ckfinder"+ ++b;return a.instances&&a.instances[d]?c():d},g={},h=function(b){var c=b.config.customConfig;if(!c)return false;var d=g[c]||(g[c]={});if(d.gg){d.gg.call(b,b.config);if(b.config.customConfig==c||!h(b))b.cr("customConfigLoaded")}else a.ec.load(c,function(){if(CKFinder.customConfig)d.gg=CKFinder.customConfig;else d.gg=function(){};h(b)});return true},j=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);i.extend(a.config,b,true);delete a.config.on}o(a)});if(b&&b.customConfig!=undefined)a.config.customConfig=b.customConfig;if(!h(a))a.cr("customConfigLoaded")},o=function(b){var c=b.config.skin.split(","),d=c[0],e=a.getUrl(c[1]||"skins/"+d+"/");b.gd=d;b.fh=e;b.iy="cke_skin_"+d+" skin_"+d;b.qn=b.ox();b.on("uiReady",function(){b.document.getWindow().on("lW",function(){i.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1e3),true);i.setCookie("CKFinder_UId",encodeURIComponent(b.id?b.id:location.href),true)})});b.cr("configLoaded");p(b)},p=function(b){a.lang.load(b.config.language,b.config.defaultLanguage,function(a,c){b.langCode=a;b.lang=i.prototypedCopy(c);b.lB=function(){var a="['"+b.lang.DateAmPm.join("','")+"']",c=b.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(b){var c;switch(b){case"d":c="day.replace(/^0/,'')";break;case"dd":c="day";break;case"m":c="month.replace(/^0/,'')";break;case"mm":c="month";break;case"yy":c="year.substr(2)";break;case"yyyy":c="year";break;case"H":c="hour.replace(/^0/,'')";break;case"HH":c="hour";break;case"h":c="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";break;case"hh":c="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case"M":c="minute.replace(/^0/,'')";break;case"MM":c="minute";break;case"a":c=a+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case"aa":c=a+"[ hour < 12 ? 0 : 1 ]";break;default:c="'"+b+"'"}return"',"+c+",'"});c="'"+c+"'";c=c.replace(/('',)|,''$/g,"");return new Function("day","month","year","hour","minute","return ["+c+"].join('');")}();if(f.gecko&&f.version<10900&&b.lang.dir=="rtl")b.lang.dir="ltr";q(b)})},q=function(b){var c=b.config,d=c.plugins,e=c.extraPlugins,f=c.removePlugins;if(e){var g=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");d=d.replace(g,"");d+=","+e}if(f){g=new RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");d=d.replace(g,"")}m.load(d.split(","),function(c){var d=[],e=[],f=[];b.plugins=c;for(var g in c){var h=c[g],j=h.lang,k=m.getPath(g),l=null;c[g].name=g;h.pathName=k;if(j){l=i.indexOf(j,b.langCode)>=0?b.langCode:j[0];if(!h.lang[l])f.push(a.getUrl(k+"lang/"+l+".js"));else{i.extend(b.lang,h.lang[l]);l=null}}e.push(l);d.push(h)}a.ec.load(f,function(){var c=["eK","bz","gr"];for(var f=0;f<c.length;f++)for(var g=0;g<d.length;g++){var h=d[g];if(f===0&&e[g]&&h.lang)i.extend(b.lang,h.lang[e[g]]);if(h[c[f]]){a.log("[PLUGIN] "+h.name+"."+c[f]);h[c[f]](b)}}b.oW("pluginsLoaded");r(b)})})},r=function(b){a.skins.load(b,"application",function(){a.skins.load(b,"host",function(){s(b)})})},s=function(b){var c=b.config.theme;a.gc.load(c,function(){var d=b.theme=a.gc.eB(c);d.pathName=a.gc.getPath(c);b.oW("themeAvailable")})};a.application.prototype.iI=function(b){var f=k.eB(this._.ax),g=this._.kw;delete this._.ax;delete this._.kw;this._.ky={};this._.gS=[];f.getDocument().getWindow().$.CKFinder=b;this.ax=f;this.document=null;this.rQ={};this.name=c();if(this.name in a.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=i.prototypedCopy(l);this.bY=new n(this);this.fs=new a.fs(this);this.aL={};this.aG={};this.on("uiReady",function(a){this.document.getWindow().on("lW",this.fH,this)},this);this.cg=new d(this);this.on("configLoaded",function(a){var b=this;e(b.cg,b,b.config.callback);b.id=b.config.id},this);j(this,g);a.oW("instanceCreated",null,this)}})();i.extend(a.application.prototype,{bD:function(b,c){return this._.ky[b]=new a.command(this,c)},fH:function(b){var c=this;if(!b)c.hS();c.theme.fH(c);c.oW("fH");a.remove(c)},execCommand:function(b,c){a.log("[COMMAND] "+b);var d=this.cS(b),e={name:b,rm:c,command:d};if(d&&d.bu!=a.aY)if(this.oW("beforeCommandExec",e)!==true){e.returnValue=d.exec(e.rm);if(!d.async&&this.oW("afterCommandExec",e)!==true)return e.returnValue}return false},cS:function(a){return this._.ky[a]},ox:function(){var a=Math.round((new Date).getTime()/1e3),b=i.getCookie("CKFinder_UTime"),c=decodeURIComponent(i.getCookie("CKFinder_UId"));if(c&&b&&c==(this.id?this.id:location.href)&&Math.abs(a-b)<5)return 1;return 0},bs:""});(function(){var b="";for(var c=49;c<58;c++)b+=String.fromCharCode(c);for(c=65;c<91;c++){if(c==73||c==79)continue;b+=String.fromCharCode(c)}a.bs=b;a.hf="lo";a.hg="ho";a.jG=new window["RegExp"]("^www\\.")})();a.on("loaded",function(){var b=a.application.eb;if(b){delete a.application.eb;for(var c=0;c<b.length;c++)b[c].iI()}});delete a.dO;a.instances={};a.document=new j(document);a.oC=a.document.getWindow().$!=a.document.getWindow().$.top?new j(a.document.getWindow().$.top.document):a.document;a.add=function(b){a.instances[b.name]=b;a.jt=b;b.on("focus",function(){if(a.eq!=b){a.eq=b;a.oW("eq")}});b.on("blur",function(){if(a.eq==b){a.eq=null;a.oW("eq")}})};a.remove=function(b){delete a.instances[b.name]};a.aL={};a.eV=1;a.aS=2;a.aY=0;a.bF="";(function(){function b(a,b){return a+"."+(b.name||b||a)}a.aG={bX:{},hi:function(c,e,f){var g=b(c,e);if(this.bX[g]!==undefined)throw"[CKFINDER] Widget "+g+" already bX!";a.log("[WIDGET] bX "+g);this.bX[g]=new d(g,f);return this.bX[g]},bz:function(c,d,e,f,g){var h=b(d,e),j=this.bX[h],l=i.deepCopy(j.hF),m=function(a,b,c){this.app=a;this.eh=b instanceof k?b:new k(b);this.hF=l?i.extend(l,c):c||{};this._={};var d=function(a){this.widget=a};d.prototype=this.tools;this.tools=new d(this);var e=j.dT;if(e.length)for(var f=0;f<e.length;f++)e[f].call(this,a,this)};m.prototype=j;var n=new m(c,f,g);for(var o in n.fw)n.gA(o);if(!c.aG[h])c.aG[h]=[];c.aG[h].push(n);a.log("[WIDGET] instanced "+h);return n}};var c={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},d=function(a,b){var c=this;c.id=a;c.fw={};c.hF=b||{};c.dT=[];c.tools=new c.tools(c)};d.prototype={gA:function(b){var d=this;a.log("[WIDGET] Enabling behavior "+b);var e=d.fw[b];if(!e)return;var f=d;for(var g=0;g<e.cC.length;g++){var h=e.cC[g];if(c[h])d.eh.on(h,e.fO,f);else{d.on(h,e.fO,f);d.app.on(h,e.fO,f)}}},ke:function(b){a.log("[WIDGET] Disabling behavior "+b);var d=this.fw[b];if(!d)return;for(var e=0;e<d.cC.length;e++){var f=d.cC[e];if(c[f])this.eh.aF(f,d.fO);else this.aF(f,d.fO)}},bh:function(a,b,c){if(!i.isArray(b))b=[b];this.fw[a]={cC:b,fO:c};if(this.eh)this.gA(a)},removeBehavior:function(a){delete this.fw[a]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}};d.prototype.tools.prototype={kg:function(a){if(a.target==this.widget.eh)return 1}};a.event.du(d.prototype)})();a.xml=function(a){var b=null;if(typeof a=="object")b=a;else{var c=(a||"").replace(/ /g," ");if(window.DOMParser)b=(new DOMParser).parseFromString(c,"text/xml");else if(window.ActiveXObject){try{b=new ActiveXObject("MSXML2.DOMDocument")}catch(d){try{b=new ActiveXObject("Microsoft.XmlDom")}catch(d){}}if(b){b.async=false;b.resolveExternals=false;b.validateOnParse=false;b.loadXML(c)}}}this.mq=b};a.xml.prototype={selectSingleNode:function(a,b){var c=this.mq;if(b||(b=c))if(g||b.selectSingleNode)return b.selectSingleNode(a);else if(c.evaluate){var d=c.evaluate(a,b,null,9,null);return d&&d.singleNodeValue||null}return null},selectNodes:function(a,b){var c=this.mq,d=[];if(b||(b=c))if(g||b.selectNodes)return b.selectNodes(a);else if(c.evaluate){var e=c.evaluate(a,b,null,5,null);if(e){var f;while(f=e.iterateNext())d.push(f)}}return d},vB:function(a,b){var c=this.selectSingleNode(a,b),d=[];if(c){c=c.firstChild;while(c){if(c.xml)d.push(c.xml);else if(window.XMLSerializer)d.push((new XMLSerializer).serializeToString(c));c=c.nextSibling}}return d.length?d.join(""):null}};(function(){var b={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},c={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},d=function(b){var c=b.getChildren();for(var d=0,e=c.count();d<e;d++){var f=c.getItem(d);if(f.type==a.cv&&a.ga.um[f.getName()])return true}return false};h.qS=function(e){var f=this;var h=null,i=null,j=[],k=e;while(k){if(k.type==a.cv){if(!f.qH)f.qH=k;var l=k.getName();if(g&&k.$.scopeName!="HTML")l=k.$.scopeName.toLowerCase()+":"+l;if(!i){if(!h&&b[l])h=k;if(c[l])if(!h&&l=="div"&&!d(k))h=k;else i=k}j.push(k);if(l=="body")break}k=k.getParent()}f.block=h;f.tX=i;f.elements=j}})();h.qS.prototype={sJ:function(a){var b=this.elements,c=a&&a.elements;if(!c||b.length!=c.length)return false;for(var d=0;d<b.length;d++){if(!b[d].equals(c[d]))return false}return true}};h.text=function(a,b){if(typeof a=="string")a=(b?b.$:document).createTextNode(a);this.$=a};h.text.prototype=new h.bi;i.extend(h.text.prototype,{type:a.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){var b=this;if(g&&a==b.hJ()){var c=b.getDocument().jT("");c.kB(b);return c}var d=b.getDocument(),e=new h.text(b.$.splitText(a),d);if(f.ie8){var i=new h.text("",d);i.kB(e);i.remove()}return e},substring:function(a,b){if(typeof b!="number")return this.$.nodeValue.substr(a);else return this.$.nodeValue.substring(a,b)}});h.pa=function(b){b=b||a.document;this.$=b.$.createDocumentFragment()};i.extend(h.pa.prototype,k.prototype,{type:a.om,kA:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)}},true,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,aC:1,getChildren:1});(function(){function c(a){var c,d=null;while(c=b.call(this,a))d=c;return d}function b(b,c){if(this._.end)return null;var d,e=this.mk,f,g=this.vR,h=this.type,i=b?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start){this._.start=1;e.trim();if(e.collapsed){this.end();return null}}if(!b&&!this._.kp){var j=e.endContainer,k=j.aC(e.endOffset);this._.kp=function(b,c){return(!c||!j.equals(b))&&(!k||!b.equals(k))&&(b.type!=a.cv||b.getName()!="body")}}if(b&&!this._.ka){var l=e.startContainer,m=e.startOffset>0&&l.aC(e.startOffset-1);this._.ka=function(b,c){return(!c||!l.equals(b))&&(!m||!b.equals(m))&&(b.type!=a.cv||b.getName()!="body")}}var n=b?this._.ka:this._.kp;if(g)f=function(a,b){if(n(a,b)===false)return false;return g(a)};else f=n;if(this.current)d=this.current[i](false,h,f);else if(b){d=e.endContainer;if(e.endOffset>0){d=d.aC(e.endOffset-1);if(f(d)===false)d=null}else d=f(d)===false?null:d.hZ(true,h,f)}else{d=e.startContainer;d=d.aC(e.startOffset);if(d){if(f(d)===false)d=null}else d=f(e.startContainer)===false?null:e.startContainer.hL(true,h,f)}while(d&&!this._.end){this.current=d;if(!this.lf||this.lf(d)!==false){if(!c)return d}else if(c&&this.lf)return false;d=d[i](false,h,f)}this.end();return this.current=null}h.gm=i.createClass({$:function(a){this.mk=a;this._={}},ej:{end:function(){this._.end=1},next:function(){return b.call(this)},previous:function(){return b.call(this,true)},sC:function(){return b.call(this,false,true)!==false},sD:function(){return b.call(this,true,true)!==false},uF:function(){return c.call(this)},uB:function(){return c.call(this,true)},reset:function(){delete this.current;this._={}}}});var d={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},e={hr:1};k.prototype.qy=function(a){var b=i.extend({},e,a||{});return d[this.getComputedStyle("display")]||b[this.getName()]};h.gm.pQ=function(b){return function(c,d){return!(c.type==a.cv&&c.qy(b))}};h.gm.us=function(){return this.pQ({br:1})};h.gm.tU=function(a){},h.gm.tW=function(a,b){function c(a){return a&&a.getName&&a.getName()=="span"&&a.hasAttribute("_fck_bookmark")}return function(d){var e,f;e=d&&!d.getName&&(f=d.getParent())&&c(f);e=a?e:e||c(d);return b^e}};h.gm.sf=function(b){return function(c){var d=c&&c.type==a.fl&&!i.trim(c.getText());return b^d}}})();(function(){if(f.webkit){f.hc=false;return}var b=g&&f.version<7,c=g&&f.version==7,d=b?a.basePath+"images/spacer.gif":c?"about:blank":"data:image/png;base64,",e=k.et('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+d+')"></div>',a.document);e.appendTo(a.document.eD());try{f.hc=e.getComputedStyle("background-image")=="none"}catch(h){f.hc=false}if(f.hc)f.cssClass+=" cke_hc";e.remove()})();m.load(l.pO.split(","),function(){a.status="loaded";a.oW("loaded");var b=a._.io;if(b){delete a._.io;for(var c=0;c<b.length;c++)a.add(b[c])}});if(g)try{document.execCommand("BackgroundImageCache",false,true)}catch(o){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable</span>',confirmCancel:"Some of the options have been changed. Are you sure to close the dialog?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file name extension? The file may become unusable",FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesLoading:"Loading...",FilesEmpty:"Empty folder",FilesMoved:"File %1 moved into %2:%3",FilesCopied:"File %1 copied into %2:%3",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from basket",BasketOpenFolder:"Open parent folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',BasketEmpty:"No files in the basket, drag'n'drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",BasketPasteErrorOther:"File %s error: %e",BasketPasteMoveSuccess:"The following files were moved: %s",BasketPasteCopySuccess:"The following files were copied: %s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",CopyDragDrop:"Copy file here",MoveDragDrop:"Move file here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New name",FileExistsDlgTitle:"File already exists",SysErrorDlgTitle:"System error",FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"Close",UploadTitle:"Upload New File",UploadSelectLbl:"Select the file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file gJ your computer",UploadNoFolder:"Please select folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",UploadExtIncorrect:"File extension not allowed in this folder.",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",SetDisplayDate:"Date",SetDisplaySize:"File Size",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 kB",KbPerSecond:"%1 kB/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file has been renamed to "%1"',202:"Invalid file",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled for security reasons. The file contains HTML like data.",207:'The uploaded file has been renamed to "%1"',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",501:"The thumbnails support is disabled."},ErrorMsg:{pg:"The file name cannot be empty",FileExists:"File %s already exists",pU:"The folder name cannot be empty",oP:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',pM:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',oo:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site."},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",thumbnailLarge:"Large (%s)",newSize:"Set new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create new image",noExtensionChange:"The file extension cannot be changed.",imageSmall:"Source image is too small",contextMenuName:"Resize"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",loadingFile:"Loading file, please wait..."}};(function(){var b=1,c=2,d=4,e=8,f=16,g=32,h=64,i=128;a.aL.Acl=function(a){var j=this;if(!a)a=0;j.folderView=(a&b)==b;j.folderCreate=(a&c)==c;j.folderRename=(a&d)==d;j.folderDelete=(a&e)==e;j.fileView=(a&f)==f;j.fileUpload=(a&g)==g;j.fileRename=(a&h)==h;j.fileDelete=(a&i)==i};m.add("acl")})();(function(){m.add("connector",{bM:[],bz:function(b){b.on("appReady",function(){b.connector=new a.aL.Connector(b);var c=b.config.resourceType,d=c?{type:c}:null;b.connector.sendCommand("Init",d,function(c){if(c.checkError())return;var d="Connector/ConnectorInfo/";a.ed=c.selectSingleNode(d+"@s").value;a.bF=c.selectSingleNode(d+"@c").value+"----";b.config.thumbsEnabled=c.selectSingleNode(d+"@thumbsEnabled").value=="true";b.config.thumbsDirectAccess=false;if(b.config.thumbsEnabled){var e;e=c.selectSingleNode(d+"@thumbsUrl");if(e)b.config.thumbsUrl=e.value;e=c.selectSingleNode(d+"@thumbsDirectAccess");if(e)b.config.thumbsDirectAccess=e.value=="true"}b.config.imagesMaxWidth=parseInt(c.selectSingleNode(d+"@imgWidth").value,10);b.config.imagesMaxHeight=parseInt(c.selectSingleNode(d+"@imgHeight").value,10);var f=c.selectSingleNode(d+"@plugins"),g=f&&f.value;if(g&&g.length)m.load(g.split(","),function(d){var e=[],f=[],g=[];for(var h in d){var j=d[h],k=j.lang,l=m.getPath(h),n=null;if(!b.plugins[h])b.plugins[h]=d[h];else continue;d[h].name=h;j.pathName=l;if(k){n=i.indexOf(k,b.langCode)>=0?b.langCode:k[0];if(!j.lang[n])g.push(a.getUrl(l+"lang/"+n+".js"));else{i.extend(b.lang,j.lang[n]);n=null}}f.push(n);e.push(j)}a.ec.load(g,function(){var d=["eK","bz","gr"];for(var g=0;g<d.length;g++)for(var h=0;h<e.length;h++){var j=e[h];if(g===0&&f[h]&&j.lang)i.extend(b.lang,j.lang[f[h]]);if(j[d[g]]){a.log("[PLUGIN] "+j.name+"."+d[g]);j[d[g]](b)}}b.cr("uiReady");b.cr("appReady");b.oW("pluginsLoaded",{step:2,jN:b.connector});b.cr("connectorInitialized",{xml:c})})});else{b.oW("pluginsLoaded",{step:2,jN:b.connector});b.cr("connectorInitialized",{xml:c})}})})}});a.aL.Connector=function(b){this.app=b;var c=b.config.connectorLanguage||"php";this.oN=a.basePath+(b.config.connectorPath||"core/connector/")+c+"/connector."+c};a.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){if(this.app.aV)return this.app.aV.getUrl()},currentType:function(){if(this.app.aV)return this.app.aV.type},currentTypeHash:function(){if(this.app.aV)return a.getResourceType(this.app.aV.type).hash},currentResourceType:function(){return a.getResourceType(this.currentType())},sendCommand:function(c,d,e,f,g){var h=this.composeUrl(c,d,f,g),j=this;if(e)return a.ajax.loadXml(h,function(a){a.hy=j.app;e(i.extend(a,b))});else return a.ajax.loadXml(h)},sendCommandPost:function(c,d,e,f,g,h){var j=this.composeUrl(c,d,g,h),k=this;if(!e)e={};e.CKFinderCommand=true;if(f)return a.ajax.loadXml(j,function(a){a.hy=k.app;f(i.extend(a,b))},this.composeUrlParams(e));else return a.ajax.loadXml(j,null,this.composeUrlParams(e))},composeUrl:function(a,b,c,d){var e=this;var f=e.oN+"?command="+encodeURIComponent(a);if(a!="Init"){var g="";if(!d)d=e.app.aV;if(c)g=e.app.getResourceType(c).hash;else g=e.app.getResourceType(d.type).hash;f+="&type="+encodeURIComponent(c||e.app.aV.type)+"&currentFolder="+encodeURIComponent(d.getPath()||"")+"&langCode="+e.app.langCode+"&hash="+g}if(b)f+="&"+e.composeUrlParams(b);if(e.app.id)f+="&id="+encodeURIComponent(e.app.id);return f},composeUrlParams:function(a){if(!a)return"";var b="";for(var c in a){if(b.length)b+="&";b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c])}return b}};var b={checkError:function(){var b=this;var c=b.getErrorNumber(),d=b.hy.connector;if(c==d.ERROR_NONE)return false;if(c===-1)return true;var e=b.getErrorMessage();a.log("[ERROR] "+c);var f;if(c==d.ERROR_CUSTOMERROR)f=e;else{f=b.hy.lang.Errors[c];if(f)for(var g=0;g<=arguments.length;g++){var h=g===0?e:arguments[g-1];f=f.replace(/%(\d+)/,h)}else f=b.hy.lang.ErrorUnknown.replace(/%1/,c)}b.hy.msgDialog("",f);return c!=d.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");if(!a)return-1;return parseInt(a.value,10)},getErrorMessage:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");if(!a)return"";return a.value}}})();m.add("resource",{bM:["connector"],bz:function(b){b.resourceTypes=[];b.on("connectorInitialized",function(c){var d=c.data.xml.selectNodes("Connector/ResourceTypes/ResourceType");for(var e=0;e<d.length;e++){var f=d[e].attributes;b.resourceTypes.push(new a.aL.ResourceType(b,f.getNamedItem("name").value,f.getNamedItem("url").value,f.getNamedItem("hasChildren").value,f.getNamedItem("allowedExtensions").value,f.getNamedItem("deniedExtensions").value,"Thumbnails",f.getNamedItem("acl").value,f.getNamedItem("hash").value))}b.cr("resourcesReceived",{hK:b.resourceTypes})});b.getResourceType=function(a){for(var b=0;b<this.resourceTypes.length;b++){var c=this.resourceTypes[b];if(c.name==a)return c}return null}}});(function(){function b(a){var b={};if(a.length>0){var c=a.toLowerCase().split(",");for(var d=0;d<c.length;d++)b[c[d]]=true}return b}a.aL.ResourceType=function(a,c,d,e,f,g,h,i,j){var k=this;k.app=a;k.name=c;k.url=d;k.hasChildren=e==="true";k.defaultView=h;k.allowedExtensions=f;k.deniedExtensions=g;k.oT=b(f);k.ms=b(g);k.nS=i;k.hash=j};a.aL.ResourceType.prototype={isExtensionAllowed:function(a){var b=this;a=a.toLowerCase();return(b.deniedExtensions.length===0||!b.ms[a])&&(b.allowedExtensions.length===0||!!b.oT[a])},getRootFolder:function(){for(var a=0;a<this.app.folders.length;a++){var b=this.app.folders[a];if(b.isRoot&&b.type==this.name)return b}return undefined}};})();(function(){function d(c,d){if(!c||c.length===0)throw new a.dU("name_empty",d.lang.ErrorMsg.pU);if(b.iz.test(c))throw new a.dU("name_invalid_chars",d.lang.ErrorMsg.pM);return true}function c(b,c,d,e,f){if(b.childFolders===null)b.childFolders=[];var g=new a.aL.Folder(b.app,c,d,e,f);g.parent=b;g.nh=b.isRoot?0:b.nh+1;b.childFolders.push(g);return g}var b={iz:/[\\\/:\*\?"<>\|]/};m.add("folder",{bM:["resource","connector","acl"],bz:function(b){b.folders=[];b.aV=null;b.on("resourcesReceived",function c(c){var d=[],e=c.data.hK;for(var f=0;f<e.length;f++){var g=e[f];d.push(new a.aL.Folder(b,g.name,g.name,g.hasChildren,g.nS));d[d.length-1].isRoot=true}b.oW("requestAddFolder",{folders:d},function h(){var c=b.config.startupPath||"",d=0,e="",f="";if(b.config.rememberLastFolder){var g=b.id?"CKFinder_Path_"+b.id:"CKFinder_Path";e=decodeURIComponent(i.getCookie(g))||""}if(c&&!b.qn){f=c;d=1}else if(e)f=e;else if(c)f=c;else if(b.resourceTypes.length)f=b.resourceTypes[0].name+"/";if(f){a.log("[FOLDER] Opening startup path: "+f);var h=f.split(":");if(!b.getResourceType(h[0])||h.length<2)h=[b.resourceTypes[0].name,"/"];var j=b.aG["foldertree.foldertree"][0];j.tools.jL(h[0],h[1],function k(c){if(!c)return;a.log("[FOLDER] Opening startup folder: ",c);var d=h[2]=="1"||h[2]===undefined;if(d&&b.config.startupFolderExpanded===false)d=0;j.oW("requestSelectFolder",{folder:c,expand:d})})}})});b.bD("RemoveFolder",{exec:function(a){var b=a.aV;if(b)a.fe("",a.lang.FolderDelete.replace("%1",b.name),function(){a.oW("requestProcessingFolder",{folder:b});b.remove()})}});b.bD("CreateSubFolder",{exec:function(b){var c=b.aV;if(c)b.hs(b.lang.NewNameDlgTitle,b.lang.FolderRename,"",function(d){d=i.trim(d);if(d)try{b.oW("requestProcessingFolder",{folder:c});c.createNewFolder(d)}catch(e){if(e instanceof a.dU){b.oW("requestRepaintFolder",{folder:c});b.msgDialog("",e.message)}else throw e}})}});b.bD("RenameFolder",{exec:function(b){var c=b.aV;if(c)b.hs(b.lang.RenameDlgTitle,b.lang.FolderRename,b.aV.name,function(d){d=i.trim(d);if(d)try{c.rename(d)}catch(e){if(e instanceof a.dU){b.oW("requestRepaintFolder",{folder:c});b.msgDialog("",e.message)}else throw e}})}});if(b.eU){b.dZ("folder0",99);b.dZ("folder1",100);b.dZ("folder2",101);b.dZ("folder3",102);b.eU({kl:{label:b.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},lI:{label:b.lang.Rename,command:"RenameFolder",group:"folder1"},removeFolder:{label:b.lang.Delete,command:"RemoveFolder",group:"folder2"}})}}});a.aL.Folder=function(b,c,d,e,f){var g=this;g.app=b;g.type=c||"";g.name=d||"";g.hasChildren=e==undefined||e===null?true:!!e;g.isRoot=false;g.isOpened=false;g.parent=null;g.isDirty=false;g.acl=new a.aL.Acl(f);g.index=b.folders.push(g)-1;g.childFolders=null};a.aL.Folder.prototype={getPath:function(){var a=this,b=a.isRoot?"/":a.name;while(a.parent){a=a.parent;b=a.isRoot?"/"+b:a.name+"/"+b}return a!=this?b+"/":b},getUrl:function(){var a=this,b="";while(a){b=a.isRoot?this.app.getResourceType(a.type).url+b:encodeURIComponent(a.name)+"/"+b;a=a.parent}return b},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){var a=this;if(a.app.folders[a.index]==a)return a;for(var b=0;b<a.parent.childFolders.length;b++){if(a.parent.childFolders[b].name==a.name)return a.parent.childFolders[b]}return undefined},getChildren:function(b,d){var e=this,f=e.childFolders;if(e.hl&&!d){a.log("[FOLDER] getChildrenLock active, defering callback...");e.app.oW("requestLoadingFolder",{folder:e});var g=100;setTimeout(function(){if(!e.hl)b(f);else if(g<=3e3)setTimeout(arguments.callee,g*=2);else{a.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!");e.hl=false;e.getChildren(b)}});return undefined}if(f&&!e.isDirty&&!d){b(f);return f}e.hl=true;if(e.isDirty&&f){a.log("[FOLDER] Clearing folder children cache.");for(var h=0;h<f.length;h++)delete e.app.folders[f[h].index]}e.app.oW("requestLoadingFolder",{folder:e});this.app.connector.sendCommand("GetFolders",null,function(a){if(a.checkError()){e.app.oW("requestRepaintFolder",{folder:e});return}var d=a.selectSingleNode("Connector/@resourceType").value;e.hm=true;var f=a.selectNodes("Connector/Folders/Folder"),g=[];e.childFolders=null;for(var h=0;h<f.length;h++){var i=f[h].attributes.getNamedItem("name").value,j=f[h].attributes.getNamedItem("hasChildren").value=="true",k=parseInt(f[h].attributes.getNamedItem("acl").value,10);g.push(c(e,d,i,j,k))}e.hasChildren=!!f.length;e.isDirty=false;e.hl=null;e.app.oW("requestRepaintFolder",{folder:e});b(g)},e.type,e);return null},mapLoadedDescendants:function(a){if(!this.childFolders)return;for(var b=0;b<this.childFolders.length;b++){var c=this.childFolders[b];c.mapLoadedDescendants(a);a(c)}},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},open:function(a){if(a&&!this.hm)return;this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){var a=1,b=this;while(b){a++;b=b.parent}return a},toggle:function(){var a=this;if(!a.hasChildren)return;if(a.isOpened)a.close();else a.open()},createNewFolder:function(a){d(a,this.app);var b=this;b.isDirty=true;b.app.connector.sendCommandPost("CreateFolder",{NewFolderName:a},null,function(c){if(c.checkError()){b.app.oW("requestRepaintFolder",{folder:b});return}b.hasChildren=true;b.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:b,uv:a})},this.type,this)},rename:function(a){d(a,this.app);var b=this;this.app.oW("requestProcessingFolder",{folder:b});b.parent.isDirty=true;if(b.name==a){b.app.oW("requestRepaintFolder",{folder:b});return}b.app.connector.sendCommandPost("RenameFolder",{NewFolderName:a},null,function(a){if(a.checkError()){b.app.oW("requestRepaintFolder",{folder:b});return}b.parent.isDirty=false;b.name=a.selectSingleNode("Connector/RenamedFolder/@newName").value;b.app.oW("requestRepaintFolder",{folder:b})},this.type,this)},remove:function(){var a=this;a.deselect();a.parent.isDirty=true;this.app.oW("requestProcessingFolder",{folder:a});a.app.connector.sendCommandPost("DeleteFolder",null,null,function(b){if(b.checkError()){a.app.oW("requestRepaintFolder",{folder:a});return}a.app.oW("requestRemoveFolder",{folder:a},function(){var b=i.indexOf(a.parent.childFolders,a),c=a.index,d=a.parent,e=a.app;d.childFolders[b].mapLoadedDescendants(function(a){e.folders[a.index].isDeleted=true;delete e.folders[a.index]});d.childFolders.splice(b,1);e.folders[c].isDeleted=true;delete e.folders[c];if(d.childFolders.length===0){d.childFolders=null;d.hasChildren=false}if(a.releaseDomNodes)a.releaseDomNodes();e.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:d,uN:c,folder:a})})},this.type,this)},toString:function(){return this.getPath()}};})();(function(){function n(a){return new k(a)}function l(a,b,c){return j(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!(c--))return a})}function j(a,b){for(var c in a){if(b(a[c])!==undefined)return a[c]}return undefined}function e(a,b){var c="";for(var d=0;d<a.length;d++)c+=b(a[d]);return c}function d(a){var b=!a.hasChildren?" nochildren":"",c="f"+a.index;return'<li id="'+c+'" role="presentation" class="openable'+b+'">'+'<span role="presentation" class="expander"></span>'+'<a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+a.hU()+'">'+i.htmlEncode(a.name)+"</a>"+"<ul></ul>"+"</li>"}function c(){i.extend(a.aL.Folder.prototype,{liNode:function(){var a=this;if(a.iC===undefined){var b=a.app.document.getById("f"+a.index);if(b)a.iC=b}return a.iC},aNode:function(){var a=this;if(a.dM===undefined){var b=a.liNode();if(b)a.dM=n(l(b.$.childNodes,"a"))}return a.dM},expanderNode:function(){var a=this;if(a.iR===undefined){var b=a.liNode();if(b)a.iR=n(l(b.$.childNodes,"span"))}return a.iR},childrenRootNode:function(){var a=this;if(a.iM===undefined){var b=a.liNode();if(b)a.iM=n(l(b.$.childNodes,"ul"))}return a.iM},releaseDomNodes:function(){var a=this;delete a.iC;delete a.dM;delete a.iR;delete a.iM},focus:function(){var a=this.aNode();if(a){a.setAttribute("tabindex",0);a.focus()}},blur:function(){var a=this.aNode();if(a)this.aNode().setAttribute("tabindex",-1)}})}function b(){function c(a){this.widget=a;this.bi=a.tools.kI().cf()}var b=a.aG.hi("foldertree","foldertree");b.dT.push(function(){var a=this.bn();if(!a.hasClass("view"))a=a.getParent();if(g){a.$.onfocusin=function(){a.addClass("focus_inside")};a.$.onfocusout=function(){a.removeClass("focus_inside")}}else{a.$.addEventListener("focus",function(){a.addClass("focus_inside")},true);a.$.addEventListener("blur",function(){a.removeClass("focus_inside")},true)}});b.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function j(b){var c=this,d=this.tools.cq(b),e=0;if(b.data&&b.data.bK){var f=b.data.bK();e=f.$==c.bn().$}if(!d&&!e)return;var g=i.extend({},b.data,{folder:d},true);this.oW("beforeKeyboardNavigation",g,function h(f,g){if(f)return;try{var h=b.data.db();if(e&&h>=37&&h<=40){var i=c.app.folders[0];if(i)this.tools.cT(i)}else{var j;if(h==38){j=d.liNode();if(j.gE()){var k=this.tools.cq(j.cf());while(k.isOpened&&k.hasChildren){if(k.childFolders.length)k=k.childFolders[k.childFolders.length-1];else break}this.tools.cT(k)}else if(!d.isRoot)this.tools.cT(d.parent)}else if(h==39&&d.hasChildren){if(d.isOpened)d.getChildren(function(a){c.tools.cT(a[0])});else this.oW("requestExpandFolder",{folder:d})}else if(h==40){j=d.liNode();if(d.isOpened&&d.hasChildren)d.getChildren(function(a){c.tools.cT(a[0])});else if(j.ge())this.tools.cT(this.tools.cq(j.dG()));else if(!d.isRoot&&d.parent)(function(a){var b=a.liNode();if(b.ge())c.tools.cT(c.tools.cq(b.dG()));else if(a.parent)arguments.callee(a.parent)})(d.parent)}else if(h==37)if(d.isOpened)this.oW("requestExpandFolder",{folder:d,collapse:1});else if(!d.isRoot&&d.parent)this.tools.cT(d.parent)}this.oW("successKeyboardNavigation",g);this.oW("afterKeyboardNavigation",g)}catch(l){l=a.ba(l);this.oW("failedKeyboardNavigation",g);this.oW("afterKeyboardNavigation",g);throw l}})});b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(c){if(!c.data)return;var d=c.data.folder;if(c.data.name=="RemoveFolder"){if(d==b.tools.ew){b.tools.cT();b.bn().focus()}var e=a.aG["filesview.filesview"][0].tools.folder,f=d==e;d.mapLoadedDescendants(function(a){if(e==d)f=true});b.oW("requestSelectFolder",{folder:d.parent,expand:f})}else if(c.data.name=="RenameFolder")if(d==b.tools.ew)d.focus()})});b.bh("RemoveFolder","requestRemoveFolder",function m(b){var c=this,d=this.tools.cq(b),e=i.extend({},b.data,{folder:d},true);this.oW("beforeRemoveFolder",e,function f(b,c){var e=this;if(b)return;try{d.liNode().remove();e.oW("successRemoveFolder",c);e.oW("afterRemoveFolder",c)}catch(f){e.oW("failedRemoveFolder",c);e.oW("afterRemoveFolder",c);throw a.ba(f)}})});b.bh("LoadingFolder","requestLoadingFolder",function o(b){var c=this,d=this.tools.cq(b);if(!d)return undefined;var e=i.extend({},b.data,{folder:d},true);this.oW("beforeLoadingFolder",e,function f(b,d){if(b)return;var e=d.folder;try{this.on("afterExpandFolder",function(a){if(a.data&&a.data.folder==e){a.aF();var b=e.childrenRootNode().aC(0);if(b&&b.hasClass("loading")){b.remove();this.oW("requestRepaintFolder",{folder:e});d.step=2;c.oW("successLoadingFolder",d);c.oW("afterLoadingFolder",d)}}},null,null,1);if(e.childrenRootNode())e.childrenRootNode().setHtml('<li class="loading">'+c.app.lang.FolderLoading+"</li>");this.oW("requestProcessingFolder",{folder:e});d.step=1;this.oW("successLoadingFolder",d)}catch(f){this.oW("failedLoadingFolder",d);this.oW("afterLoadingFolder",d);throw a.ba(f)}});return undefined});b.bh("ProcessingFolder",["requestProcessingFolder"],function p(b){b.result=this.oW("beforeProcessingFolder",b.data,function c(b,c){var d=this;if(b)return;try{var e=d.tools.cq(c.folder),f=e.aNode();f.addClass("processing");d.oW("successProcessingFolder",c);d.oW("afterProcessingFolder",c)}catch(g){g=a.ba(g);d.oW("failedProcessingFolder",c);d.oW("afterProcessingFolder",c);throw g}})});b.bh("RepaintFolder",["requestRepaintFolder"],function q(b){this.oW("beforeRepaintFolder",b.data,function c(b,c){var d=this;if(b)return undefined;try{var e=d.tools.cq(c.folder),f=e.liNode(),g=e.expanderNode(),h=e.aNode(),j=e.childrenRootNode(),k=e.name;if(h.getHtml()!=k)h.setHtml(i.htmlEncode(e.name));h.removeClass("processing");if(!e.hasChildren){f.removeClass("openable");f.removeClass("closable");f.addClass("nochildren");g.removeAttribute("aria-expanded");if(j.$.hasChildNodes())j.setHtml("")}else if(e.hasChildren)if(j.$.hasChildNodes()){f.addClass("closable");f.removeClass("openable");g.setAttribute("aria-expanded","true")}else{f.addClass("openable");f.removeClass("closable");g.removeAttribute("aria-expanded")}d.oW("successRepaintFolder");d.oW("afterRepaintFolder")}catch(l){d.oW("failedRepaintFolder");d.oW("afterRepaintFolder");throw a.ba(l)}return undefined})});b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){if(a.data&&a.data.name=="RemoveFolder")b.oW("requestRepaintFolder",{folder:a.data.ip})})});b.bh("AddFolder","requestAddFolder",function t(b){var c=this,f={folders:b.data.folder?[b.data.folder]:b.data.folders,root:b.data.root};this.oW("beforeAddFolder",f,function g(b,f){if(b)return;var g=f.folders,h=f.root?this.tools.cq(f.root):null,i,j;try{if(h){if(h.hasChildren===false)h.liNode().addClass("nochildren");else{h.liNode().removeClass("nochildren");i=e(g,d);h.childrenRootNode().appendHtml(i)}}else{var k={};for(var l=0;l<g.length;l++){j=g[l].parent?g[l].parent.index:-1;if(!k[j])k[j]=[];k[j].push(g[l])}for(var m in k){i=e(k[m],d);if(m==-1)this.tools.kI().appendHtml(i);else{j=this.tools.cq(m);j.liNode().removeClass("nochildren");j.childrenRootNode().appendHtml(i)}}if(1==a.bs.indexOf(a.bF.substr(1,1))%5&&window.top[a.hf+"cation"][a.hg+"st"].toLowerCase().replace(a.jG,"")!=a.ed.replace(a.jG,"")||a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1))setTimeout(function(){c.app.layout.ea()},100)}this.oW("successAddFolder");this.oW("afterAddFolder")}catch(n){this.oW("failedAddFolder");this.oW("afterAddFolder");throw a.ba(n)}})});b.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function w(b){var c=this,d=b.name=="click",e=d&&b.data.bK();if(this.tools.kg(b))return;var f=this.tools.cq(b);if(d||b.name=="requestSelectFolder"){if(d&&!f)return;if(d&&f.aNode()&&f.aNode().$!=e.$)return;var g=i.extend({jR:1,expand:0},b.data,{folder:f},true);this.oW("beforeSelectFolder",g,function h(b,e){if(b)return undefined;var f=e.folder;try{if(this.app.aV&&(!f||f!=this.app.aV)){var g=this.app.aV.liNode();if(g)g.removeClass("selected");c.tools.hk().mc();this.app.aV=null}if(f){if(d)this.tools.cT(f);if(e.expand)c.oW("requestExpandFolder",{folder:f});f.liNode().addClass("selected");this.app.aV=f;c.tools.hk().select(f.aNode());if(e.jR){c.oW("requestProcessingFolder",{folder:f});c.tools.mV(f,1);c.app.oW("requestShowFolderFiles",{folder:f},function(a,b){if(b.widget)b.widget.on("afterShowFolderFiles",function(a){if(a.data.folder==f){a.aF();c.oW("requestRepaintFolder",{folder:f})}})})}this.oW("successSelectFolder");this.oW("afterSelectFolder");return f}this.oW("successSelectFolder");this.oW("afterSelectFolder");return undefined}catch(h){this.oW("failedSelectFolder");this.oW("afterSelectFolder");throw a.ba(h)}})}else if(b.name=="requestSelectFolderRefresh")this.oW("beforeSelectFolderRefresh",function j(b){var c=this;if(b)return undefined;try{if(c.app.aV){var d=c.app.aV.aNode();if(d)c.tools.hk().select(d);else{c.tools.hk().mc();c.oW("failedSelectFolderRefresh")}}else c.oW("successSelectFolderRefresh");c.oW("afterSelectFolderRefresh");return f}catch(e){c.oW("failedSelectFolderRefresh");c.oW("afterSelectFolderRefresh");throw a.ba(e)}})});b.dT.push(function(a,b){b.on("afterExpandFolder",function(){b.oW("requestSelectFolderRefresh")},null,null,999);b.on("successRemoveFolder",function(){b.oW("requestSelectFolderRefresh")});b.on("successLoadingFolder",function(a){if(a.data.step==1)b.oW("requestSelectFolderRefresh")})});b.bh("ExpandFolder",["click","requestExpandFolder"],function x(b){var c=this,d=b.name=="click",e=d&&b.data.bK();if(this.tools.kg(b))return;if(d&&!e.hasClass("expander"))return;var f=this.tools.cq(b),g=i.extend({collapse:0},b.data,{folder:f,hE:d},true);this.oW("beforeExpandFolder",g,function h(b,d){if(b)return undefined;try{var e=d.folder,f=e.liNode(),g=e.expanderNode();if(!e.acl.folderView){c.app.msgDialog("",c.app.lang.Errors["104"]);throw"[CKFINDER] No permissions to view folder."}if(e.hasChildren){var h=d.hE&&f.hasClass("openable"),i=!d.hE&&!d.collapse&&!f.hasClass("closable"),j=!d.hE&&!d.collapse&&f.hasClass("closable"),k=!d.collapse&&d.pP;if(h||i||k){f.removeClass("openable");f.addClass("closable");g.setAttribute("aria-expanded","true");e.getChildren(function(a){if(a){c.oW("requestAddFolder",{folders:a,root:e});e.isOpened=true}else{c.oW("requestRepaintFolder",{folder:e});e.isOpened=false}d.step=2;c.oW("successExpandFolder",d);c.oW("afterExpandFolder",d)});d.step=1;c.oW("successExpandFolder",d)}else if(d.hE||!d.hE&&d.collapse){f.removeClass("closable");f.addClass("openable");g.setAttribute("aria-expanded","false");e.childrenRootNode().setHtml("");e.isOpened=false;if(e.hm)e.getChildren(function(a){e.mapLoadedDescendants(function(a){a.releaseDomNodes()});c.oW("successExpandFolder",d);c.oW("afterExpandFolder",d)});else{this.oW("requestRepaintFolder",{folder:e});this.oW("failedExpandFolder");this.oW("afterExpandFolder")}}else if(j){c.oW("successExpandFolder",d);c.oW("afterExpandFolder",d)}}else{this.oW("failedExpandFolder");this.oW("afterExpandFolder")}return e}catch(l){this.oW("failedExpandFolder");this.oW("afterExpandFolder");throw a.ba(l)}})});b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){if(a.data&&a.data.name=="CreateFolder")b.oW("requestExpandFolder",{folder:a.data.ip,pP:1})})});b.tools.jL=function y(a,b,c){var d=this.widget,e=this.widget.app.getResourceType(a).getRootFolder(),f=e,g=b=="/"?[]:b.split("/").slice(1);if(g[g.length-1]==="")g=g.slice(0,-1);if(g.length===0){c(e);return}d.on("successExpandFolder",function(a){if(a.data.step!=2)return;var b=a.data.folder;if(b!=f)return;var e=g.shift();for(var h=0;h<b.childFolders.length;h++){var i=b.childFolders[h];if(i.name==e)if(g.length===0){a.aF();c(i);return}else{f=i;d.oW("requestExpandFolder",{folder:i})}}});d.oW("requestExpandFolder",{folder:e})};b.tools.cq=function(b){var c=this;var d,e=0;if(b.data&&b.data.folder instanceof k){b=b.data.folder;e=1}else if(b.data&&b.data.bK){b=b.data.bK();e=1}else if(b instanceof h.bi)e=1;if(e){var f=b;while(f&&!f.is("li")){if(f==c.widget.eh)break;f=f.getParent()}if(f&&f.is("li")){var g=f.dS();if(g)d=c.widget.app.folders[g.slice(1)]}}else if(typeof b=="number")d=c.widget.app.folders[b];else if(typeof b=="string")d=c.widget.app.folders[f.dS().slice(1)];else if(b.data&&b.data.folder instanceof a.aL.Folder)d=b.data.folder;else if(b.data&&b.data.folders&&b.data.folders.length&&b.data.folders[0]instanceof a.aL.Folder)d=b.data.folders[0];else if(b instanceof a.aL.Folder)d=b;return d};b.tools.mV=function(a,b){var c=a.type,d=a.getPath(),e=this.widget.app.id;b=b===undefined?a.isOpened:!!b+1-1;i.setCookie(e?"CKFinder_Path_"+e:"CKFinder_Path",encodeURIComponent(c+":"+d+":"+b))};c.prototype={select:function(a){var b=g&&(f.ie6Compat||f.version<8)&&!f.ie8?this.ie6FixParentNode().$.offsetTop:0;this.bi.setStyles({height:a.$.offsetHeight+"px",top:a.$.offsetTop-b+"px",display:"block"})},mc:function(a){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){var a=this;if(!a.kv)a.kv=a.widget.app.document.getById("folders_view").aC(1);return a.kv}};b.tools.hk=function(){var a=this.widget.oE();if(!a.la)a.la=new c(this.widget);return a.la};b.tools.kI=function(){var a=this;if(!a.kW)a.kW=n(l(a.widget.bn().aC(1).$.childNodes,"ul"));return a.kW};b.tools.cT=function(a){var b=this;if(a){if(b.ew)b.ew.blur();else b.widget.bn().setAttribute("tabindex",-1);b.ew=a;a.focus()}else{delete b.ew;b.widget.bn().setAttribute("tabindex",0)}}}m.add("foldertree",{bM:["folder"],onLoad:function o(){b();c()},bz:function p(b){var c=this;b.on("themeSpace",function d(a){if(a.data.space=="sidebar")a.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+b.lang.FoldersTitle+"</h2>"+"<div class='folder_tree_wrapper wrapper'>"+"<div class='selection'></div>"+"<ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'>"+"</ul>"+"</div>"+"</div>"});b.on("uiReady",function e(d){var e=b.document.getById("folders_view");e.hX();var f=a.aG.bz(b,"foldertree",c,e);if(b.bj){b.bj.lX(e);b.bj.kh(function g(c,d){if(c.dS()=="folders_view")return undefined;b.oW("requestSelectFolder",{folder:null});b.oW("requestSelectFolder",{folder:c});var e=b.aV;if(e){var g=e.acl,h=e.isRoot,i={kl:g.folderCreate?a.aS:a.aY,lI:!h&&g.folderRename?a.aS:a.aY,removeFolder:!h&&g.folderDelete?a.aS:a.aY};f.oW("beforeContextMenu",{bj:i,folder:e});return i}},e)}})}});})();(function(){function v(a){return a?new k(a):null}function u(a,b,c){return t(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!(c--))return a})}function t(a,b){for(var c in a){if(b(a[c])!==undefined)return a[c]}return undefined}function s(a,b){if(!a)return undefined;var c="";for(var d=0;d<a.length;d++)c+=b(a[d]);return c}function r(){i.extend(a.aL.Folder.prototype,{getFiles:function(b){var c=this,d=this.app;d.connector.sendCommand("GetFiles",{},function(e){var f=[],g=e.selectNodes("Connector/Files/File");for(var h=0;h<g.length;h++){var i=g[h].attributes.getNamedItem("date").value;f.push(new a.aL.File(g[h].attributes.getNamedItem("name").value,parseInt(g[h].attributes.getNamedItem("size").value,10),g[h].attributes.getNamedItem("thumb")?g[h].attributes.getNamedItem("thumb").value:false,i,d.lB(i.substr(6,2),i.substr(4,2),i.substr(0,4),i.substr(8,2),i.substr(10,2)),c))}if(b)b.call(c,f)},c.type,c)},showFiles:function(){this.app.oW("requestShowFolderFiles",{folder:this})}})}function q(b,d){if(!b||b.length===0)throw new a.dU("name_empty",d.lang.ErrorMsg.pg);if(c.iz.test(b))throw new a.dU("name_invalid_chars",d.lang.ErrorMsg.oP);return true}function p(){function m(){var a=this;var b=i.getCookie("CKFinder_Settings");if(!b||b.length!=5){if(a.app.config.defaultViewType)a.data().dA=a.app.config.defaultViewType;if(a.app.config.defaultSortBy)a.data().cN=a.app.config.defaultSortBy;if(a.app.config.defaultDisplayFilename!==undefined)a.data().display.filename=a.app.config.defaultDisplayFilename;if(a.app.config.defaultDisplayDate!==undefined)a.data().display.date=a.app.config.defaultDisplayDate;if(a.app.config.defaultDisplayFilesize!==undefined)a.data().display.filesize=a.app.config.defaultDisplayFilesize;return}a.data().dA=b.substr(0,1)=="L"?"list":"thumbnails";a._.nV=true;var c=b.substr(1,1);switch(c){case"D":a.data().cN="date";break;case"S":a.data().cN="size";break;default:a.data().cN="filename";break}a.data().display.filename=b.substr(2,1)=="N";a.data().display.date=b.substr(3,1)=="D";a.data().display.filesize=b.substr(4,1)=="S"}var c=a.aG.hi("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1},cN:"filename",files:[],hA:null,pq:0}),d="Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license.",j="This is the DEMO version of CKFinder. "+d,l="Product license has expired. "+d;c.qX=function(){return j};c.dT.push(m);c.dT.push(function(){var a=this.bn();if(g){a.$.onfocusin=function(){a.addClass("focus_inside")};a.$.onfocusout=function(){a.removeClass("focus_inside")}}else{a.$.addEventListener("focus",function(){a.addClass("focus_inside")},true);a.$.addEventListener("blur",function(){a.removeClass("focus_inside")},true)}});c.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function p(b){var c=this,d=this.tools.bZ(b);if(!d)return;var e=c.data();if(b.name=="click"){if(!e._lastClickedFile)e._lastClickedFile=[null,null];e._lastClickedFile[1]=e._lastClickedFile[0];e._lastClickedFile[0]=d.name;return}if(b.name=="dblclick"&&e._lastClickedFile[1]!=d.name)return;var f=i.extend({},b.data,{file:d,jw:b.name=="requestSelectThumbnailAction"},true);c.oW("beforeSelectAction",f,function g(b,e){if(b)return;try{var f,g=true,h=d.getUrl(),i=d.getThumbnailUrl();if(e.jw){f=c.app.config.selectThumbnailActionFunction;if(!f&&c.app.config.thumbsDirectAccess)f=c.app.config.selectActionFunction}else f=c.app.config.selectActionFunction;if(f){var j=e.jw?i:h,k={fileUrl:h,fileSize:d.size,fileDate:d.date};if(e.jw){k.thumbnailUrl=i;if(c.app.config.selectThumbnailActionFunction)k.selectThumbnailActionData=c.app.config.selectThumbnailActionData;else k.selectActionData=c.app.config.selectActionData}else k.selectActionData=c.app.config.selectActionData;var l;switch(c.app.config.selectActionType){case"fckeditor":l=f(j);break;case"ckeditor":l=f(j,k);break;case"js":l=f.call(c.app.cg,j,k);break}g=l!==false}var m=c.app.document.getWindow();if(g&&m.$.top==m.$.parent&&m.$.top.opener){var n=m.$.top.opener;m.$.top.close();if(n)n.focus()}c.oW("successSelectAction",e);c.oW("afterSelectAction",e)}catch(o){o=a.ba(o);c.oW("failedSelectAction",e);c.oW("afterSelectAction",e);throw o}})});c.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function q(b){var c=this,d=0;if(b.data&&b.data.bK){var e=b.data.bK();d=e.$==c.bn().$}var f=this.tools.bZ(b);if(!f&&!d)return;var g=i.extend({},b.data,{file:f},true);this.oW("beforeKeyboardNavigation",g,function h(e,g){var h=this;if(e)return;try{var i,j,k=b.data.db();if(d&&k>=37&&k<=40){var l,m=c.data().files;for(var n=0;n<m.length;n++){j=m[n];if(!j.isDeleted){l=j;break}}if(l)h.tools.cR(l)}else if(c.data().dA=="list"){if(k==38){i=f.rowNode();if(i.gE())h.tools.cR(h.tools.bZ(i.cf()))}else if(k==40){i=f.rowNode();if(i.ge())h.tools.cR(h.tools.bZ(i.dG()))}}else if(k==38){i=f.rowNode();if(i.gE()){j=i.cf();while(j&&j.$.offsetLeft!=i.$.offsetLeft)j=j.cf();if(j)h.tools.cR(h.tools.bZ(j))}}else if(k==39){i=f.rowNode();if(i.ge())h.tools.cR(h.tools.bZ(i.dG()))}else if(k==40){i=f.rowNode();if(i.ge()){j=i.dG();while(j&&j.$.offsetLeft!=i.$.offsetLeft)j=j.dG();if(j)h.tools.cR(h.tools.bZ(j))}}else if(k==37){i=f.rowNode();if(i.gE())h.tools.cR(h.tools.bZ(i.cf()))}h.oW("successKeyboardNavigation",g);h.oW("afterKeyboardNavigation",g)}catch(o){o=a.ba(o);h.oW("failedKeyboardNavigation",g);h.oW("afterKeyboardNavigation",g);throw o}})});c.bh("ProcessingFile",["requestProcessingFile"],function r(b){var c=this.tools.bZ(b),d=i.extend({},b.data,{file:c},true);this.oW("beforeProcessingFile",d,function e(b,c){if(b)return;try{var d=c.file;if(!d)this.oW("failedProcessingFile",c);else{var e=d.rowNode();if(e)e.addClass("processing");this.on("afterProcessingFile",function(a){if(a.data.file!=d)return;c.step=2;this.oW("successProcessingFile",c);this.oW("afterProcessingFile",c);a.aF()});c.step=1;this.oW("successProcessingFile",c)}}catch(f){this.oW("failedProcessingFile",c);this.oW("afterProcessingFile",c);throw a.ba(f)}})});c.bh("RepaintFile",["requestRepaintFile"],function t(b){var c=this.tools.bZ(b),d=i.extend({},b.data,{file:c},true);this.oW("beforeRepaintFile",d,function e(b,c){var d=this;if(b)return;try{var e=c.file;if(!e)d.oW("failedRepaintFile",c);else{var f=e.filenameNode();if(f&&f.getHtml()!=i.htmlEncode(e.name))f.setHtml(i.htmlEncode(e.name));var g=e.rowNode();if(g)g.removeClass("processing");d.oW("successRepaintFile",c)}d.oW("afterRepaintFile",c)}catch(h){d.oW("failedRepaintFile",c);d.oW("afterRepaintFile",c);throw a.ba(h)}})});if(g&&f.ie6Compat&&!f.ie7Compat&&!f.ie8)c.bh("HoverFile",["mouseover","mouseout"],function x(b){if(this.data().dA!="list")return;var c=this.tools.bZ(b);if(!c)return;var d=i.extend({},b.data,{bi:c.rowNode()},true);this.oW("beforeHoverFile",d,function e(c,d){var e=this;if(c)return;try{if(b.name=="mouseover"){if(e.data().ho)e.data().ho.removeClass("hover");d.bi.addClass("hover");e.data().ho=d.bi}else{e.data().ho.removeClass("hover");delete e.data().ho}e.oW("successHoverFile",d);e.oW("afterHoverFile",d)}catch(f){e.oW("failedHoverFile",d);e.oW("afterHoverFile",d);throw a.ba(f)}})});c.bh("RenderFiles",["requestRenderFiles"],function y(c){var d=this.data(),e,f=c.data&&(!!c.data.ma||!!c.data.lK),g=c.data&&c.data.ma,h;if(!j)return;if(c.data&&c.data.files){this.tools.kR();for(h=0;h<c.data.files.length;h++)d.files[h]=c.data.files[h];e=d.files;f=1;this.data().folder=c.data.folder}var k=this.data().folder;if(g&&g!=k)return;if(f||!d.cP||d.pq)d.cP={};m.call(this);var l=k.type;if(!this._.nV){if(this.app.config["defaultViewType_"+l])d.dA=this.app.config["defaultViewType_"+l];if(this.app.config["defaultSortBy_"+l])d.cN=this.app.config["defaultSortBy_"+l];if(this.app.config["defaultDisplayFilename_"+l]!==undefined)d.display.filename=this.app.config["defaultDisplayFilename_"+l];if(this.app.config["defaultDisplayDate_"+l]!==undefined)d.display.date=this.app.config["defaultDisplayDate_"+l];if(this.app.config["defaultDisplayFilesize_"+l]!==undefined)d.display.filesize=this.app.config["defaultDisplayFilesize_"+l]}if(!d.files.length)e=d.files;else if(d.cN=="date"&&d.cP.date)e=d.cP.date;else if(d.cN=="size"&&d.cP.size)e=d.cP.size;else if(d.cN=="filename"&&d.cP.filename)e=d.cP.filename;else{a.log("[FILES VIEW] Sorting files");var n=d.files;e=[];for(h=0;h<n.length;h++){if(!n[h].isDeleted){var o=e.length;n[h].index=o;e[o]=n[h]}}d.files.length=0;for(h=0;h<e.length;h++)d.files[h]=e[h];e=[];for(h=0;h<d.files.length;h++){e[h]=d.files[h];e[h].releaseDomNodes()}if(d.cN=="date"){e.sort(function(a,b){return a.date>b.date?-1:a.date<b.date?1:0});d.cP.date=e}else if(d.cN=="size"){e.sort(function(a,b){return a.size>b.size?-1:a.size<b.size?1:0});d.cP.size=e}else{e.sort(function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return c<d?-1:c>d?1:0});d.cP.filename=e}}var p=i.extend({eu:1,dA:this.data().dA,display:this.data().display},c.data,{files:e},true);this.oW("beforeRenderFiles",p,function q(c,e){if(c||j.charAt(2<<2)!="t")return;b=a.bF.substr(7,1);try{if(d.hA&&d.hA!=e.dA)for(var f=0;f<e.files.length;f++)e.files[f].releaseDomNodes();this.tools.cR();this.oW("requestAddFiles",e,function(a){if(!a)d.hA=e.dA});this.oW("successRenderFiles",e);this.oW("afterRenderFiles",e)}catch(g){this.oW("failedRenderFiles",e);this.oW("afterRenderFiles",e);throw a.ba(g)}})});c.dT.push(function(a,b){b=this;a.on("afterCommandExecDefered",function(a){if(!a.data)return;var c=a.data.name,d;if(c=="RenameFile"){var e=a.data.file;d=e&&e.folder;if(b.tools.currentFolder()!=d)return;b.oW("requestRenderFiles",{folder:d,lK:1},function(c){if(c)return;b.oW("requestSelectFile",{file:a.data.file},function(){if(c)return;e.focus()})})}else if(c=="RemoveFile"){d=a.data.folder;if(b.tools.currentFolder()!=d)return;b.tools.cR();b.bn().focus();b.oW("requestRenderFiles",{folder:d,lK:1})}})});c.bh("SelectFile",["click","requestSelectFile"],function z(b){var c=this.tools.bZ(b),d=b.name=="click";if(!(j.length>>4))return;if(d&&b.data.db()>a.bP)b.data.preventDefault();var e=i.extend({},b.data,{file:c},true);this.oW("beforeSelectFile",e,function f(b,c){var e=this;if(b)return;var f=c.file;try{if(e.tools.dH()){var g=e.tools.dH().rowNode();if(g)g.removeClass("selected")}if(f){f.rowNode().addClass("selected");e.data().cG=f;if(d)e.tools.cR(f)}else if(e.tools.dH()){e.data().cG=null;e.tools.cR()}e.oW("successSelectFile",c);e.oW("afterSelectFile",c)}catch(h){e.oW("failedSelectFile",c);e.oW("afterSelectFile",c);throw a.ba(h)}})});c.bh("AddFiles",["requestAddFiles"],function B(c){var d=i.extend({eu:0,view:"thumbnails",fa:null},c.data,{files:c.data.file?[c.data.file]:c.data.files},true);this.oW("beforeAddFiles",d,function f(c,d){var f=this;if(c)return;try{var h=f.bn(),k=f.data().hA;h.removeClass("files_message");var m=0;if(o()){if(d.files.length)d.fa=j;m=1}var n,p;if(d.dA=="list"){if(!f.data().kQ)f.data().kQ=i.bind(f.tools.qc,f.tools);h.removeClass("files_thumbnails");h.addClass("files_details");n=s(d.files,f.data().kQ);p=f.tools.fF();var q=f.tools.kj();if(k&&k!="list")f.tools.lP().setHtml("");if(g){if(q&&k&&k=="list"&&!d.eu)n=q.getHtml()+n;if(p)p.remove();if(n){var r=e[0]+f.tools.lz()+e[1]+n+e[2]+e[3];h.appendHtml(r)}f.tools.releaseDomNodes(["detailsContentNode","detailsRootNode"])}else if(n){if(d.eu)f.tools.fF().setHtml(f.tools.lz()+e[1]+n+e[2]);else q.appendHtml(n)}else p.setHtml("")}else{if(!f.tools.kY)f.tools.kY=i.bind(f.tools.pJ,f.tools);h.removeClass("files_details");h.addClass("files_thumbnails");n=s(d.files,f.tools.kY);p=f.tools.lP();if(k&&k=="list"){var t=f.tools.fF();if(t&&g)t.remove();else if(t)t.setHtml("")}if(d.eu)p.setHtml(n);else p.appendHtml(n)}if(!m&&(!b||a.bs.indexOf(b)%8<3)){d.fa=l;m=1}if((d.eu&&!n||m)&&d.fa){h.addClass("files_message");f.tools.of().setHtml(d.fa)}if(!b&&!m)p.setHtml("");f.oW("successAddFiles");f.oW("afterAddFiles")}catch(u){f.oW("failedAddFiles");f.oW("afterAddFiles");throw a.ba(u)}})});c.bh("ShowFolderFiles",["requestShowFolderFiles"],function E(b){var c=this,d=a.aG.bX["foldertree.foldertree"].tools.cq(b),e=i.extend({},b.data,{folder:d},true);this.oW("beforeShowFolderFiles",e,function f(d,e){if(d)return;if(this.tools.dH())this.oW("requestSelectFile");this.app.cS("refresh").bR(a.aY);try{var f=e.folder,g;if(!f.acl.folderView){c.app.msgDialog("",c.app.lang.Errors[103]);throw"[CKFINDER] No permissions to view folder."}b.data.widget=this;this.data().folder=f;c.tools.kR();this.oW("requestRenderFiles",{eu:1,fa:c.app.lang.FilesLoading});this.app.connector.sendCommand("GetFiles",g,function(b){c.app.cS("refresh").bR(a.aS);if(c.app.aV!=f){c.oW("failedShowFolderFiles",e);c.oW("afterShowFolderFiles",e);return}if(b.checkError()||o.toString().length<200)return;c.tools.kR();var d,g=b.selectNodes("Connector/Files/File");for(var h=0;h<g.length;h++){var i=g[h].attributes.getNamedItem("date").value,j=g[h].attributes.getNamedItem("name").value,k=c.tools.rg(new a.aL.File(j,parseInt(g[h].attributes.getNamedItem("size").value,10),g[h].attributes.getNamedItem("thumb")?g[h].attributes.getNamedItem("thumb").value:false,i,c.app.lB(i.substr(6,2),i.substr(4,2),i.substr(0,4),i.substr(8,2),i.substr(10,2)),f));if(e.mw&&j==e.mw)d=k}c.oW("requestRenderFiles",{fa:c.app.lang.FilesEmpty});if(d){c.app.oW("requestSelectFile",{file:d,scrollTo:1});setTimeout(function(){d.aNode().$.scrollIntoView(1)},100)}c.oW("successShowFolderFiles",e);c.oW("afterShowFolderFiles",e);n(c)},f.type,f)}catch(h){this.oW("failedShowFolderFiles",e);this.oW("afterShowFolderFiles",e);throw a.ba(h)}})});c.tools.bZ=function(b){var c=this;var d,e=0;if(b.data&&b.data.file instanceof k){b=b.data.file;e=1}else if(b.data&&b.data.bK){b=b.data.bK();e=1}else if(b instanceof h.bi)e=1;if(e){var f=b;while(f&&(!f.is("a")||!f.hasAttribute("id"))&&!f.is("tr")){if(f==c.widget.eh)break;f=f.getParent()}if(f){var g=f.dS();if(g&&(f.is("a")||f.is("tr")))d=c.widget.data().files[f.dS().slice(1)]}}else if(typeof b=="number")d=c.widget.data().files[b];else if(typeof b=="String")d=c.widget.data().files[f.dS().slice(1)];else if(b.data&&b.data.file&&b.data.file instanceof a.aL.File)d=b.data.file;else if(b.data&&b.data.files&&b.data.files.length&&b.data.files[0]&&b.data.files[0]instanceof a.aL.File)d=b.data.files[0];else if(b instanceof a.aL.File)d=b;return d};c.tools.kR=function(){var a=this.widget.data();a.files.length=0;a.cP={}};c.tools.oR=function(a){var b=a.thumb,c=a.name,d=this.widget.app,e=c.match(d.rQ.jf);if(e&&(e=e[0])&&d.rQ.jh.test(e))return d.fh+"images/icons/16/"+e.toLowerCase()+".gif";return d.fh+"images/icons/16/default.icon.gif"};c.tools.rg=function(a){var b=this.widget.data().files,c=b.push(a);a.index=--c;a.app=this.widget.app;return a};c.tools.lP=function(a){var b=this;if(!b.jl)b.jl=b.widget.bn().aC(1);return b.jl};c.tools.kj=function(a){var b=this;if(b.iJ===undefined){var c=b.fF();b.iJ=c?v(u(c.$.childNodes,"tbody")):null}return b.iJ};c.tools.sn=function(a){var b=this;if(b.kT===undefined){var c=b.fF();b.kT=c?v(u(c.$.childNodes,"thead")):null}return b.kT};c.tools.fF=function(a){var b=this;if(b.iO===undefined)b.iO=v(u(b.widget.bn().$.childNodes,"table"));return b.iO};c.tools.of=function(a){var b=this;if(!b.iF)b.iF=b.widget.bn().aC(0);return b.iF};c.tools.releaseDomNodes=function(a){var b=this;b.jl=undefined;b.iO=undefined;b.iJ=undefined;b.iF=undefined};c.tools.pJ=function(a){var b=a.getThumbnailUrl(true),c="r"+a.index,d=this.widget.data().display;return'<a id="'+c+'" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" '+'aria-labelledby="'+c+'_label" aria-describedby="'+c+'_details">'+'<div class="image"><div role="img" style="background-image: url(\''+b+"');\"></div></div>"+(d.filename?'<h5 id="'+c+'_label">'+i.htmlEncode(a.name)+"</h5>":"")+'<span id="'+c+'_details" class="details" role="list presentation">'+(d.date?'<span role="listitem" class="extra">'+a.dateF+"</span>":"")+(d.filesize?'<span role="listitem" aria-label="Size">'+a.size+" KB</span>":"")+"</span>"+"</a>"};c.tools.lz=function(){var a=this;var b=a.widget.data().display,c=[];c.push('<td class="name">'+a.widget.app.lang.SetDisplayName+"</td>");if(b.filesize)c.push("<td>"+a.widget.app.lang.SetDisplaySize+"</td>");if(b.date)c.push("<td>"+a.widget.app.lang.SetDisplayDate+"</td>");var d=c.length-1;if(d)c[d]='<td class="last">'+c[d].substr(4);else c[d]='<td class="last '+c[d].substr(11);return"<thead><tr><td> </td>"+c.join("")+"</tr>"+"</thead>"};c.tools.qc=function(a){var b=this.oR(a),c="r"+a.index,d=this.widget.data().display,e=[];e.push('<td class="name"><a tabindex="-1">'+(d.filename?i.htmlEncode(a.name):"")+"</a>"+"</td>");if(d.filesize)e.push("<td>"+a.size+" KB"+"</td>");if(d.date)e.push("<td>"+a.dateF+"</td>");var f=e.length-1;if(f)e[f]='<td class="last">'+e[f].substr(4);else e[f]='<td class="last '+e[f].substr(11);return'<tr id="'+c+'">'+'<td class="image">'+'<img src="'+b+'" alt="img alt" />'+"</td>"+e.join("")+"</tr>"};c.tools.dH=function(){var a=this.widget.data();if(a.cG)if(!a.cG.isDeleted)return a.cG;else return a.cG=null};c.tools.currentFolder=function(){return this.widget.data().folder};c.tools.cR=function(a){var b=this;if(a){if(b.iS)b.iS.blur();else b.widget.bn().setAttribute("tabindex",-1);b.iS=a;a.focus()}else{delete b.iS;b.widget.bn().setAttribute("tabindex",0)}}}function o(){return 1==a.bs.indexOf(a.bF.substr(1,1))%5&&window.top[a.hf+"cation"][a.hg+"st"].toLowerCase().replace(a.jG,"")!=a.ed.replace(a.jG,"")||a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1)}function n(b){var c=[a.bF.substr(6,1),a.bF.substr(8,1)];if(!!a.ed&&c[0]!=d(a.ed.length+a.bs.indexOf(c[1])))l(b)}function l(a){var b=j.reverse().join(""),c=a.tools.of(),d=c["se"+"tHtml"];d.call(c,a.qX());a.bn().addClass("files_"+j[0])}function d(b){return a.bs.substr(b*9%(2<<4),1)}var b,c={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/};var e=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","</tbody>","</table>"],j=["Node","message"];m.add("filesview",{bM:["foldertree"],onLoad:function w(){r();p()},bz:function x(b){var d=this;b.rQ.jh=new RegExp("^("+b.config.fileIcons+")$","i");b.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i;b.rQ.jf=c.fX;b.on("themeSpace",function f(a){if(a.data.space=="mainMiddle"){var b="";if(!g)b=e[0]+e[3];a.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>"+b+"</div>"}});b.on("uiReady",function h(c){var e=b.document.getById("files_view");e.hX();var f=a.aG.bz(b,"filesview",d,e);b.bD("ViewFile",{exec:function(a){var b=f.data().cG;if(b){var c=window.screen.width*.8,d=window.screen.height*.7,e="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes";e+=",width="+c;e+=",height="+d;e+=",left="+(window.screen.width-c)/2;e+=",top="+(window.screen.height-d)/2;if(!window.open(b.folder.getUrl()+b.name,null,e))a.msgDialog("",a.lang.oo)}}});b.bD("DownloadFile",{exec:function(a){var b=f.data().cG;if(b){var c=a.cg.inPopup?a.document.getWindow().$.parent:window;if(a.config.directDownload)c.location=b.folder.getUrl()+b.name+"?download";else c.location=a.connector.composeUrl("DownloadFile",{FileName:b.name},b.folder.type,b.folder)}}});b.bD("RenameFile",{exec:function(b){var c=function(c,e){try{d.rename(e)}catch(f){if(f instanceof a.dU)b.msgDialog("",f.message);else throw f}},d=f.data().cG;if(d)b.hs(b.lang.RenameDlgTitle,b.lang.FileRename,d.name,function(a){a=i.trim(a);if(a){var e=a.match(b.rQ.jf)[0];if(e.toLowerCase()!=d.ext.toLowerCase())b.fe("",b.lang.FileRenameExt,function(){c(d,a)});else c(d,a)}})}});b.bD("DeleteFile",{exec:function(a){var b=f.data().cG;if(b)a.fe("",a.lang.FileDelete.replace("%1",b.name),function(){b.remove()})}});if(b.eU){b.dZ("file0",99);b.dZ("file1",100);b.dZ("file2",101);b.dZ("file3",102);b.eU({selectFile:{label:b.lang.Select,onClick:function(){var a=b.aG["filesview.filesview"][0],c=a.tools.dH();if(c)a.oW("requestSelectAction",{file:c})},group:"file0"},nA:{label:b.lang.SelectThumbnail,onClick:function(){var a=b.aG["filesview.filesview"][0],c=a.tools.dH();if(c)a.oW("requestSelectThumbnailAction",{file:c})},group:"file0"},viewFile:{label:b.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:b.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:b.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:b.lang.Delete,command:"DeleteFile",group:"file3"}})}if(b.bj){b.bj.lX(e);b.bj.kh(function g(c,d){var e=f.tools.bZ(c);if(e){b.oW("requestSelectFile",{file:e});var g=e.folder.acl,h={viewFile:g.fileView?a.aS:a.aY,downloadFile:g.fileView?a.aS:a.aY,renameFile:g.fileRename?a.aS:a.aY,deleteFile:g.fileDelete?a.aS:a.aY};if(b.config.selectActionFunction)h.selectFile=g.fileView?a.aS:a.aY;if(e.isImage()&&!b.config.disableThumbnailSelection&&(b.config.selectThumbnailActionFunction||b.config.thumbsDirectAccess&&b.config.selectActionFunction))h.nA=g.fileView?a.aS:a.aY;f.oW("beforeContextMenu",{bj:h,file:e,folder:f.data().folder});return h}},e)}})}});a.aL.File=function(a,b,d,e,f,g){var h=this;h.index=null;h.app=null;h.name=a;h.ext=a.match(c.fX)[0];h.nameL=a.toLowerCase();h.size=b;h.thumb=d;h.date=e;h.dateF=f;h.folder=g;h.isDeleted=false};a.aL.File.prototype={rename:function(a){q(a,this.app);var b=this;if(b.name==a){b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b});return}b.app.oW("requestProcessingFile",{file:b});b.app.connector.sendCommandPost("RenameFile",{fileName:b.name,newFileName:a},null,function(a){if(a.checkError()){b.app.oW("requestRepaintFile",{file:b});return}b.name=a.selectSingleNode("Connector/RenamedFile/@newName").value;b.nameL=b.name.toLowerCase();b.ext=b.name.match(c.fX)[0];b.thumb=0;b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b})},b.folder.type,b.folder)},remove:function(){var a=this,b=a.folder,c=a.app;c.oW("requestProcessingFile",{file:a});c.connector.sendCommandPost("DeleteFile",{FileName:a.name},null,function(d){if(d.checkError())return;a.isDeleted=true;a.releaseDomNodes();c.oW("afterCommandExecDefered",{name:"RemoveFile",folder:b,index:a.index})},b.type,b)},select:function(){this.app.oW("requestSelectFile",{file:this})},deselect:function(){this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(a){return this.name==a.name&&this.folder.getPath()==a.folder.getPath()&&this.folder.type==a.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){var a=this;if(!a.je)a.je=a.app.document.getById("r"+a.index);return a.je},getThumbnailUrl:function(a){var b=this;var c=b.thumb,d=b.name,e=b.app,f=d.match(e.rQ.jf);if(f&&(f=f[0])){if(e.config.thumbsEnabled&&e.rQ.rO.test(f)){if(c&&e.config.thumbsDirectAccess)return e.config.thumbsUrl+b.folder.type+b.folder.getPath()+encodeURIComponent(d)+(!a?"":"?hash="+e.getResourceType(b.folder.type).hash);return e.connector.composeUrl("Thumbnail",{FileName:d},b.folder.type,b.folder)}if(e.rQ.jh.test(f))return e.fh+"images/icons/32/"+f.toLowerCase()+".gif"}return e.fh+"images/icons/32/default.icon.gif"},filenameNode:function(){var a=this;if(a.ht===undefined){var b=a.rowNode();if(b)if(b.is("a"))a.ht=v(u(b.$.childNodes,"h5"));else a.ht=v(u(a.aNode().$.childNodes,"h5"))}return a.ht},aNode:function(){var a=this;if(a.dM===undefined){var b=a.rowNode();if(b)if(b.is("a"))a.dM=b;else{var c=u(b.$.childNodes,"td",1);a.dM=v(u(c.childNodes,"a"))}}return a.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.je=undefined;this.dM=undefined;this.ht=undefined},focus:function(){this.select();var a=this.focusNode();a.setAttribute("tabindex",0);a.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}};})();(function(){function j(a,b){var c=this;var d=c._.rb.getDialog(),e=c._.rb["for"],f=c._.rb.filebrowser.onSelect;if(e)d.getContentElement(e[0],e[1]).reset();if(typeof b=="function"&&b.call(c._.rb)===false)return;if(f&&f.call(c._.rb,a,b)===false)return;if(typeof b=="string"&&b)alert(b);if(a)g(a,c._.rb)}function h(a,b,c){if(c.indexOf(";")!==-1){var d=c.split(";");for(var e=0;e<d.length;e++){if(h(a,b,d[e]))return true}return false}var f=a.vz(b).eB(c).filebrowser;return f&&f.url}function g(a,b){var c=b.getDialog(),d=b.filebrowser.target||"";if(d){var e=d.split(":"),f=c.getContentElement(e[0],e[1]);if(f){f.setValue(a);c.selectPage(e[0])}}}function f(a,c,g,h){var i,j;for(var k in h){i=h[k];if(i.type=="hbox"||i.type=="vbox")f(a,c,g,i.children);if(!i.filebrowser)continue;if(i.type=="fileButton"&&i["for"]){if(typeof i.filebrowser=="string"){var l={target:i.filebrowser};i.filebrowser=l}i.filebrowser.action="QuickUpload";url=i.filebrowser.url;if(!url){var m=i.onShow;i.onShow=function(c){var d=c.jN;if(m&&m.call(d,c)===false)return false;var e=a.getSelectedFolder();if(e)url=e.getUploadUrl();if(!url)return false;var f=i.filebrowser.params||{};f.CKFinderFuncNum=a._.ra;if(!f.langCode)f.langCode=a.langCode;url=b(url,f);var g=this.getDialog().getContentElement(i["for"][0],i["for"][1]);if(!g)return false;g._.dg.action=url;g.reset()}}else{i.filebrowser.url=url;i.hidden=false;e(a,g.vz(i["for"][0]).eB(i["for"][1]),i.filebrowser)}var n=i.onClick;i.onClick=function(a){var b=a.jN;if(n&&n.call(b,a)===false)return false;return d.call(b,a)}}}}function e(a,c,d){c.filebrowser=d;if(!d.url)return;params.CKFinderFuncNum=a._.ra;if(!params.langCode)params.langCode=a.langCode;c.action=b(d.url,params);c.filebrowser=d}function d(a){var b=this;var c=b.getDialog(),d=c.getParentApi();d._.rb=b;if(!c.getContentElement(b["for"][0],b["for"][1]).getInputElement().$.value)return false;if(!c.getContentElement(b["for"][0],b["for"][1]).vy())return false;return true}function c(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function b(a,b){var c=[];if(!b)return a;else for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(a.indexOf("?")!=-1?"&":"?")+c.join("&")}m.add("filebrowser",{bz:function(a){a.cg._.ra=i.addFunction(j,a.cg)}});a.on("dialogDefinition",function(a){var b=a.data.dg,c;for(var d in b.contents){c=b.contents[d];f(a.application.cg,a.data.name,b,c.elements);if(c.hidden&&c.filebrowser)c.hidden=!h(b,c.id,c.filebrowser)}})})();m.add("button",{eK:function(b){b.bY.kd(a.UI_BUTTON,n.button.dq)}});CKFinder._.UI_BUTTON=a.UI_BUTTON=1;n.button=function(a){i.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){if(a.command)b.execCommand(a.command);else if(a.onClick)a.onClick(b)}});this._={}};n.button.dq={create:function(a){return new n.button(a)}};n.button.prototype={canGroup:true,er:function(b,c){var d=f,e=this._.id="cke_"+i.getNextNumber();this._.app=b;var g={id:e,button:this,app:b,focus:function(){var a=b.document.getById(e);a.focus()},lc:function(){this.button.click(b)}},h=i.addFunction(g.lc,g),j=n.button._.instances.push(g)-1,k="",l=this.command;if(this.iH)b.on("mode",function(){this.bR(this.iH[b.mode]?a.aS:a.aY)},this);else if(l){l=b.cS(l);if(l){l.on("bu",function(){this.bR(l.bu)},this);k+="cke_"+(l.bu==a.eV?"on":l.bu==a.aY?"disabled":"off")}}if(!l)k+="cke_off";if(this.className)k+=" "+this.className;c.push('<span class="cke_button">','<a id="',e,'" class="',k,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+e+'_label"'+(this.vZ?' aria-haspopup="true"':""));if(d.opera||d.gecko&&d.mac)c.push(' onkeypress="return false;"');if(d.gecko)c.push(' onblur="this.style.cssText = this.style.cssText;"');c.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',j,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',j,', event);" onclick="window.parent.CKFinder._.callFunction(',h,', this); return false;">');if(this.icon!==false)c.push('<span class="cke_icon"');if(this.icon){var m=(this.rD||0)*-16;c.push(' style="background-image:url(',a.getUrl(this.icon),");background-position:0 "+m+'px;"')}if(this.icon!==false)c.push("></span>");c.push('<span id="',e,'_label" class="cke_label">',this.label,"</span>");if(this.vZ)c.push('<span class="cke_buttonarrow"></span>');c.push("</a>","</span>");if(this.onRender)this.onRender();return g},bR:function(b){var c=this;if(c._.bu==b)return false;c._.bu=b;var d=c._.app.document.getById(c._.id);if(d){d.bR(b);b==a.aY?d.setAttribute("aria-disabled",true):d.removeAttribute("aria-disabled");b==a.eV?d.setAttribute("aria-pressed",true):d.removeAttribute("aria-pressed");var e=c.title,f=c._.app.lang.common.unavailable,g=d.aC(1);if(b==a.aY)e=f.replace("%1",c.title);g.setHtml(e);return true}else return false}};n.button._={instances:[],keydown:function(a,b){var c=n.button._.instances[a];if(c.onkey){b=new h.event(b);return c.onkey(c,b.db())!==false}},focus:function(a,b){var c=n.button._.instances[a],d;if(c.onfocus)d=c.onfocus(c,new h.event(b))!==false;if(f.gecko&&f.version<10900)b.preventBubble();return d}};CKFinder._.uiButtonKeydown=n.button._.keydown;CKFinder._.uiButtonFocus=n.button._.focus;n.prototype.qW=function(b,c){this.add(b,a.UI_BUTTON,c)};(function(){m.add("container",{bM:[],bz:function(a){var b=this;a.on("themeAvailable",function(){b.pV(a)})},pV:function(b){function o(c){c&&c.aF();var d=n.getFrameDocument().$;d.open();if(l)d.domain=document.domain;b.document=new j(d);b.theme.dQ(b);d.close();(d.defaultView||d.parentWindow).CKFinder=CKFinder;a.skins.load(b,"application",function(){var a=b.dJ;if(a)a.oA(b.document)})}var c=b.config.height,d=b.config.tabIndex||b.ax.getAttribute("tabindex")||0;if(!isNaN(c)){c=Math.max(c,200);c+="px"}var e="",h=b.config.width;if(h){if(!isNaN(h))h+="px";e+="width: "+h+";"}var i=b.config.className?'class="'+b.config.className+'"':"",l=f.isCustomDomain(),m="document.open();"+(l?'document.domain="'+window.document.domain+'";':"")+"document.close();",n=k.et('<iframe style="'+e+"height:"+c+'"'+i+' frameBorder="0"'+' src="'+(g?"javascript:void(function(){"+encodeURIComponent(m)+"}())":"")+'"'+' tabIndex="'+d+'"'+' allowTransparency="true"'+(g&&f.version>=9&&b.cg.inPopup?' onload="typeof ckfinder !== "undefined" && ckfinder();"':"")+"></iframe>",b.ax.getDocument());if(g&&f.version>=9&&b.cg.inPopup)b.ax.getDocument().getWindow().$.ckfinder=function(){b.ax.getDocument().getWindow().$.ckfinder=undefined;o()};n.on("load",o);var p=b.lang.appTitle.replace("%1",b.name);if(f.gecko){n.on("load",function(a){a.aF()});b.ax.setAttributes({role:"region",title:p});n.setAttributes({role:"region",title:" "})}else if(f.webkit){n.setAttribute("title",p);n.setAttribute("name",p)}else if(g)n.appendTo(b.ax);if(!g)b.ax.append(n)}});a.application.prototype.focus=function(){this.document.getWindow().focus()}})();m.add("contextmenu",{bM:["menu"],eK:function(a){a.bj=new m.bj(a);a.bD("bj",{exec:function(){a.bj.show(a.document.bH())}})}});m.bj=i.createClass({$:function(a){this.id="cke_"+i.getNextNumber();this.app=a;this._.dF=[];this._.vx=i.addFunction(function(b){this._.panel.hide();a.focus&&a.focus()},this)},_:{onMenu:function(b,c,d,e,f,h){var j=this._.menu,k=this.app;if(j){j.hide();j.ih()}else{j=this._.menu=new a.menu(k);j.onClick=i.bind(function(a){var b=true;j.hide();if(g)j.onEscape();if(a.onClick)a.onClick();else if(a.command)k.execCommand(a.command);b=false},this);j.onEscape=function(){k.focus&&k.focus()}}var l=this._.dF,m=[];j.onHide=i.bind(function(){j.onHide=null;this.onHide&&this.onHide()},this);for(var n=0;n<l.length;n++){var o=l[n];if(o[1]&&o[1].$!=h.$)continue;var p=l[n][0](f);if(p)for(var q in p){var r=this.app.mh(q);if(r){r.bu=p[q];j.add(r)}}}if(j.items.length)j.show(b,c||(k.lang.dir=="rtl"?2:1),d,e)}},ej:{lX:function(b,c){if(f.opera&&!("oncontextmenu"in document.body)){var d;b.on("mousedown",function(e){e=e.data;if(e.$.button!=2){if(e.db()==a.bP+1)b.oW("contextmenu",e);return}if(c&&(e.$.ctrlKey||e.$.metaKey))return;var f=e.bK();if(!d){var g=f.getDocument();d=g.createElement("input");d.$.type="button";g.bH().append(d)}d.setAttribute("style","position:absolute;top:"+(e.$.clientY-2)+"px;left:"+(e.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")});b.on("mouseup",function(a){if(d){d.remove();d=undefined;b.oW("contextmenu",a.data)}})}b.on("contextmenu",function(a){var d=a.data;if(c&&(f.webkit?e:d.$.ctrlKey||d.$.metaKey))return;d.preventDefault();var g=d.bK(),h=d.bK().getDocument().gT(),j=d.$.clientX,k=d.$.clientY;i.setTimeout(function(){this._.onMenu(h,null,j,k,g,b)},0,this)},this);if(f.opera)b.on("keypress",function(a){var b=a.data;if(b.$.keyCode===0)b.preventDefault()});if(f.webkit){var e,g=function(a){e=a.data.$.ctrlKey||a.data.$.metaKey},h=function(){e=0};b.on("keydown",g);b.on("keyup",h);b.on("contextmenu",h)}},kh:function(a,b){this._.dF.push([a,b])},show:function(b,c,d,e){this.app.focus();this._.onMenu(b||a.document.gT(),c,d||0,e||0)}}});(function(){function b(a){this.jr=null;this.kP=null;this.app=a}m.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],onLoad:function c(b){a.dialog.add("dragdropFileExists",function(a){return{title:a.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:true,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:a.lang.common.makeDecision,type:"radio",id:"option","default":"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"]]}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},gr:function d(c){c.cK=new b(c);var d,e;c.on("themeSpace",function h(a){if(a.data.space=="mainBottom")a.data.html+='<div id="dragged_container" style="display: none; position: absolute;"></div>'});c.on("uiReady",function(a){c.document.on("dragstart",function(a){a.data.preventDefault(true)});c.document.on("drag",function(a){a.data.preventDefault(true)});var b,d=c.aG["filesview.filesview"];for(b=0;b<d.length;b++)d[b].gA("Draggable");var e=c.aG["foldertree.foldertree"];for(b=0;b<e.length;b++)e[b].ke("Droppable")});a.aG.bX["filesview.filesview"].bh("Draggable",["mousedown"],function j(a){var b=this,e=b.tools.bZ(a);if(!e)return;var f=g?1:0;if(a.data.$.button!=f)return;a.data.preventDefault();var h=i.extend({},{file:e,step:1},true);b.oW("beforeDraggable",h,function j(a,f){function k(a){d.setStyle("display","none");g.removeClass("dragged_source");d.setHtml("");b.app.cK.kG(null);b.app.cK.kz(null);c.document.aF("mousemove",j);if(a)a.aF();else c.document.aF("mouseup",k);var e=b.app.aG["foldertree.foldertree"];for(var h=0;h<e.length;h++)e[h].ke("Droppable");b.app.document.bH().removeClass("dragging");f.step=2;b.oW("successDraggable",f);b.oW("afterDraggable",f)}function j(a){d.setStyles({left:a.data.$.clientX+"px",top:a.data.$.clientY+"px"});if(h==0)h=a.data.$.clientY+a.data.$.clientX;if(i)return;if(Math.abs(a.data.$.clientY+a.data.$.clientX-h)<20)return;b.app.cK.kG(g);b.app.cK.kz(e);g.addClass("dragged_source");d.setStyle("display","block");d.addClass("file_entry");var c=g.getHtml();c=c.replace(/url\("(.+?)"\);?"/,'url($1);"');c=c.replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"");d.setHtml(c);i=1;b.app.document.bH().addClass("dragging");var j=b.app.aG["foldertree.foldertree"];for(var k=0;k<j.length;k++)j[k].gA("Droppable");f.step=1;b.oW("successDraggable",f)}if(a)return;e.select();var g=e.rowNode(),h=0,i=0;d=d||c.document.getById("dragged_container");d.hide();c.document.on("mousemove",j);c.document.on("mouseup",k,999);var l=c.document.bH().$;c.document.on("mouseout",function(a){if(c.cK.qp()&&a.data.bK().$==l)k()})})});a.aG.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function k(b){var d=b.data.bK(),g=this,h=b.name,j=!!g.app.cK.qp();if(!j||d.is("ul"))return;var k=g.tools.cq(d);if(!k)return;if(h=="mouseup"){g.app.cK.iW(0);var l=g.app.cK.pe(),m=i.extend({},{target:k,source:l},true);g.oW("beforeDroppable",m,function n(d,h){if(d)return;try{var j=h.target,k=h.source;if(!e){e=new a.menu(g.app);e.onClick=i.bind(function(a){var b=true;e.hide();if(a.onClick)a.onClick();else if(a.command)c.execCommand(a.command);b=false},this)}var l=new a.iD(g.app,"copyFileToFolder",{label:g.app.lang.CopyDragDrop,bu:j!=k.folder&&j.acl.fileUpload?a.aS:a.aY,onClick:function(a){g.oW("successDroppable",{hH:k,hC:j,step:2});var b={"files[0][name]":k.name,"files[0][type]":k.folder.type,"files[0][folder]":k.folder.getPath(),"files[0][options]":a||""},c=g.app.connector,d=0;c.sendCommandPost("CopyFiles",null,b,function e(a){var b=a.getErrorNumber();if(b==c.ERROR_COPY_FAILED){var e=a.selectSingleNode("Connector/Errors/Error/@code").value;if(e==g.app.connector.ERROR_ALREADYEXIST){g.app.cg.openDialog("dragdropFileExists",function(a){var b=g.app.lang.ErrorMsg.FileExists.replace("%s",k.name);a.show();a.getContentElement("tab1","msg").getElement().setHtml("<strong>"+b+"</strong>");if(f.ie7Compat){var c=a.mn();a.resize(c.width,c.height)}a.on("ok",function d(b){b.aF();l.onClick(a.getContentElement("tab1","option").getValue())})});return}else{var i=g.app.lang.Errors[b]+" "+g.app.lang.Errors[e];g.app.msgDialog("",i);d=1}}else if(a.checkError())d=1;if(d){g.oW("failedDroppable",h);g.oW("afterDroppable",h);return}var m=g.app.lang.FilesCopied.replace("%1",k.name).replace("%2",j.type).replace("%3",j.getPath());g.app.msgDialog("",m);g.oW("successDroppable",{hH:k,hC:j,step:3});g.oW("afterDroppable",h)},j.type,j)}}),m=window.top[a.hf+"cation"][a.hg+"st"],n=new a.iD(g.app,"moveFileToFolder",{label:g.app.lang.MoveDragDrop,bu:j!=k.folder&&j.acl.fileUpload&&k.folder.acl.fileDelete?a.aS:a.aY,onClick:function(c){g.oW("successDroppable",{hH:k,hC:j,step:2});if(a.bF&&1==a.bs.indexOf(a.bF.substr(1,1))%5&&m.toLowerCase().replace(a.jG,"")!=a.ed.replace(a.jG,"")||a.bF&&a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1))g.app.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://ckfinder.com'>CKFinder web site</a> to obtain a valid license.");else{var d={"files[0][name]":k.name,"files[0][type]":k.folder.type,"files[0][folder]":k.folder.getPath(),"files[0][options]":c||""},e=g.app.connector,i=0;g.app.connector.sendCommandPost("MoveFiles",null,d,function l(a){var c=a.getErrorNumber();if(c==e.ERROR_MOVE_FAILED){var d=a.selectSingleNode("Connector/Errors/Error/@code").value;if(d==g.app.connector.ERROR_ALREADYEXIST){g.app.cg.openDialog("dragdropFileExists",function(a){var c=g.app.lang.ErrorMsg.FileExists.replace("%s",k.name);a.show();a.getContentElement("tab1","msg").getElement().setHtml("<strong>"+c+"</strong>");if(f.ie7Compat){var d=a.mn();a.resize(d.width,d.height)}a.on("ok",function e(){b.aF();n.onClick(a.getContentElement("tab1","option").getValue())})});return}else{var l=g.app.lang.Errors[c]+" "+g.app.lang.Errors[d];g.app.msgDialog("",l);i=1}}else if(a.checkError())i=1;if(i){g.oW("failedDroppable",h);g.oW("afterDroppable",h);return}k.isDeleted=true;g.app.oW("requestRenderFiles",{ma:k.folder});var m=g.app.lang.FilesMoved.replace("%1",k.name).replace("%2",j.type).replace("%3",j.getPath());g.app.msgDialog("",m);g.oW("successDroppable",{hH:k,hC:j});g.oW("afterDroppable",h)},j.type,j)}}});e.ih();e.add(l);e.add(n);if(e.items.length)e.show(j.aNode(),c.lang.dir=="rtl"?2:1,0,j.aNode().$.offsetHeight);g.oW("successDroppable",{hH:k,hC:j,step:1})}catch(o){o=a.ba(o);g.oW("failedDroppable",h);g.oW("afterDroppable",h);throw o}})}else if(h=="mouseover"){if(!g.app.cK.fZ)g.app.cK.iW(k.liNode())}else if(h=="mouseout")if(g.app.cK.fZ)g.app.cK.iW(0)})}});b.prototype={iW:function(a){var b=this;var c=!!a;if(c&&!b.fZ){b.app.document.bH().addClass("drop_accepted");a.addClass("drop_target")}else if(!c&&b.fZ){b.app.document.bH().removeClass("drop_accepted");b.fZ.removeClass("drop_target")}b.fZ=c?a:null},kG:function(a){this.jr=a;if(this.jr instanceof k)this.jr.focus()},vE:function(){return this.jr},kz:function(a){this.kP=a},pe:function(){return this.kP},qp:function(){return!!this.jr}}})();m.add("floatpanel",{bM:["panel"]});(function(){function d(a,c,d,e,f){var g=c.iY()+"-"+d.iY()+"-"+a.gd+"-"+a.lang.dir+(a.fm&&"-"+a.fm||"")+(e.css&&"-"+e.css||"")+(f&&"-"+f||""),h=b[g];if(!h){h=b[g]=new n.panel(c,e,a.gd);h.ax=d.append(k.et(h.nt(a),d.getDocument()));h.ax.setStyles({display:"none",position:"absolute"})}return h}var b={},c=false;n.pY=i.createClass({$:function(a,b,c,e){c.lE=true;var f=b.getDocument(),g=d(a,f,b,c,e||0),h=g.ax,i=h.getFirst().getFirst();this.ax=h;a.ia?a.ia.push(h):a.ia=[h];this._={panel:g,parentElement:b,dg:c,document:f,iframe:i,children:[],dir:a.lang.dir}},ej:{qq:function(a,b){return this._.panel.qq(a,b)},re:function(a,b){return this._.panel.re(a,b)},iv:function(a){return this._.panel.iv(a)},gf:function(b,d,e,j,k){var l=this._.panel,m=l.gf(b);this.fj(false);c=true;var n=this.ax,o=this._.iframe,p=this._.dg,r=d.ir(n.getDocument()),s=this._.dir=="rtl",t=r.x+(j||0),u=r.y+(k||0);if(s&&(e==1||e==4))t+=d.$.offsetWidth;else if(!s&&(e==2||e==3))t+=d.$.offsetWidth-1;if(e==3||e==4)u+=d.$.offsetHeight-1;this._.panel._.nr=d.dS();n.setStyles({top:u+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""});n.getFirst().removeStyle("width");if(!this._.qa){var v=g?o:new h.window(o.$.contentWindow);a.event.jP=true;v.on("blur",function(a){var b=this;if(g&&!b.fj())return;var d=a.data.bK(),e=d.getWindow&&d.getWindow();if(e&&e.equals(v))return;if(b.visible&&!b._.gF&&!c)b.hide()},this);v.on("focus",function(){this._.lG=true;this.gU();this.fj(true)},this);a.event.jP=false;this._.qa=1}l.onEscape=i.bind(function(){this.onEscape&&this.onEscape()},this);i.setTimeout(function(){if(s)t-=n.$.offsetWidth;n.setStyles({left:t+"px",visibility:"",opacity:"1"});var a=n.getFirst();if(m.oz){function b(){var a=n.getFirst(),b=0,c=m.ax.$;if(f.gecko||f.opera)c=c.parentNode;var d=c.scrollWidth;if(g){c=c.document.body;var e=c.getElementsByTagName("a");for(var h=0;h<e.length;h++){var i=e[h].children[1],j=i.scrollWidth+i.offsetLeft-d;if(j>0&&j>b)b=j}}d+=b;if(g&&f.quirks&&d>0)d+=(a.$.offsetWidth||0)-(a.$.clientWidth||0);d+=4;a.setStyle("width",d+"px");m.ax.addClass("cke_frameLoaded");var k=m.ax.$.scrollHeight;if(g&&f.quirks&&k>0)k+=(a.$.offsetHeight||0)-(a.$.clientHeight||0);a.setStyle("height",k+"px");l._.iL.ax.setStyle("display","none").removeStyle("display")}if(l.hm)b();else l.onLoad=b}else a.removeStyle("height");var c=l.ax,d=c.getWindow(),e=d.hV(),h=d.eR(),j={height:c.$.offsetHeight,width:c.$.offsetWidth};if(s?t<0:t+j.width>h.width+e.x)t+=j.width*(s?1:-1);if(u+j.height>h.height+e.y)u-=j.height;n.setStyles({top:u+"px",left:t+"px",opacity:"1"});i.setTimeout(function(){if(p.ny)if(f.gecko){var a=o.getParent();a.setAttribute("role","region");a.setAttribute("title",p.ny);o.setAttribute("role","region");o.setAttribute("title"," ")}if(g&&f.quirks)o.focus();else o.$.contentWindow.focus();if(g&&!f.quirks)this.fj(true)},0,this)},0,this);this.visible=1;if(this.onShow)this.onShow.call(this);if(f.ie7Compat||f.ie8&&f.ie6Compat)i.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this);c=false},hide:function(){var a=this;if(a.visible&&(!a.onHide||a.onHide.call(a)!==true)){a.gU();a.ax.setStyle("display","none");a.visible=0}},fj:function(a){var b=this._.panel;if(a!=undefined)b.fj=a;return b.fj},rA:function(a,b,c,d,e,g){if(this._.gF==a&&a._.panel._.nr==c.dS())return;this.gU();a.onHide=i.bind(function(){i.setTimeout(function(){if(!this._.lG)this.hide()},0,this)},this);this._.gF=a;this._.lG=false;a.gf(b,c,d,e,g);if(f.ie7Compat||f.ie8&&f.ie6Compat)setTimeout(function(){a.ax.aC(0).$.style.cssText+=""},100)},gU:function(){var a=this._.gF;if(a){delete a.onHide;delete this._.gF;a.hide()}}}})})();(function(){function j(a){return a?new k(a):null}function h(a,b,c){return f(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!(c--))return a})}function f(a,b){for(var c in a){if(b(a[c])!==undefined)return a[c]}return undefined}function e(a){a.data.preventDefault()}function d(a,b,c,d){var e='checked="checked"',f="",g="",h="",i="",j="",k="",l="",m="";if(b=="list")f=e;else g=e;if(c.filename)h=e;if(c.date)i=e;if(c.filesize)j=e;if(d=="date")l=e;else if(d=="size")m=e;else k=e;displayFilenameDisabled=f?' disabled="true"':"";return'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+a.SetTitle+"</h2>"+'<table role="presentation">'+"<tr>"+"<td>"+'<dl role="group" aria-labelledby="files_settings_type">'+'<dt id="files_settings_type">'+a.SetView+"</dt>"+'<dd><input type="radio" name="view_type" value="thumbnails" '+g+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+a.SetViewThumb+"</label></dd>"+'<dd><input type="radio" name="view_type" value="list" '+f+' id="fs_type_details" /> <label for="fs_type_details">'+a.SetViewList+"</label></dd>"+"</dl>"+"</td>"+"<td>"+'<dl role="group" aria-labelledby="files_settings_display">'+'<dt id="files_settings_display">'+a.SetDisplay+"</dt>"+'<dd><input type="checkbox" name="display_filename" value="1" '+h+displayFilenameDisabled+' id="fs_display_filename" /> <label for="fs_display_filename">'+a.SetDisplayName+"</label></dd>"+'<dd><input type="checkbox" name="display_date" value="1" '+i+' id="fs_display_date" /> <label for="fs_display_date">'+a.SetDisplayDate+"</label></dd>"+'<dd><input type="checkbox" name="display_filesize" value="1" '+j+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+a.SetDisplaySize+"</label></dd>"+"</dl>"+"</td>"+"<td>"+'<dl role="group" aria-labelledby="files_settings_sorting">'+'<dt id="files_settings_sorting">'+a.SetSort+"</dt>"+'<dd><input type="radio" name="sortby" value="filename" '+k+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+a.SetSortName+"</label></dd>"+'<dd><input type="radio" name="sortby" value="date" '+l+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+a.SetSortDate+"</label></dd>"+'<dd><input type="radio" name="sortby" value="size" '+m+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+a.SetSortSize+"</label></dd>"+"</dl>"+"</td>"+"</tr>"+"</table>"+'<div class="buttons"><input type="submit" value="'+a.CloseBtn+'" /></div>'+"</form>"}function c(a){if(a.name=="submit"){var b=this.app.aG["formpanel.formpanel"][0],c=b.data();this.oW("requestUnloadForm");this.oW("afterFilesViewSettingsForm",c);return}var d=a.data.bK(),e=d.getAttribute("name"),f=d.getAttribute("value"),g=d.$.checked;if(d.getName()=="input")i.setTimeout(function(){var a=this.app.aG["filesview.filesview"][0],b=a.data();if(e=="sortby")b.cN=f;else if(e=="view_type"){b.dA=f;var c=this.app.document.getById("fs_display_filename");if(f=="list"){b.display.filename=true;c.$.checked=true;c.$.disabled=true}else c.$.disabled=false}else if(e=="display_filename"){if(b.dA!="list")b.display.filename=!!g}else if(e=="display_date")b.display.date=!!g;else if(e=="display_filesize")b.display.filesize=!!g;var d=(b.dA=="list"?"L":"T")+(b.cN=="size"?"S":b.cN=="date"?"D":"N")+(b.display.filename?"N":"_")+(b.display.date?"D":"_")+(b.display.filesize?"S":"_");i.setCookie("CKFinder_Settings",d,false);a.oW("requestRenderFiles",{fa:a.app.lang.FilesEmpty})},0,this)}function b(){var b=a.aG.hi("formpanel","formpanel",{dc:null});b.dT.push(function(){var a=this.bn();if(g){a.$.onfocusin=function(){a.addClass("focus_inside")};a.$.onfocusout=function(){a.removeClass("focus_inside")}}else{a.$.addEventListener("focus",function(){a.addClass("focus_inside")},true);a.$.addEventListener("blur",function(){a.removeClass("focus_inside")},true)}});b.bh("UnloadForm",["submit","requestUnloadForm"],function f(b){if(b.name=="submit"&&!this.data().gM)return;b.result=this.oW("beforeUnloadForm",function c(b,c){var d=this;if(b)return;try{d.bn().getParent().setStyle("display","none");d.app.layout.ea(true);if(d.data().dc){var e=d.app.cS(d.data().dc);if(e)e.bR(a.aS);d.data().dc=null}var f=d.tools.ij();if(f){f.mF();f.remove()}d.tools.releaseDomNodes();d.oW("successUnloadForm",c)}catch(g){d.oW("failedUnloadForm",c);d.oW("afterUnloadForm",c);throw a.ba(g)}})});b.bh("LoadForm",["requestLoadForm"],function k(b){var c=this,d=i.extend({html:null,dq:null,cC:null,cancelSubmit:1,gM:1,command:null},b.data,true);b.result=this.oW("beforeLoadForm",d,function f(b,d){if(b)return;try{var f=this.bn();f.setHtml(d.html);f.getParent().removeStyle("display");this.app.layout.ea(true);var g=this.tools.ij();if(g){if(d.dq)if(d.cC)for(var h in d.cC)g.on(d.cC[h],d.dq);else g.on("submit",d.dq);if(d.cancelSubmit)g.on("submit",e);var i=g.eG("input");for(var h=0;h<i.count();h++){if(i.getItem(h).getAttribute("name")=="cancel"){i.getItem(h).on("click",function(a){c.oW("requestUnloadForm");a.aF()});break}}if(d.cancelSubmit)g.on("submit",e)}this.data().gM=d.gM;if(d.command){var j=this.app.cS(d.command);if(j)j.bR(a.eV);this.data().dc=d.command}this.oW("successLoadForm",d)}catch(k){this.oW("failedLoadForm",d);throw a.ba(k)}this.oW("afterLoadForm",d)})});b.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function l(b){b.result=this.oW("beforeFilesViewSettingsForm",{},function e(b,e){if(b)return;try{if(this.data().dc=="settings")this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",e);this.oW("afterFilesViewSettingsForm",e)});else{if(this.data().dc)this.oW("requestUnloadForm");var f=this.app.aG["filesview.filesview"][0].data(),g=d(this.app.lang,f.dA,f.display,f.cN);this.oW("requestLoadForm",{html:g,dq:i.bind(c,this),cC:["click","submit"],command:"settings"},function(){this.oW("successFilesViewSettingsForm",e)})}}catch(h){this.oW("failedFilesViewSettingsForm",e);this.oW("afterFilesViewSettingsForm",e);throw a.ba(h)}})});b.tools={ij:function(){var a=this;if(a.iP===undefined&&a.widget.bn().$.childNodes.length)a.iP=j(h(a.widget.bn().$.childNodes,"form"));return a.iP},releaseDomNodes:function(){delete this.iP}}}m.add("formpanel",{bM:["button"],onLoad:function l(){b()},gr:function n(b){var c=this;b.on("themeSpace",function d(a){if(a.data.space=="mainTop")a.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div class="panel_widget widget" tabindex="-1"></div></div>'});b.on("uiReady",function e(d){var e=b.document.getById("panel_view").aC(0);a.aG.bz(b,"formpanel",c,e)});b.bD("settings",{exec:function(b){b.oW("requestFilesViewSettingsForm",null,function(){if(b.cS("settings").bu==a.eV)setTimeout(function(){b.aG["formpanel.formpanel"][0].tools.ij().eG("input").getItem(0).focus()},0)})}});b.bD("refresh",{exec:function(a){var b=a.aV;if(b)a.oW("requestShowFolderFiles",{folder:b},function(){setTimeout(function(){a.aG["filesview.filesview"][0].bn().focus()},0)})}});b.bY.add("Settings",a.UI_BUTTON,{label:b.lang.Settings,command:"settings"});b.bY.add("Refresh",a.UI_BUTTON,{label:b.lang.Refresh,command:"refresh"});b.cS("refresh").bR(a.aY)}});})();m.add("keystrokes",{eK:function(b){b.dJ=new a.dJ(b);b.oX={}},bz:function(a){var b=a.config.keystrokes,c=a.config.gN,d=a.dJ.keystrokes,e=a.dJ.gN;for(var f=0;f<b.length;f++)d[b[f][0]]=b[f][1];for(f=0;f<c.length;f++)e[c[f]]=1}});a.dJ=function(a){var b=this;if(a.dJ)return a.dJ;b.keystrokes={};b.gN={};b._={app:a};return b};(function(){var b,c=function(a){a=a.data;var c=a.db(),d=this.keystrokes[c],e=this._.app;b=e.oW("iK",{keyCode:c})===true;if(!b){if(d){var f={gJ:"dJ"};b=e.execCommand(d,f)!==false}if(!b){var g=e.oX[c];b=g&&g(e)===true;if(!b)b=!!this.gN[c]}}if(b)a.preventDefault(true);return!b},d=function(a){if(b){b=false;a.data.preventDefault(true)}};a.dJ.prototype={oA:function(a){a.on("keydown",c,this);if(f.opera||f.gecko&&f.mac)a.on("keypress",d,this)}}})();l.gN=[a.bP+66,a.bP+73,a.bP+85];l.keystrokes=[[a.eJ+121,"hW"],[a.eJ+122,"elementsPathFocus"],[a.dy+121,"bj"],[a.bP+a.dy+121,"bj"],[a.bP+90,"undo"],[a.bP+89,"redo"],[a.bP+a.dy+90,"redo"],[a.bP+76,"link"],[a.bP+66,"bold"],[a.bP+73,"italic"],[a.bP+85,"underline"],[a.eJ+109,"toolbarCollapse"]];m.add("menu",{eK:function(a){var b=a.config.nj.split(","),c={};for(var d=0;d<b.length;d++)c[b[d]]=d+1;a._.iA=c;a._.iG={}},bM:["floatpanel"]});i.extend(a.application.prototype,{dZ:function(a,b){this._.iA[a]=b||100},gp:function(b,c){if(this._.iA[c.group])this._.iG[b]=new a.iD(this,b,c)},eU:function(a){for(var b in a)this.gp(b,a[b])},mh:function(a){return this._.iG[a]}});(function(){function b(a){a.sort(function(a,b){if(a.group<b.group)return-1;else if(a.group>b.group)return 1;return a.fE<b.fE?-1:a.fE>b.fE?1:0})}a.menu=i.createClass({$:function(a,b){var c=this;c.id="cke_"+i.getNextNumber();c.app=a;c.items=[];c._.hx=b||1},_:{jK:function(b){var c=this;var d=c._.oM,e=c.items[b],f=e.hQ&&e.hQ();if(!f){c._.panel.gU();return}if(d)d.ih();else{d=c._.oM=new a.menu(c.app,c._.hx+1);d.parent=c;d.onClick=i.bind(c.onClick,c)}for(var g in f)d.add(c.app.mh(g));var h=c._.panel.iv(c.id).ax.getDocument().getById(c.id+String(b));d.show(h,2)}},ej:{add:function(a){if(!a.fE)a.fE=this.items.length;this.items.push(a)},ih:function(){this.items=[]},show:function(c,d,e,f){var g=this.items,h=this.app,j=this._.panel,k=this._.ax;if(!j){j=this._.panel=new n.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:h.iy+" cke_contextmenu"},this._.hx);j.onEscape=i.bind(function(){this.onEscape&&this.onEscape();this.hide()},this);j.onHide=i.bind(function(){this.onHide&&this.onHide()},this);var l=j.qq(this.id);l.oz=true;var m=l.jQ;m[40]="next";m[9]="next";m[38]="prev";m[a.dy+9]="prev";m[32]="click";m[39]="click";k=this._.ax=l.ax;k.addClass(h.iy);var o=k.getDocument();o.bH().setStyle("overflow","hidden");o.eG("html").getItem(0).setStyle("overflow","hidden");this._.qz=i.addFunction(function(a){var b=this;clearTimeout(b._.jI);b._.jI=i.setTimeout(b._.jK,h.config.ob,b,[a])},this);this._.qm=i.addFunction(function(a){clearTimeout(this._.jI)},this);this._.ql=i.addFunction(function(b){var c=this;var d=c.items[b];if(d.bu==a.aY){c.hide();return}if(d.hQ)c._.jK(b);else c.onClick&&c.onClick(d)},this)}b(g);var q=['<div class="cke_menu">'],r=g.length,s=r&&g[0].group;for(var t=0;t<r;t++){var u=g[t];if(s!=u.group){q.push('<div class="cke_menuseparator"></div>');s=u.group}u.er(this,t,q)}q.push("</div>");k.setHtml(q.join(""));if(this.parent)this.parent._.panel.rA(j,this.id,c,d,e,f);else j.gf(this.id,c,d,e,f);h.oW("menuShow",[j])},hide:function(){this._.panel&&this._.panel.hide()}}});})();a.iD=i.createClass({$:function(a,b,c){var d=this;i.extend(d,c,{fE:0,className:"cke_button_"+b});d.group=a._.iA[d.group];d.app=a;d.name=b},ej:{er:function(b,c,d){var e=this;var g=b.id+String(c),h=typeof e.bu=="undefined"?a.aS:e.bu,i=" cke_"+(h==a.eV?"on":h==a.aY?"disabled":"off"),j=e.label;if(h==a.aY)j=e.app.lang.common.unavailable.replace("%1",j);if(e.className)i+=" "+e.className;var k=e.hQ;d.push('<span class="cke_menuitem"><a id="',g,'" class="',i,'" href="javascript:void(\'',(e.label||"").replace("'",""),'\')" title="',e.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(k?'aria-haspopup="true"':"")+(h==a.aY?'aria-disabled="true"':"")+(h==a.eV?'aria-pressed="true"':""));if(f.opera||f.gecko&&f.mac)d.push(' onkeypress="return false;"');if(f.gecko)d.push(' onblur="this.style.cssText = this.style.cssText;"');var l=(e.rD||0)*-16;d.push(' onmouseover="CKFinder.tools.callFunction(',b._.qz,",",c,');" onmouseout="CKFinder.tools.callFunction(',b._.qm,",",c,');" onclick="CKFinder.tools.callFunction(',b._.ql,",",c,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(e.icon?' style="background-image:url('+a.getUrl(e.icon)+");background-position:0 "+l+'px;"':"")+"></span></span>"+'<span class="cke_label">');if(e.hQ)d.push('<span class="cke_menuarrow"></span>');d.push(j,"</span></a></span>")}}});l.ob=400;l.nj="";m.add("panel",{eK:function(b){b.bY.kd(a.UI_PANEL,n.panel.dq)}});a.UI_PANEL=2;n.panel=function(b,c,d){var e=this;if(c)i.extend(e,c);i.extend(e,{className:""});var f=a.basePath;i.extend(e.css,[f+"skins/"+d+"/uipanel.css"]);e.id=i.getNextNumber();e.document=b;e._={iq:{}}};n.panel.dq={create:function(a){return new n.panel(a)}};n.panel.prototype={nt:function(a){var b=[];this.er(a,b);return b.join("")},er:function(a,b){var c=this;var d="cke_"+c.id;b.push('<div class="',a.iy,' cke_compatibility" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'">'+"<div"+' id="',d,'"',' dir="',a.lang.dir,'"',' role="presentation" class="cke_panel cke_',a.lang.dir);if(c.className)b.push(" ",c.className);b.push('">');if(c.lE||c.css.length){b.push('<iframe id="',d,'_frame" frameborder="0" src="');var e=f.isCustomDomain(),h="document.open();"+(e?'document.domain="'+window.document.domain+'";':"")+"document.close();";b.push(g?"javascript:void(function(){"+encodeURIComponent(h)+"}())":"");b.push('"></iframe>')}b.push("</div></div>");return d},oU:function(){var a=this._.rE;if(!a){if(this.lE||this.css.length){var b=this.document.getById("cke_"+this.id+"_frame"),c=b.getParent(),d=c.getAttribute("dir"),e=c.getParent().getAttribute("class").split(" ")[0],g=c.getParent().getAttribute("lang"),h=b.getFrameDocument();h.$.open();if(f.isCustomDomain())h.$.domain=document.domain;var j=i.addFunction(i.bind(function(a){this.hm=true;if(this.onLoad)this.onLoad()},this)),k=h.getWindow();k.$.CKFinder=CKFinder;var l=f.cssClass.replace(/browser_quirks|browser_iequirks/g,"");h.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+d+'" class="'+e+'_container" lang="'+g+'">'+"<head>"+"<style>."+e+"_container{visibility:hidden}</style>"+"</head>"+'<body class="cke_'+d+" cke_panel_frame "+l+' cke_compatibility" style="margin:0;padding:0"'+' onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+j+');">'+"</body>"+'<link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'">'+"</html>");h.$.close();k.$.CKFinder=CKFinder;h.on("keydown",function(a){var b=this;var c=a.data.db();if(b._.onKeyDown&&b._.onKeyDown(c)===false){a.data.preventDefault();return}if(c==27)b.onEscape&&b.onEscape()},this);a=h.bH()}else a=this.document.getById("cke_"+this.id);this._.rE=a}return a},qq:function(a,b){var c=this;b=c._.iq[a]=b||new n.panel.block(c.oU());if(!c._.iL)c.gf(a);return b},iv:function(a){return this._.iq[a]},gf:function(a){var b=this;var c=b._.iq,d=c[a],e=b._.iL;if(e)e.hide();b._.iL=d;d._.cQ=-1;b._.onKeyDown=d.onKeyDown&&i.bind(d.onKeyDown,d);d.show();return d}};n.panel.block=i.createClass({$:function(a){var b=this;b.ax=a.append(a.getDocument().createElement("div",{attributes:{"class":"cke_panel_block",role:"presentation"},gS:{display:"none"}}));b.jQ={};b._.cQ=-1;b.ax.hX()},_:{},ej:{show:function(){this.ax.setStyle("display","")},hide:function(){var a=this;if(!a.onHide||a.onHide.call(a)!==true)a.ax.setStyle("display","none")},onKeyDown:function(a){var b=this;var c=b.jQ[a];switch(c){case"next":var d=b._.cQ,e=b.ax.eG("a"),f;while(f=e.getItem(++d)){if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.cQ=d;f.focus();break}}return false;case"prev":d=b._.cQ;e=b.ax.eG("a");while(d>0&&(f=e.getItem(--d))){if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.cQ=d;f.focus();break}}return false;case"click":d=b._.cQ;f=d>=0&&b.ax.eG("a").getItem(d);if(f)f.$.click?f.$.click():f.$.onclick();return false}return true}}});m.add("resize",{bz:function(b){var c=b.config;if(c.nB)b.on("uiReady",function(){function h(c){b.document.bH().removeClass("during_sidebar_resize");a.document.aF("mousemove",g);a.document.aF("mouseup",h);if(b.document){b.document.aF("mousemove",g);b.document.aF("mouseup",h)}}function g(a){b.document.bH().addClass("during_sidebar_resize");var d=a.data.$.screenX-e.x,g=f.width+d*(b.lang.dir=="rtl"?-1:1);b.nJ(Math.max(c.nN,Math.min(g,c.nC)))}var d=null,e,f;b.layout.dV().on("mousedown",function(c){if(!d)d=b.layout.dV();if(c.data.bK().$!=d.$)return;f={width:d.$.offsetWidth||0};e={x:c.data.$.screenX};a.document.on("mousemove",g);a.document.on("mouseup",h);if(b.document){b.document.on("mousemove",g);b.document.on("mouseup",h)}})})}});l.nN=120;l.nC=500;l.nB=true;(function(){function d(a,b){var c;if(a===0)c=b.FilesCountEmpty;else if(a==1)c=b.FilesCountOne;else c=b.FilesCountMany.replace("%1",a);return"<p>"+i.htmlEncode(c)+"</p>"}function c(a){return"<p>"+a.name+" ("+a.size+"KB, "+a.dateF+")</p>"}function b(){var b=a.aG.hi("status","status");b.bh("ShowFileInfo",["requestShowFileInfo"],function e(b){b.result=this.oW("beforeShowFileInfo",b.data,function d(b,d){var e=this;if(b)return;var f=d.file;try{var g=f?c(f):"";e.bn().setHtml(g);e.oW("successShowFileInfo",d)}catch(h){e.oW("failedShowFileInfo",d);throw a.ba(h)}e.oW("afterShowFileInfo",d)})});b.bh("ShowFolderInfo",["requestShowFolderInfo"],function f(b){b.result=this.oW("beforeShowFolderInfo",b.data,function c(c,e){var f=this;if(c)return;var g=e.folder;try{var h=d(b.data.widget.data().files.length,f.app.lang);f.bn().setHtml(h);f.oW("successShowFolderInfo",e)}catch(i){f.oW("failedShowFolderInfo",e);throw a.ba(i)}f.oW("afterShowFolderInfo",e)})})}m.add("status",{bM:["filesview"],onLoad:function e(){b()},gr:function f(b){var c=this;b.on("themeSpace",function d(a){if(a.data.space=="mainBottom")a.data.html+='<div id="status_view" class="view" role="status"></div>'});b.on("uiReady",function e(d){var e=b.document.getById("status_view"),f=b.aG["filesview.filesview"],g=a.aG.bz(b,"status",c,e,{parent:f[i]});for(var h=0;h<f.length;h++){if(f[h].app!=b)continue;f[h].on("successSelectFile",function j(a){g.oW("requestShowFileInfo",a.data)});f[h].on("successShowFolderFiles",function k(a){a.data.widget=this;g.oW("requestShowFolderInfo",a.data)})}b.on("afterCommandExecDefered",function l(a){if(a.data.name=="RemoveFile"){var b={folder:a.data.folder,widget:f[0]};g.oW("requestShowFolderInfo",b)}});g.on("afterShowFileInfo",function m(a){if(this.bn().getText())return;g.oW("requestShowFolderInfo",{widget:f[0],folder:f[0].data().folder})})})}});})();(function(){var a=function(){this.fk=[];this.pZ=false};a.prototype.focus=function(){for(var a=0,b;b=this.fk[a++];)for(var c=0,d;d=b.items[c++];){if(d.focus){d.focus();return}}};var b={hW:{iH:{qt:1,source:1},exec:function(a){if(a.dh){a.dh.pZ=true;if(g)setTimeout(function(){a.dh.focus()},100);else a.dh.focus()}}}};m.add("toolbar",{bM:["formpanel"],bz:function(c){var d=function(a,b){switch(b){case 39:while((a=a.next||a.toolbar.next&&a.toolbar.next.items[0])&&!a.focus){}if(a)a.focus();else c.dh.focus();return false;case 37:while((a=a.previous||a.toolbar.previous&&a.toolbar.previous.items[a.toolbar.previous.items.length-1])&&!a.focus){}if(a)a.focus();else{var d=c.dh.fk[c.dh.fk.length-1].items;d[d.length-1].focus()}return false;case 27:c.focus();return false;case 13:case 32:a.lc();return false}return true};c.on("themeSpace",function(b){if(b.data.space=="mainTop"){c.dh=new a;var e="cke_"+i.getNextNumber(),f=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',e,'"'],g;f.push(">");f.push('<span id="',e,'" class="cke_voice_label">',c.lang.toolbar,"</span>");var h=c.dh.fk,j=c.config.toolbar instanceof Array?c.config.toolbar:c.config["toolbar_"+c.config.toolbar];for(var k=0;k<j.length;k++){var l=j[k];if(!l)continue;var m="cke_"+i.getNextNumber(),o={id:m,items:[]};if(g){f.push("</div>");g=0}if(l==="/"){f.push('<div class="cke_break"></div>');continue}f.push('<span id="',m,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var q=h.push(o)-1;if(q>0){o.previous=h[q-1];o.previous.next=o}for(var t=0;t<l.length;t++){var u,v=l[t];if(v=="-")u=n.separator;else u=c.bY.create(v);if(u){if(u.canGroup){if(!g){f.push('<span class="cke_toolgroup">');g=1}}else if(g){f.push("</span>");g=0}var w=u.er(c,f);q=o.items.push(w)-1;if(q>0){w.previous=o.items[q-1];w.previous.next=w}w.toolbar=o;w.onkey=d}}if(g){f.push("</span>");g=0}f.push('<span class="cke_toolbar_end"></span></span>')}f.push("</div></div>");b.data.html+=f.join("")}});c.bD("hW",b.hW)}})})();n.separator={er:function(a,b){b.push('<span class="cke_separator"></span>');return{}}};l.toolbar_Basic=[["Upload","Refresh"]];l.toolbar_Full=[["Upload","Refresh","Settings","Help"]];l.toolbar="Full";(function(){function a(a){if(g){a.$.onfocusin=function(){a.addClass("focus_inside")};a.$.onfocusout=function(){a.removeClass("focus_inside")}}else{a.$.addEventListener("focus",function(){a.addClass("focus_inside")},true);a.$.addEventListener("blur",function(){a.removeClass("focus_inside")},true)}}m.add("tools",{eK:function b(a){this.app=a},addTool:function(a,b){var c="tool_"+i.getNextNumber();a=b?'<div id="'+c+'" class="view tool_panel" tabindex="0" style="display: none;">'+a+"</div>":'<div id="'+c+'" class="tool" style="display: none;">'+a+"</div>";this.app.layout.dV().aC(0).appendHtml(a);return c},addToolPanel:function(b){b=b||"";var c=this.addTool(b,1),d=this.app.layout.dV().aC(0).dB();a(d);return c},hideTool:function(a){this.app.document.getById(a).setStyle("display","none");this.app.layout.ea(true)},showTool:function(a){this.app.document.getById(a).removeStyle("display");this.app.layout.ea(true)},removeTool:function(a){this.hideTool(a);this.app.document.getById(a).remove()}})})();(function(){function j(a,b,c){a.log=b.aC([3,0]);a.oS=(new Date).getTime();a.interval=window.setInterval(h,1e3,a,c);a.kC=0;a.onprogress=function(a){if(a.lengthComputable){g(a,c);h(a.target,c);var b=a.loaded/a.total;if(b<1){var d=b*100;if(d<0)d=0;a.target.log.setStyle("width",d+"%")}}};a.onload=function(a){var b=a.target;window.clearInterval(b.interval);var c=b.log.getParent().getParent()}}function h(a,b){var c=((new Date).getTime()-a.oS)/1e3,d=a.kC/c;d=Number(d/1024).toFixed();a.log.getParent().cf().cf().setText(b.KbPerSecond.replace("%1",d))}function g(a,b){a.target.kC=a.loaded;var c=Number(a.loaded/1024).toFixed()+"/"+Number(a.total/1024).toFixed();a.target.log.getParent().cf().setText(b.Kb.replace("%1",c))}function e(a,b){var c=a.$.files[0].fileName;c=d(c);return"--"+b+"\r\n"+"Content-Disposition: form-data; "+'name="'+a.name+'"; '+'filename="'+c+'"\r\n'+"Content-Type: application/octet-stream\r\n\r\n"+a.$.files[0].getAsBinary()+"\r\n"+"--"+b+"--\r\n"}function d(a){var b,c,d="";for(b=0;b<a.length;b++){c=a.charCodeAt(b);if(c<128)d+=String.fromCharCode(c);else if(c>127&&c<2048){d+=String.fromCharCode(c>>6|192);d+=String.fromCharCode(c&63|128)}else{d+=String.fromCharCode(c>>12|224);d+=String.fromCharCode(c>>6&63|128);d+=String.fromCharCode(c&63|128)}}return d}function c(b,c,d){if(!(c.$.files&&c.$.files[0]&&c.$.files[0].getAsBinary))return false;if(c.$.files[0].fileSize>20971520)return false;var f=new XMLHttpRequest;if(!f.upload)return false;a.log("[UPLOADFORM] Starting XHR file upload.");b.oW("successUploadFileForm",{step:2});var g=d.dB().cf();d.addClass("progress_visible");j(f.upload,g,b.app.lang);var h=b.app.document.getWindow().$.OnUploadCompleted;f.addEventListener("error",function(a){d.removeClass("progress_visible");h("",b.app.lang.UploadUnknError)},false);f.addEventListener("load",function(a){var b=/<script.*>\s*window\.parent\.OnUploadCompleted\(\s*'(.*)'\s*,\s*'(.*)'\s*\).*<\/script>/,c=a.target.responseText,d=c.match(b);if(!d){h("","Error: "+c);return}h(d[1],d[2])},false);f.open("POST",d.getAttribute("action"));var i="-----CKFinder--XHR-----";f.setRequestHeader("Content-Type","multipart/form-data; boundary="+i);f.sendAsBinary(e(c,i));return true}function b(){function g(a,b,c){return'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+c+'" method="POST" target="'+b+'">'+'<h2 role="heading">'+a.lang.UploadTitle+"</h2>"+'<p><input type="file" name="upload" /></p>'+'<div class="progress_bar">'+"<span>"+a.lang.UploadProgressLbl+"</span>"+'<span class="speed"></span>'+'<span class="count"></span>'+'<div class="progress_bar_container">'+"<div></div>"+"</div>"+"</div>"+'<div class="buttons">'+'<input type="submit" value="'+a.lang.UploadBtn+'" />'+'<input type="button" name="cancel" value="'+a.lang.UploadBtnCancel+'" />'+"</div>"+"</form>"}function e(b,d){var e=this,f=e.data(),g=1,h=this.tools.qO(),i=h&&h.$.value;if(!i.length){b.data.preventDefault(true);this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return false}var j=i.match(/\.([^\.]+)\s*$/)[1];if(!j||!d.getResourceType().isExtensionAllowed(j)){b.data.preventDefault();e.app.msgDialog("",e.app.lang.UploadExtIncorrect)}else g=0;if(g){b.data.preventDefault(true);this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return false}var k=e.app.document.getWindow().$;k.OnUploadCompleted=function(a,b){var c={step:3,filename:a,folder:d};if(b&&!a){e.app.msgDialog("",b);var f=e.tools.qB();f.setStyle("display","none");f.aC(1).setText("");f.aC(2).setText("");e.oW("failedUploadFileForm",c)}else{if(b)e.app.msgDialog("",b);if(e.app.aV==d)e.app.oW("requestShowFolderFiles",{folder:d,mw:a});e.oW("requestUnloadForm");e.oW("successUploadFileForm",c)}e.oW("afterUploadFileForm",c);try{delete k.OnUploadCompleted}catch(g){k.OnUploadCompleted=undefined}};if(c(this,h,this.tools.ij()))b.data.preventDefault();else{a.log("[UPLOADFORM] Starting IFRAME file upload.");this.oW("successUploadFileForm",{step:2})}return true}function d(){var b="RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ";return a.bF.length>0&&b.indexOf(a.bF.substr(0,9))!=-1}var b=a.aG.bX["formpanel.formpanel"];if(!b)return;b.bh("UploadFileForm",["requestUploadFileForm"],function h(b){var c=this.app.aV,f=this;this.oW("beforeUploadFileForm",{folder:c,step:1},function h(b,c){if(b||d())return;var h=this.data(),j=c.folder,k=0;if(!j){this.app.msgDialog("",this.app.lang.UploadNoFolder);k=1}if(!k&&!j.acl.fileUpload){this.app.msgDialog("",this.app.lang.UploadNoPerms);k=1}if(k){this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return}this.oW("beforeUploadFileForm",{folder:j,step:2},function l(b,c){try{if(h.dc=="upload")this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(a.aS);this.oW("successUploadFileForm",c);this.oW("afterUploadFileForm",c)});else{if(h.dc)this.oW("requestUnloadForm");var d=this.tools.qL(),k=this.app.connector.composeUrl("FileUpload",{},j.type,j),l=g(this.app,d.$.id,k),m=this;this.oW("requestLoadForm",{html:l,dq:i.bind(function(a){return e.call(m,a,j)}),cC:["submit"],cancelSubmit:0,gM:0,command:"upload"},function(){c.step=1;this.oW("successUploadFileForm",c)});function n(a){if(a.data.folder&&a.data.folder.acl.fileUpload){var b=f.tools.qO();f.oW("requestUnloadForm");f.oW("requestUploadFileForm",function c(){var a=f.tools.qO();b.kB(a);a.remove();delete f.tools.jj})}}var o=this.app.aG["filesview.filesview"][0];o.on("successShowFolderFiles",n);this.on("requestUnloadForm",function q(a){a.aF();o.aF("successShowFolderFiles",n)})}}catch(p){this.oW("failedUploadFileForm",c);this.oW("afterUploadFileForm",c);throw a.ba(p)}})})});b.tools.releaseDomNodes=i.override(b.tools.releaseDomNodes,function(a){return function(){var b=this;a.apply(b,arguments);delete b.jj;delete b.jc;if(b.gq!==undefined){b.gq.remove();delete b.gq}}});b.tools.qB=function(){var a=this;if(a.jc===undefined)a.jc=a.widget.bn().aC([0,2]);return a.jc};b.tools.qO=function(){var a=this;if(a.jj===undefined)a.jj=a.widget.bn().aC([0,1,0]);return a.jj};b.tools.qL=function(){var a=this;if(a.gq===undefined){var b=f.isCustomDomain(),c="ckf_"+i.getNextNumber(),d='<iframe id="'+c+'"'+' name="'+c+'"'+' style="display:none"'+' frameBorder="0"'+(b?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+'})())"':"")+' tabIndex="-1"'+' allowTransparency="true"'+"></iframe>",e=a.widget.app.document.bH();e.appendHtml(d);a.gq=e.dB()}return a.gq};}m.add("uploadform",{bM:["formpanel","button"],onLoad:function k(){b()},gr:function l(b){b.bD("upload",{exec:function(b){b.oW("requestUploadFileForm",null,function(){if(b.cS("upload").bu==a.eV)setTimeout(function(){var a=b.aG["formpanel.formpanel"][0].tools.ij();if(a)a.eG("input").getItem(0).focus()},0)})}});b.bY.add("Upload",a.UI_BUTTON,{label:b.lang.Upload,command:"upload"});b.on("appReady",function(c){var d=b.aG["filesview.filesview"];for(var e=0;e<d.length;e++)d[e].on("successShowFolderFiles",function f(c){var d=this.tools.currentFolder();if(d&&d.acl.fileUpload)this.app.cS("upload").bR(a.aS);else{var e=b.aG["formpanel.formpanel"][0];if(e.data().dc=="upload")e.oW("requestUnloadForm");this.app.cS("upload").bR(a.aY)}})})}});})();(function(){function c(a,d,e,g,h,j,k){if(!g)g=function(){};if(!k)var l=[d];var m={},n=0;for(var o=0;o<e.length;o++){var r=e[o];if(r.folder==d)continue;m["files["+n+"][name]"]=r.name;m["files["+n+"][type]"]=r.folder.type;m["files["+n+"][folder]"]=r.folder.getPath();m["files["+n+"][options]"]=h&&h[o]||"";n++;if(j&&!k)l.push(r.folder)}if(!k)g=i.override(g,function(b){return function(){var c,d=a.aG["filesview.filesview"][0],e=d.tools.currentFolder();for(c=0;c<l.length;c++){if(e==l[c]){a.oW("requestSelectFolder",{folder:e});break}}return b}});var s=a.connector,t=0,u=j?"MoveFiles":"CopyFiles";if(!m["files[0][name]"]){g();return}s.sendCommandPost(u,null,m,function v(h){var i=h.getErrorNumber(),k=[],l=[],m,n,o;for(m=0;m<e.length;m++)k.push(e[m]);if(i==s.ERROR_COPY_FAILED||i==s.ERROR_MOVE_FAILED){var r=h.selectNodes("Connector/Errors/Error"),u=0;for(m=0;m<r.length;m++){var v=r[m].getAttribute("code"),x=r[m].getAttribute("name"),y=r[m].getAttribute("type"),z=r[m].getAttribute("folder");if(v==s.ERROR_ALREADYEXIST)u=1;else{o=a.lang.BasketPasteErrorOther;o=o.replace("%s",x);o=o.replace("%e",a.lang.Errors[v]);a.msgDialog("",o)}for(var A=0;A<k.length;A++){var B=k[A];if(B&&B.name==x&&B.folder.getPath()==z&&B.folder.type==y){delete k[A];if(v==s.ERROR_ALREADYEXIST)l.push(B)}}}n=b(k,a);if(u)a.cg.openDialog("basketPasteFileExists",function(b){var e=arguments.callee;o="";if(n){o=j?a.lang.BasketPasteMoveSuccess:a.lang.BasketPasteCopySuccess;o=o.replace("%s",n)}if(o)o+="<br /><br />";var h=a.lang.ErrorMsg.FileExists;h=h.replace("%s",l[0]);o+="<strong>"+h+"</strong>";b.show();if(o){b.getContentElement("tab1","msg").getElement().setHtml(o);if(f.ie7Compat){var i=b.mn();b.resize(i.width,i.height)}}b.on("ok",function k(f){f.aF();var h=b.getContentElement("tab1","option").getValue(),i=b.getContentElement("tab1","remember").getValue(),k;switch(h){case"autorename":k=["autorename"];break;case"overwrite":k=["overwrite"];break;case"skip":if(!i&&l.length>1){l.shift();a.cg.openDialog("basketPasteFileExists",e);return};case"skipall":g();return;break}if(i)for(var m=1;m<l.length;m++)k.push(k[0]);c(a,d,l,g,k,j,1)})});return}else if(h.checkError())t=1;if(t)return;n=b(k,a);if(n){o=j?a.lang.BasketPasteMoveSuccess:a.lang.BasketPasteCopySuccess;o=o.replace("%s",n);a.msgDialog("",'<div style="padding:10px;">'+o+"</div>",g)}else g()})}function b(a,b){var c="",d=0;for(var e=0;e<a.length;e++){var f=a[e];if(!f)continue;var g=i.indexOf(b.basketFiles,f),h=1,j=b.basketFiles.length-1;for(var k=g;k<j;k++){if(!b.basketFiles[k]){h++;continue}b.basketFiles[k]=b.basketFiles[k+h]}b.basketFiles.length=j;c+="<li>"+f+"</li>";d++}f=undefined;var l="cke_files_list";if(d>3)l+=" cke_files_list_many";if(c)c='<ul class="'+l+'">'+c+"</ul>";return c}m.add("basket",{bM:["foldertree","filesview","contextmenu"],basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket"}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",command:"OpenFileFolder",group:"file1"}]],onLoad:function d(b){a.dialog.add("basketPasteFileExists",function(a){return{title:a.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",expand:true,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:a.lang.common.makeDecision,"default":"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"],[a.lang.common.skip,"skip"],[a.lang.common.skipAll,"skipall"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:a.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function e(b){var d=window.top[a.hf+"cation"][a.hg+"st"];b.bD("FolderPasteCopyBasket",{exec:function(a){var b=a.aV;if(!b)return;c(a,b,a.basketFiles)}});b.bD("FolderPasteMoveBasket",{exec:function(b){if(a.bF&&1==a.bs.indexOf(a.bF.substr(1,1))%5&&d.toLowerCase().replace(a.jG,"")!=a.ed.replace(a.jG,"")||a.bF&&a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1))b.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://ckfinder.com'>CKFinder web site</a> to obtain a valid license.");else{var e=b.aV;if(!e)return;c(b,e,b.basketFiles,null,[],true)}}});b.eU({folderPasteMoveBasket:{label:b.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:b.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});var e=b.basket=new a.aL.BasketFolder(b);b.basketFiles=[];b.on("uiReady",function f(c){function m(a){if(!a.eU)return;for(var b in a.plugins){if(!a.plugins.hasOwnProperty(b))continue;b=a.plugins[b];if(!b.basketFileContextMenu)continue;for(var c=0;c<b.basketFileContextMenu.length;c++){var d=b.basketFileContextMenu[c];if(a._.iG[d[0]])continue;var e=i.deepCopy(d[1]);if(!e.command){var f="BasketContextMenu_"+d[0],g=d[1].onClick;a.bD("BasketContextMenu_"+d[0],{exec:function(a){g(a.cg)}});e.command=f}if(a.lang[e.label])e.label=a.lang[e.label];a.gp(d[0],e);j.push(d[0])}}}function l(a){for(var b in a.plugins){if(!a.plugins.hasOwnProperty(b))continue;b=a.plugins[b];if(!b.basketToolbar)continue;for(var c=0;c<b.basketToolbar.length;c++){var d=b.basketToolbar[c];if(a.bY._.items[d[0]])continue;var e=i.deepCopy(d[1]);if(!e.command){var f=d[1].onClick,g="BasketToolbar_"+d[0];a.bD("BasketToolbar_"+d[0],{exec:function(a){f(a.cg)}});e.command=g}if(a.lang[e.label])e.label=a.lang[e.label];e.basketToolbar=1;a.bY.add(d[0],CKFinder._.UI_BUTTON,e)}}}var d=b.aG["foldertree.foldertree"];for(var f=0;f<d.length;f++){d[f].on("beforeAddFolder",function n(a){a.aF();a.data.folders.push(e)});d[f].on("beforeDroppable",function o(c){if(!(c.data.target instanceof a.aL.BasketFolder))return;if(!(c.data.source instanceof a.aL.File))return;var d=c.data.source,e=0;for(var f=0;f<b.basketFiles.length;f++){if(d.isSameFile(b.basketFiles[f]))e=1}if(!e)b.basketFiles.push(c.data.source);c.cancel(1)});d[f].on("beforeContextMenu",function p(c){var d;if(!(c.data.folder instanceof a.aL.BasketFolder)){d=c.data.bj;d.folderPasteCopyBasket=b.basketFiles.length?a.aS:a.aY;d.folderPasteMoveBasket=b.basketFiles.length?a.aS:a.aY}else{d=c.data.bj;delete d.lI;delete d.removeFolder;delete d.kl;d.qT=b.basketFiles.length?a.aS:a.aY}})}b.bD("TruncateBasket",{exec:function(a){if(a.basketFiles.length)a.fe("",a.lang.BasketTruncateConfirm,function(){a.basketFiles.length=0;a.oW("requestSelectFolder",{folder:a.basket})})}});b.bD("RemoveFileFromBasket",{exec:function(a){var b=a.aG["filesview.filesview"][0].data().cG;if(b)a.fe("",a.lang.BasketRemoveConfirm.replace("%1",b.name),function(){for(var c=0;c<a.basketFiles.length;c++){var d=a.basketFiles[c];if(b.isSameFile(d)){a.basketFiles.splice(c,1);break}}a.oW("requestSelectFolder",{folder:a.basket})})}});b.bD("OpenFileFolder",{exec:function(a){var b=a.aG["filesview.filesview"][0].data().cG;if(b)a.oW("requestSelectFolder",{folder:b.folder})}});if(b.eU)b.gp("truncateBasket",{label:b.lang.BasketClear,command:"TruncateBasket",group:"folder"});var g=[],h=b.aG["filesview.filesview"],j=[];for(var k=0;k<h.length;k++){h[k].on("beforeContextMenu",function(b){if(!(b.data.folder instanceof a.aL.BasketFolder))return;var c=b.data.bj;delete c.renameFile;delete c.deleteFile;c.mu=a.aS;c.hN=a.aS;for(var d=0;d<j.length;d++)c[j[d]]=a.aS});h[k].on("beforeShowFolderFiles",function q(c){if(!(c.data.folder instanceof a.aL.BasketFolder))return;c.cancel(1);this.app.oW("requestRenderFiles",{files:b.basketFiles,fa:b.lang.BasketEmpty,eu:1,folder:c.data.folder});this.app.oW("requestRepaintFolder",c.data);l(this.app);m(this.app);var d=this.app.dh.fk;for(var e=0;e<d.length;e++){var f=this.app.document.getById(d[e].id),h=['<span class="cke_toolgroup" id="basket">'];for(var i in this.app.bY._.items){if(!this.app.bY._.items.hasOwnProperty(i))continue;var j=b.bY._.items[i];if(!j.mp[0].basketToolbar)continue;j=b.bY.create(i);var k=j.er(b,h),n=d[e].items.push(k)-1;if(n>0){k.previous=d[e].items[n-1];k.previous.next=k}if(!g[e])g[e]=[];g[e].push(n)}h.push("</span>");f.appendHtml(h.join(""))}this.on("beforeShowFolderFiles",function(a){this.app.document.getById("basket").remove();var b=this.app.dh.fk;for(var c=0;c<b.length;c++)for(var d=0;d<b[c].items.length;d++){if(g[c][d])delete b[c].items[d]}a.aF()},null,null,1);this.oW("successShowFolderFiles",c.data);this.oW("afterShowFolderFiles",c.data)})}})}});a.aL.BasketFolder=i.createClass({$:function(b){var c=this;a.aL.Folder.call(c,b,null,b.lang.BasketFolder);c.hasChildren=0;c.acl=new a.aL.Acl("1111111");c.isBasket=true},base:a.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(a){a.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},getPath:function(){return"/"},copyFiles:function(a){},moveFiles:function(a){}}})})();a.rs=0;a.sz=1;a.sy=2;a.ss=3;(function(){function H(a,b){var c=function(){e(this);b(this)},d=function(){e(this)},e=function(a){a.aF("ok",c);a.aF("cancel",d)};a.on("ok",c);a.on("cancel",d)}function t(b){function t(b){a.document.aF("mouseup",t);a.document.aF("mousemove",s);if(f.ie6Compat){var c=v.aC(0).getFrameDocument();c.aF("mouseup",t);c.aF("mousemove",s)}}function s(c){var f=c.data.$.screenX,g=c.data.$.screenY,i=f-n.x,q=g-n.y,r=a.document.getWindow().eR(),s=c.jO.fU;if(s.search("t")!=-1)j(o,q);if(s.search("l")!=-1)m(o,i);if(s.search("b")!=-1)l(o,q);if(s.search("r")!=-1)k(o,i);n={x:f,y:g};var t,u,v,w;if(o.x+h[3]<p)t=-h[3];else if(s.search("l")!=-1&&o.eS-o.x<d+p)t=o.eS-d;else t=o.x;if(o.y+h[0]<p)u=-h[0];else if(s.search("t")!=-1&&o.bW-o.y<e+p)u=o.bW-e;else u=o.y;if(o.eS-h[1]>r.width-p)v=r.width+h[1];else if(s.search("r")!=-1&&o.eS-o.x<d+p)v=o.x+d;else v=o.eS;if(o.bW-h[2]>r.height-p)w=r.height+h[2];else if(s.search("b")!=-1&&o.bW-o.y<e+p)w=o.y+e;else w=o.bW;b.move(t,u);b.resize(v-t,w-u);c.data.preventDefault()}function r(c){var d=c.jO.fU,e=b.hR();o=b.gz();i.extend(o,{eS:o.x+e.width,bW:o.y+e.height});n={x:c.data.$.screenX,y:c.data.$.screenY};a.document.on("mousemove",s,b,{fU:d});a.document.on("mouseup",t,b,{fU:d});if(f.ie6Compat){var g=v.aC(0).getFrameDocument();g.on("mousemove",s,b,{fU:d});g.on("mouseup",t,b,{fU:d})}c.data.preventDefault()}function m(a,b){a.x+=b}function l(a,b){a.bW+=b}function k(a,b){a.eS+=b}function j(a,b){a.y+=b}var c=b.dg,d=c.minWidth||0,e=c.minHeight||0,g=c.jy,h=b.eY().skin.margins||[0,0,0,0];var n=null,o=null,p=b._.app.config.ux,q=["tl","t","tr","l","r","bl","b","br"];}function s(b){function k(b){a.document.aF("mousemove",j);a.document.aF("mouseup",k);if(f.ie6Compat){var c=v.aC(0).getFrameDocument();c.aF("mousemove",j);c.aF("mouseup",k)}}function j(e){var f=b.hR(),g=a.document.getWindow().eR(),j=e.data.$.screenX,k=e.data.$.screenY,l=j-c.x,m=k-c.y,n,o;c={x:j,y:k};d.x+=l;d.y+=m;if(d.x+i[3]<h)n=-i[3];else if(d.x-i[1]>g.width-f.width-h)n=g.width-f.width+i[1];else n=d.x;if(d.y+i[0]<h)o=-i[0];else if(d.y-i[2]>g.height-f.height-h)o=g.height-f.height+i[2];else o=d.y;b.move(n,o);e.data.preventDefault()}var c=null,d=null,e=b.getElement().getFirst(),g=b.eY(),h=g.config.dialog_magnetDistance,i=g.skin.margins||[0,0,0,0];if(typeof h=="undefined")h=20;b.bO.title.on("mousedown",function(e){b._.gH=true;c={x:e.data.$.screenX,y:e.data.$.screenY};a.document.on("mousemove",j);a.document.on("mouseup",k);d=b.gz();if(f.ie6Compat){var g=v.aC(0).getFrameDocument();g.on("mousemove",j);g.on("mouseup",k)}e.data.preventDefault()},b)}function r(a,b){this._={dialog:a};i.extend(this,b)}function e(a,b,c){this.ax=b;this.cQ=c;this.fM=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.gu=this.cQ;this.ax.focus()};b.on("keydown",function(a){if(a.data.db()in{32:1,13:1})this.oW("click")});b.on("focus",function(){this.oW("mouseover")});b.on("blur",function(){this.oW("mouseout")})}function d(){var a=this;var c=a._.gx,d=a._.cU.length,e=i.indexOf(a._.cU,c);for(var f=e+1;f<e+d;f++){if(b.call(a,a._.cU[f%d]))return a._.cU[f%d]}return null}function c(){var a=this;var c=a._.gx,d=a._.cU.length,e=i.indexOf(a._.cU,c)+d;for(var f=e-1;f>e-d;f--){if(b.call(a,a._.cU[f%d]))return a._.cU[f%d]}return null}function b(a){return!!this._.tabs[a][0].$.offsetHeight}a.dialog=function(b,e){function u(a){p&&a.data.preventDefault()}function r(b){if(m!=a.dialog._.dL)return;var e=b.data.db();p=0;if(e==9||e==a.dy+9){var f=e==a.dy+9;if(m._.eC){var g=f?c.call(m):d.call(m);m.selectPage(g);m._.tabs[g][0].focus()}else o(!f);p=1}else if(e==a.eJ+121&&!m._.eC){m._.eC=true;m._.tabs[m._.gx][0].focus();p=1}else if((e==37||e==39)&&m._.eC){g=e==37?c.call(m):d.call(m);m.selectPage(g);m._.tabs[g][0].focus();p=1}if(p){b.stop();b.data.preventDefault()}}function o(a){var b=m._.eO,c=a?1:-1;if(b.length<1)return;var d=(m._.gu+c+b.length)%b.length,e=d;while(!b[e].fM()){e=(e+c+b.length)%b.length;if(e==d)break}b[e].focus();if(b[e].type=="text")b[e].select()}var g=a.dialog._.ev[e];g=i.extend(g(b),h);g=i.clone(g);g=new q(this,g);var k=a.document,l=b.theme.pu(b);this._={app:b,ax:l.ax,name:e,hB:{width:0,height:0},size:{width:0,height:0},gH:false,contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:false,eO:[],gu:0,hasFocus:false};this.bO=l.bO;this.bO.dialog.setStyles({position:f.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"});a.event.call(this);this.dg=g=a.oW("dialogDefinition",{name:e,dg:g},b).dg;if(g.onLoad)this.on("load",g.onLoad);if(g.onShow)this.on("show",g.onShow);if(g.onHide)this.on("hide",g.onHide);if(g.onOk)this.on("ok",function(a){if(g.onOk.call(this,a)===false)a.data.hide=false});if(g.onCancel)this.on("cancel",function(a){if(g.onCancel.call(this,a)===false)a.data.hide=false});var m=this,n=function(a){var b=m._.contents,c=false;for(var d in b)for(var e in b[d]){c=a.call(this,b[d][e]);if(c)return}};this.on("ok",function(a){n(function(c){if(c.validate){var d=c.validate(this);if(typeof d=="string"){b.document.getWindow().$.alert(d);d=false}if(d===false){if(c.select)c.select();else c.focus();a.data.hide=false;a.stop();return true}}})},this,null,0);this.on("cancel",function(a){n(function(c){if(c.isChanged()){if(!b.document.getWindow().$.confirm(b.lang.common.confirmCancel))a.data.hide=false;return true}})},this,null,0);this.bO.close.on("click",function(a){if(this.oW("cancel",{hide:true}).hide!==false)this.hide()},this);var p;this.on("show",function(){a.document.on("keydown",r,this,null,0);if(f.opera||f.gecko&&f.mac)a.document.on("keypress",u,this);if(f.ie6Compat){var b=v.aC(0).getFrameDocument();b.on("keydown",r,this,null,0)}});this.on("hide",function(){a.document.aF("keydown",r);if(f.opera||f.gecko&&f.mac)a.document.aF("keypress",u)});this.on("iframeAdded",function(a){var b=new j(a.data.iframe.$.contentWindow.document);b.on("keydown",r,this,null,0)});this.on("show",function(){if(!this._.hasFocus){this._.gu=-1;o(true)}},this,null,4294967295);if(f.ie6Compat)this.on("load",function(a){var b=this.getElement(),c=b.getFirst();c.remove();c.appendTo(b)},this);s(this);t(this);this.bO.title.setText(g.title);for(var w=0;w<g.contents.length;w++)this.addPage(g.contents[w]);var x=/cke_dialog_tab(\s|$|_)/,y=/cke_dialog_tab(\s|$)/;this.bO.tabs.on("click",function(a){var b=this;var c=a.data.bK(),d=c,e,f;if(!(x.test(c.$.className)||c.getName()=="a"))return;e=c.$.id.substr(0,c.$.id.lastIndexOf("_"));b.selectPage(e);if(b._.eC){b._.eC=false;b._.gu=-1;o(true)}a.data.preventDefault()},this);var z=[],A=a.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},z).aC();this.bO.footer.setHtml(z.join(""));for(w=0;w<A.length;w++)this._.buttons[A[w].id]=A[w];a.skins.load(b,"dialog")};a.dialog.prototype={resize:function(){return function(b,c){var d=this;if(d._.hB&&d._.hB.width==b&&d._.hB.height==c)return;a.dialog.oW("resize",{dialog:d,skin:d._.app.gd,width:b,height:c},d._.app);d._.hB={width:b,height:c};d._.gH=true}}(),hR:function(){var a=this;if(!a._.gH)return a._.size;var b=a._.ax.getFirst(),c=a._.size={width:b.$.offsetWidth||0,height:b.$.offsetHeight||0};a._.gH=!c.width||!c.height;return c},mn:function(){var a=this.hR();a.height=a.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0);return a},move:function(){var b;return function(c,d){var e=this;var f=e._.ax.getFirst();if(b===undefined)b=f.getComputedStyle("position")=="fixed";if(b&&e._.position&&e._.position.x==c&&e._.position.y==d)return;e._.position={x:c,y:d};if(!b){var g=a.document.getWindow().hV();c+=g.x;d+=g.y}f.setStyles({left:(c>0?c:0)+"px",top:(d>0?d:0)+"px"})}}(),gz:function(){return i.extend({},this._.position)},show:function(){var b=this._.app;if(b.mode=="qt"&&g){var c=b.getSelection();c&&c.up()}var d=this._.ax,e=this.dg;if(!(d.getParent()&&d.getParent().equals(a.document.bH())))d.appendTo(a.document.bH());else return;if(f.gecko&&f.version<10900){var h=this.bO.dialog;h.setStyle("position","absolute");setTimeout(function(){h.setStyle("position","fixed")},0)}this.resize(e.minWidth,e.minHeight);this.selectPage(this.dg.contents[0].id);this.reset();if(a.dialog._.gw===null)a.dialog._.gw=this._.app.config.baseFloatZIndex;this._.ax.getFirst().setStyle("z-index",a.dialog._.gw+=10);if(a.dialog._.dL===null){a.dialog._.dL=this;this._.ep=null;w(this._.app);d.on("keydown",z);d.on(f.opera?"keypress":"keyup",A);for(var j in{keyup:1,keydown:1,keypress:1})d.on(j,G)}else{this._.ep=a.dialog._.dL;var k=this._.ep.getElement().getFirst();k.$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2);a.dialog._.dL=this}B(this,this,"",null,function(){this.getButton("cancel")&&this.getButton("cancel").click()});this._.hasFocus=false;i.setTimeout(function(){var b=a.document.getWindow().eR(),c=this.hR();this.move((b.width-e.minWidth)/2,(b.height-c.height)/2);this.bO.dialog.setStyle("visibility","");this.cr("load",{});this.oW("show",{});this._.app.oW("dialogShow",this);this.gh(function(a){a.jW&&a.jW()})},100,this)},gh:function(a){var b=this;for(var c in b._.contents)for(var d in b._.contents[c])a(b._.contents[c][d]);return b},reset:function(){var a=function(a){if(a.reset)a.reset()};return function(){this.gh(a);return this}}(),rN:function(){var a=arguments;this.gh(function(b){if(b.qi)b.qi.apply(b,a)})},sI:function(){var a=arguments;this.gh(function(b){if(b.rx)b.rx.apply(b,a)})},hide:function(){this.oW("hide",{});this._.app.oW("dialogHide",this);var b=this._.ax;if(!b.getParent())return;b.remove();this.bO.dialog.setStyle("visibility","hidden");C(this);if(!this._.ep)x();else{var c=this._.ep.getElement().getFirst();c.setStyle("z-index",parseInt(c.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))}a.dialog._.dL=this._.ep;if(!this._.ep){a.dialog._.gw=null;b.aF("keydown",z);b.aF(f.opera?"keypress":"keyup",A);for(var d in{keyup:1,keydown:1,keypress:1})b.aF(d,G);var e=this._.app;e.focus();if(e.mode=="qt"&&g){var h=e.getSelection();h&&h.sd(true)}}else a.dialog._.gw-=10;this.gh(function(a){a.ki&&a.ki()})},addPage:function(b){var c=this;var d=[],e=b.label?' title="'+i.htmlEncode(b.label)+'"':"",f=b.elements,g=a.dialog._.gv.vbox.dQ(c,{type:"vbox",className:"cke_dialog_page_contents",children:b.elements,expand:!!b.expand,padding:b.padding,style:b.style||"width: 100%; height: 100%;"},d),h=k.et(d.join(""),a.document),j=k.et(['<a class="cke_dialog_tab"',c._.gV>0?" cke_last":"cke_first",e,!!b.hidden?' style="display:none"':"",' id="',b.id+"_",i.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',b.label,"</a>"].join(""),a.document);if(c._.gV===0)c.bO.dialog.addClass("cke_single_page");else c.bO.dialog.removeClass("cke_single_page");c._.tabs[b.id]=[j,h];c._.cU.push(b.id);c._.gV++;c._.qF=j;var l=c._.contents[b.id]={},m,n=g.aC();while(m=n.shift()){l[m.id]=m;if(typeof m.aC=="function")n.push.apply(n,m.aC())}h.setAttribute("name",b.id);h.appendTo(c.bO.contents);j.unselectable();c.bO.tabs.append(j);if(b.accessKey){B(c,c,"bP+"+b.accessKey,E,D);c._.iX["bP+"+b.accessKey]=b.id}},selectPage:function(a){var b=this;for(var c in b._.tabs){var d=b._.tabs[c][0],e=b._.tabs[c][1];if(c!=a){d.removeClass("cke_dialog_tab_selected");e.hide()}}var f=b._.tabs[a];f[0].addClass("cke_dialog_tab_selected");f[1].show();b._.gx=a;b._.nM=i.indexOf(b._.cU,a)},vJ:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];if(!b)return;b.hide()},showPage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];if(!b)return;b.show()},getElement:function(){return this._.ax},getName:function(){return this._.name},getContentElement:function(a,b){return this._.contents[a][b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},vj:function(){return this._.gV},getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(a,b){var c=this;if(typeof b=="undefined"){b=c._.eO.length;c._.eO.push(new e(c,a,b))}else{c._.eO.splice(b,0,new e(c,a,b));for(var d=b+1;d<c._.eO.length;d++)c._.eO[d].cQ++}},setTitle:function(a){this.bO.title.setText(a)}};i.extend(a.dialog,{add:function(a,b){if(!this._.ev[a]||typeof b=="function")this._.ev[a]=b},exists:function(a){return!!this._.ev[a]},getCurrent:function(){return a.dialog._.dL},okButton:function(){var a=function(a,b){b=b||{};return i.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){var b=a.data.dialog;if(b.oW("ok",{hide:true}).hide!==false)b.hide()}},b,true)};a.type="button";a.override=function(b){return i.extend(function(c){return a(c,b)},{type:"button"},true)};return a}(),cancelButton:function(){var a=function(a,b){b=b||{};return i.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){var b=a.data.dialog;if(b.oW("cancel",{hide:true}).hide!==false)b.hide()}},b,true)};a.type="button";a.override=function(b){return i.extend(function(c){return a(c,b)},{type:"button"},true)};return a}(),addUIElement:function(a,b){this._.gv[a]=b}});a.dialog._={gv:{},ev:{},dL:null,gw:null};a.event.du(a.dialog);a.event.du(a.dialog.prototype,true);var h={jy:a.rs,minWidth:600,minHeight:400,buttons:[a.dialog.okButton,a.dialog.cancelButton]},l=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return e;if(c&&e[c]){var f=l(e[c],b,c);if(f)return f}}return null},o=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c){a.splice(f,0,b);return b}if(d&&g[d]){var h=o(g[d],b,c,d,true);if(h)return h}}if(e)return null}a.push(b);return b},p=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]){var f=p(e[c],b,c);if(f)return f}}return null},q=function(a,b){this.dialog=a;var c=b.contents;for(var d=0,e;e=c[d];d++)c[d]=new r(a,e);i.extend(this,b)};q.prototype={vz:function(a){return l(this.contents,a)},getButton:function(a){return l(this.buttons,a)},uh:function(a,b){return o(this.contents,a,b)},qW:function(a,b){return o(this.buttons,a,b)},uP:function(a){p(this.contents,a)},uO:function(a){p(this.buttons,a)}};r.prototype={eB:function(a){return l(this.elements,a,"children")},add:function(a,b){return o(this.elements,a,b,"children")},remove:function(a){p(this.elements,a,"children")}};var u,v,w=function(b){var c=a.document.getWindow();if(!v){var d=b.config.so||"white",e=['<div style="position: ',f.ie6Compat?"absolute":"fixed","; z-index: ",b.config.baseFloatZIndex,"; top: 0px; left: 0px; ",!f.ie6Compat?"background-color: "+d:"",'" id="cke_dialog_background_cover">'];if(f.ie6Compat){var g=f.isCustomDomain(),h="<html><body style=\\'background-color:"+d+";\\'></body></html>";e.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');e.push("void((function(){document.open();"+(g?"document.domain='"+document.domain+"';":"")+"document.write( '"+h+"' );"+"document.close();"+"})())");e.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}e.push("</div>");v=k.et(e.join(""),a.document)}var i=v,j=function(){var a=c.eR();i.setStyles({width:a.width+"px",height:a.height+"px"})},l=function(){var b=c.hV(),d=a.dialog._.dL;i.setStyles({left:b.x+"px",top:b.y+"px"});do{var e=d.gz();d.move(e.x,e.y)}while(d=d._.ep)};u=j;c.on("resize",j);j();if(f.ie6Compat){var m=function(){l();arguments.callee.lw.apply(this,arguments)};c.$.setTimeout(function(){m.lw=window.onscroll||function(){};window.onscroll=m},0);l()}var n=b.config.dialog_backgroundCoverOpacity;i.setOpacity(typeof n!="undefined"?n:.5);i.appendTo(a.document.bH())},x=function(){if(!v)return;var b=a.document.getWindow();v.remove();b.aF("resize",u);if(f.ie6Compat)b.$.setTimeout(function(){var a=window.onscroll&&window.onscroll.lw;window.onscroll=a||null},0);u=null},y={},z=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=y[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e];if(!f||!f.length)return;f=f[f.length-1];f.keydown&&f.keydown.call(f.bf,f.dialog,f.iK);a.data.preventDefault()},A=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=y[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e];if(!f||!f.length)return;f=f[f.length-1];if(f.keyup){f.keyup.call(f.bf,f.dialog,f.iK);a.data.preventDefault()}},B=function(a,b,c,d,e){var f=y[c]||(y[c]=[]);f.push({bf:a,dialog:b,iK:c,keyup:e||a.eZ,keydown:d||a.iU})},C=function(a){for(var b in y){var c=y[b];for(var d=c.length-1;d>=0;d--){if(c[d].dialog==a||c[d].bf==a)c.splice(d,1)}if(c.length===0)delete y[b]}},D=function(a,b){if(a._.iX[b])a.selectPage(a._.iX[b])},E=function(a,b){},F={27:1,13:1},G=function(a){if(a.data.db()in F)a.data.stopPropagation()};(function(){n.dialog={bf:function(b,c,d,e,f,g,h){if(arguments.length<4)return;var j=(e.call?e(c):e)||"div",k=["<",j," "],l=(f&&f.call?f(c):f)||{},m=(g&&g.call?g(c):g)||{},n=(h&&h.call?h(b,c):h)||"",o=this.oJ=m.id||i.getNextNumber()+"_uiElement",p=this.id=c.id,q;m.id=o;var r={};if(c.type)r["cke_dialog_ui_"+c.type]=1;if(c.className)r[c.className]=1;var s=m["class"]&&m["class"].split?m["class"].split(" "):[];for(q=0;q<s.length;q++){if(s[q])r[s[q]]=1}var t=[];for(q in r)t.push(q);m["class"]=t.join(" ");if(c.title)m.title=c.title;var u=(c.style||"").split(";");for(q in l)u.push(q+":"+l[q]);if(c.hidden)u.push("display:none");for(q=u.length-1;q>=0;q--){if(u[q]==="")u.splice(q,1)}if(u.length>0)m.style=(m.style?m.style+"; ":"")+u.join("; ");for(q in m)k.push(q+'="'+i.htmlEncode(m[q])+'" ');k.push(">",n,"</",j,">");d.push(k.join(""));(this._||(this._={})).dialog=b;if(typeof c.isChanged=="boolean")this.isChanged=function(){return c.isChanged};if(typeof c.isChanged=="function")this.isChanged=c.isChanged;a.event.du(this);this.nc(c);if(this.eZ&&this.iU&&c.accessKey)B(this,b,"bP+"+c.accessKey);var v=this;b.on("load",function(){if(v.getInputElement())v.getInputElement().on("focus",function(){b._.eC=false;b._.hasFocus=true;v.oW("focus")},v)});if(this.eA){this.cQ=b._.eO.push(this)-1;this.on("focus",function(){b._.gu=v.cQ})}i.extend(this,c)},hbox:function(a,b,c,d,e){if(arguments.length<4)return;this._||(this._={});var f=this._.children=b,g=e&&e.widths||null,h=e&&e.height||null,j={},k,l=function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(k=0;k<c.length;k++){var b="cke_dialog_ui_hbox_child",d=[];if(k===0)b="cke_dialog_ui_hbox_first";if(k==c.length-1)b="cke_dialog_ui_hbox_last";a.push('<td class="',b,'" ');if(g){if(g[k])d.push("width:"+i.cssLength(g[k]))}else d.push("width:"+Math.floor(100/c.length)+"%");if(h)d.push("height:"+i.cssLength(h));if(e&&e.padding!=undefined)d.push("padding:"+i.cssLength(e.padding));if(d.length>0)a.push('style="'+d.join("; ")+'" ');a.push(">",c[k],"</td>")}a.push("</tr></tbody>");return a.join("")};n.dialog.bf.call(this,a,e||{type:"hbox"},d,"table",j,e&&e.align&&{align:e.align}||null,l)},vbox:function(a,b,c,d,e){if(arguments.length<3)return;this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.vY||null,j=function(){var b=['<table cellspacing="0" border="0" '];b.push('style="');if(e&&e.expand)b.push("height:100%;");b.push("width:"+i.cssLength(g||"100%"),";");b.push('"');b.push('align="',i.htmlEncode(e&&e.align||(a.eY().lang.dir=="ltr"?"left":"right")),'" ');b.push("><tbody>");for(var d=0;d<c.length;d++){var f=[];b.push("<tr><td ");if(g)f.push("width:"+i.cssLength(g||"100%"));if(h)f.push("height:"+i.cssLength(h[d]));else if(e&&e.expand)f.push("height:"+Math.floor(100/c.length)+"%");if(e&&e.padding!=undefined)f.push("padding:"+i.cssLength(e.padding));if(f.length>0)b.push('style="',f.join("; "),'" ');b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}b.push("</tbody></table>");return b.join("")};n.dialog.bf.call(this,a,e||{type:"vbox"},d,"div",null,null,j)}}})();n.dialog.bf.prototype={getElement:function(){return a.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a){this.getInputElement().setValue(a);this.oW("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return false},selectParentTab:function(){var a=this;var b=a.getInputElement(),c=b,d;while((c=c.getParent())&&c.$.className.search("cke_dialog_page_contents")==-1){}if(!c)return a;d=c.getAttribute("name");if(a._.dialog._.gx!=d)a._.dialog.selectPage(d);return a},focus:function(){this.selectParentTab().getInputElement().focus();return this},nc:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(var e in a){if(!(c=e.match(b)))continue;if(this.dm[e])this.dm[e].call(this,this._.dialog,a[e]);else d(this,this._.dialog,c[1].toLowerCase(),a[e])}return this},dm:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},iU:function(a,b){this.focus()},eZ:function(a,b){},disable:function(){var a=this.getInputElement();a.setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=this.getInputElement();a.removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){if(!this.isEnabled()||!this.isVisible())return false;return true}};n.dialog.hbox.prototype=i.extend(new n.dialog.bf,{aC:function(a){var b=this;if(arguments.length<1)return b._.children.concat();if(!a.splice)a=[a];if(a.length<2)return b._.children[a[0]];else return b._.children[a[0]]&&b._.children[a[0]].aC?b._.children[a[0]].aC(a.slice(1,a.length)):null}},true);n.dialog.vbox.prototype=new n.dialog.hbox;(function(){var b={dQ:function(b,c,d){var e=c.children,f,g=[],h=[];for(var i=0;i<e.length&&(f=e[i]);i++){var j=[];g.push(j);h.push(a.dialog._.gv[f.type].dQ(b,f,j))}return new n.dialog[c.type](b,h,g,d,c)}};a.dialog.addUIElement("hbox",b);a.dialog.addUIElement("vbox",b)})();a.rB=function(a){this.ry=a};a.rB.prototype={exec:function(a){a.openDialog(this.ry)},sG:false};(function(){var b=/^([a]|[^a])+$/,c=/^\d*$/,d=/^\d*(?:\.\d+)?$/;a.sg=1;a.jb=2;a.dialog.validate={functions:function(){return function(){var b=this;var c=b&&b.getValue?b.getValue():arguments[0],d=undefined,e=a.jb,f=[],g;for(g=0;g<arguments.length;g++){if(typeof arguments[g]=="function")f.push(arguments[g]);else break}if(g<arguments.length&&typeof arguments[g]=="string"){d=arguments[g];g++}if(g<arguments.length&&typeof arguments[g]=="number")e=arguments[g];var h=e==a.jb?true:false;for(g=0;g<f.length;g++){if(e==a.jb)h=h&&f[g](c);else h=h||f[g](c)}if(!h){if(d!==undefined)alert(d);if(b&&(b.select||b.focus))b.select||b.focus();return false}return true}},regex:function(a,b){return function(){var c=this;var d=c&&c.getValue?c.getValue():arguments[0];if(!a.test(d)){if(b!==undefined)alert(b);if(c&&(c.select||c.focus))if(c.select)c.select();else c.focus();return false}return true}},notEmpty:function(a){return this.regex(b,a)},integer:function(a){return this.regex(c,a)},number:function(a){return this.regex(d,a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}}})();i.extend(a.application.prototype,{openDialog:function(b,c,d){var e=a.dialog._.ev[b];if(typeof e=="function"){var f=this._.oB||(this._.oB={}),g=f[b]||(f[b]=new a.dialog(this,b));c&&c.call(g,g);g.show();return g}else if(e=="failed")throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+b+'" failed when loading dg.');var h=a.document.bH(),i=h.$.style.cursor,j=this;h.setStyle("cursor","wait");a.ec.load(a.getUrl(e),function(){if(typeof a.dialog._.ev[b]!="function")a.dialog._.ev[b]="failed";j.openDialog(b,c);h.setStyle("cursor",i)},null,null,d);return null},hs:function(a,b,c,d){var e=this;setTimeout(function(){e.cg.openDialog("Input",function(g){g.show();g.setTitle(a||e.lang.common.inputTitle);g.getContentElement("tab1","msg").getElement().setHtml(b);g.getContentElement("tab1","input").setValue(c);H(g,function(a){var b=a.getContentElement("tab1","input").getValue();d(b)});if(f.ie7Compat){var h=g.mn();g.resize(h.width,h.height)}})},0)},msgDialog:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Msg",function(e){e.show();e.setTitle(a||d.lang.common.messageTitle);e.getContentElement("tab1","msg").getElement().setHtml(b);c&&H(e,function(a){c()});if(f.ie7Compat){var g=e.mn();e.resize(g.width,g.height)}})},0)},fe:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Confirm",function(e){e.show();e.setTitle(a||d.lang.common.confirmationTitle);e.getContentElement("tab1","msg").getElement().setHtml(b);H(e,function(a){c()});if(f.ie7Compat){var g=e.mn();e.resize(g.width,g.height)}})},0)}});m.add("dialog",{bM:["dialogui"],onLoad:function(){a.dialog.add("Confirm",function(a){return{title:a.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});a.dialog.add("Msg",function(a){return{title:a.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}});a.dialog.add("Input",function(a){return{title:a.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})}})})();m.add("dialogui");(function(){var b=function(a){var b=this;b._||(b._={});b._["default"]=b._.hq=a["default"]||"";var c=[b._];for(var d=1;d<arguments.length;d++)c.push(arguments[d]);c.push(true);i.extend.apply(i,c);return b._},c={dQ:function(a,b,c){return new n.dialog.ju(a,b,c)}},d={dQ:function(a,b,c){return new n.dialog[b.type](a,b,c)}},e={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._["default"]},lu:function(){return this._.hq}},j=i.extend({},n.dialog.bf.prototype.dm,{onChange:function(a,b){if(!this._.pL){a.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this);this._.pL=true}this.on("change",b)}},true),l=/^on([A-Z]\w+)/,m=function(a){for(var b in a){if(l.test(b)||b=="title"||b=="type")delete a[b]}return a};i.extend(n.dialog,{dD:function(c,d,e,f){if(arguments.length<4)return;var g=b.call(this,d);g.hz=i.getNextNumber()+"_label";var h=this._.children=[],j=function(){var b=[];if(d.uC!="horizontal")b.push('<div class="cke_dialog_ui_labeled_label" id="',g.hz,'" >',d.label,"</div>",'<div class="cke_dialog_ui_labeled_content">',f(c,d),"</div>");else{var e={type:"hbox",widths:d.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+g.hz+'">'+i.htmlEncode(d.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+f(c,d)+"</span>"}]};a.dialog._.gv.hbox.dQ(c,e,b)}return b.join("")};n.dialog.bf.call(this,c,d,e,"div",null,null,j)},ju:function(a,c,d){if(arguments.length<3)return;b.call(this,c);var e=this._.le=i.getNextNumber()+"_textInput",f={"class":"cke_dialog_ui_input_"+c.type,id:e,type:"text"},g;if(c.validate)this.validate=c.validate;if(c.maxLength)f.uy=c.maxLength;if(c.size)f.size=c.size;var h=this,j=false;a.on("load",function(){h.getInputElement().on("keydown",function(a){if(a.data.db()==13)j=true});h.getInputElement().on("keyup",function(b){if(b.data.db()==13&&j){a.getButton("ok")&&setTimeout(function(){a.getButton("ok").click()},0);j=false}},null,null,1e3)});var k=function(){var a=['<div class="cke_dialog_ui_input_',c.type,'"'];if(c.width)a.push('style="width:'+c.width+'" ');a.push("><input ");for(var b in f)a.push(b+'="'+f[b]+'" ');a.push(" /></div>");return a.join("")};n.dialog.dD.call(this,a,c,d,k)},textarea:function(a,c,d){if(arguments.length<3)return;b.call(this,c);var e=this,f=this._.le=i.getNextNumber()+"_textarea",g={};if(c.validate)this.validate=c.validate;g.rows=c.rows||5;g.cols=c.cols||20;var h=function(){var a=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',f,'" '];for(var b in g)a.push(b+'="'+i.htmlEncode(g[b])+'" ');a.push(">",i.htmlEncode(e._["default"]),"</textarea></div>");return a.join("")};n.dialog.dD.call(this,a,c,d,h)},checkbox:function(a,c,d){if(arguments.length<3)return;var e=b.call(this,c,{"default":!!c["default"]});if(c.validate)this.validate=c.validate;var f=function(){var b=i.extend({},c,{id:c.id?c.id+"_checkbox":i.getNextNumber()+"_checkbox"},true),d=[],f={"class":"cke_dialog_ui_checkbox_input",type:"checkbox"};m(b);if(c["default"])f.checked="checked";e.checkbox=new n.dialog.bf(a,b,d,"input",null,f);d.push(' <label for="',f.id,'">',i.htmlEncode(c.label),"</label>");return d.join("")};n.dialog.bf.call(this,a,c,d,"span",null,null,f)},radio:function(a,c,d){if(arguments.length<3)return;b.call(this,c);if(!this._["default"])this._["default"]=this._.hq=c.items[0][1];if(c.validate)this.validate=c.sh;var e=[],f=this,g=function(){var b=[],d=[],g={"class":"cke_dialog_ui_radio_item"},h=c.id?c.id+"_radio":i.getNextNumber()+"_radio";for(var j=0;j<c.items.length;j++){var k=c.items[j],l=k[2]!==undefined?k[2]:k[0],o=k[1]!==undefined?k[1]:k[0],p=i.extend({},c,{id:i.getNextNumber()+"_radio_input",title:null,type:null},true),q=i.extend({},p,{id:null,title:l},true),r={type:"radio","class":"cke_dialog_ui_radio_input",name:h,value:o},s=[];if(f._["default"]==o)r.checked="checked";m(p);m(q);e.push(new n.dialog.bf(a,p,s,"input",null,r));s.push(" ");new n.dialog.bf(a,q,s,"label",null,{"for":r.id},k[0]);b.push(s.join(""))}new n.dialog.hbox(a,[],b,d);return d.join("")};n.dialog.dD.call(this,a,c,d,g);this._.children=e},button:function(c,d,e){if(!arguments.length)return;if(typeof d=="function")d=d(c.eY());b.call(this,d,{disabled:d.disabled||false});a.event.du(this);var f=this;c.on("load",function(a){var b=this.getElement();(function(){b.on("click",function(a){f.oW("click",{dialog:f.getDialog()});a.data.preventDefault()})})();b.unselectable()},this);var g=i.extend({},d);delete g.style;n.dialog.bf.call(this,c,g,e,"a",null,{style:d.style,href:"javascript:void(0)",title:d.label,hp:"true","class":d["class"]},'<span class="cke_dialog_ui_button">'+i.htmlEncode(d.label)+"</span>")},select:function(a,c,d){if(arguments.length<3)return;var e=b.call(this,c);if(c.validate)this.validate=c.validate;var f=function(){var b=i.extend({},c,{id:c.id?c.id+"_select":i.getNextNumber()+"_select"},true),d=[],f=[],g={"class":"cke_dialog_ui_input_select"};if(c.size!=undefined)g.size=c.size;if(c.multiple!=undefined)g.multiple=c.multiple;m(b);for(var h=0,j;h<c.items.length&&(j=c.items[h]);h++)f.push('<option value="',i.htmlEncode(j[1]!==undefined?j[1]:j[0]),'" /> ',i.htmlEncode(j[0]));e.select=new n.dialog.bf(a,b,d,"select",null,g,f.join(""));return d.join("")};n.dialog.dD.call(this,a,c,d,f)},file:function(c,d,e){if(arguments.length<3)return;if(d["default"]===undefined)d["default"]="";var g=i.extend(b.call(this,d),{dg:d,buttons:[]});if(d.validate)this.validate=d.validate;var h=function(){g.gL=i.getNextNumber()+"_fileInput";var a=f.isCustomDomain(),b=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',g.gL,'" title="',d.label,'" src="javascript:void('];b.push(a?"(function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+"})()":"0");b.push(')"></iframe>');return b.join("")};c.on("load",function(){var b=a.document.getById(g.gL),c=b.getParent();c.addClass("cke_dialog_ui_input_file")});n.dialog.dD.call(this,c,d,e,h)},fileButton:function(a,c,d){if(arguments.length<3)return;var e=b.call(this,c),f=this;if(c.validate)this.validate=c.validate;var g=i.extend({},c),h=g.onClick;g.className=(g.className?g.className+" ":"")+"cke_dialog_ui_button";g.onClick=function(b){var d=c["for"];if(!h||h.call(this,b)!==false){a.getContentElement(d[0],d[1]).submit();this.disable()}};a.on("load",function(){a.getContentElement(c["for"][0],c["for"][1])._.buttons.push(f)});n.dialog.button.call(this,a,g,d)},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(arguments.length<3)return;var g=[],h,i=e.html,j,k;if(i.charAt(0)!="<")i="<span>"+i+"</span>";if(e.focus){var l=this.focus;this.focus=function(){l.call(this);e.focus.call(this);this.oW("focus")};if(e.fM){var m=this.fM;this.fM=m}this.eA=true}n.dialog.bf.call(this,d,e,g,"span",null,null,"");h=g.join("");j=h.match(a);k=i.match(b)||["","",""];if(c.test(k[1])){k[1]=k[1].slice(0,-1);k[2]="/"+k[2]}f.push([k[1]," ",j[1]||"",k[2]].join(""))}}()},true);n.dialog.html.prototype=new n.dialog.bf;n.dialog.dD.prototype=i.extend(new n.dialog.bf,{rW:function(b){var c=a.document.getById(this._.hz);if(c.iu()<1)(new h.text(b,a.document)).appendTo(c);else c.aC(0).$.nodeValue=b;return this},vt:function(){var b=a.document.getById(this._.hz);if(!b||b.iu()<1)return"";else return b.aC(0).getText()},dm:j},true);n.dialog.button.prototype=i.extend(new n.dialog.bf,{click:function(){var a=this;if(!a._.disabled)return a.oW("click",{dialog:a._.dialog});a.getElement().$.blur();return false},enable:function(){this._.disabled=false;var a=this.getElement();a&&a.removeClass("disabled")},disable:function(){this._.disabled=true;this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},dm:i.extend({},n.dialog.bf.prototype.dm,{onClick:function(a,b){this.on("click",b)}},true),eZ:function(){this.click()},iU:function(){this.focus()},eA:true},true);n.dialog.ju.prototype=i.extend(new n.dialog.dD,{getInputElement:function(){return a.document.getById(this._.le)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();if(b){b.$.focus();b.$.select()}},0)},eZ:function(){this.select()},setValue:function(a){a=a!==null?a:"";return n.dialog.bf.prototype.setValue.call(this,a)},eA:true},e,true);n.dialog.textarea.prototype=new n.dialog.ju;n.dialog.select.prototype=i.extend(new n.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new k("option",this.getDialog().eY().document),e=this.getInputElement().$;d.$.text=a;d.$.value=b===undefined||b===null?a:b;if(c===undefined||c===null){if(g)e.add(d.$);else e.add(d.$,null)}else e.add(d.$,c);return this},remove:function(a){var b=this.getInputElement().$;b.remove(a);return this},clear:function(){var a=this.getInputElement().$;while(a.length>0)a.remove(0);return this},eA:true},e,true);n.dialog.checkbox.prototype=i.extend(new n.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a){this.getInputElement().$.checked=a;this.oW("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(a,b){if(!g)return j.onChange.apply(this,arguments);else{a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;if(b.propertyName=="checked")this.oW("change",{value:a.$.checked})},this)},this);this.on("change",b)}return null}},eA:true},e,true);n.dialog.radio.prototype=i.extend(new n.dialog.bf,{setValue:function(a){var b=this._.children,c;for(var d=0;d<b.length&&(c=b[d]);d++)c.getElement().$.checked=c.getValue()==a;this.oW("change",{value:a})},getValue:function(){var a=this._.children;for(var b=0;b<a.length;b++){if(a[b].getElement().$.checked)return a[b].getValue()}return null},eZ:function(){var a=this._.children,b;for(b=0;b<a.length;b++){if(a[b].getElement().$.checked){a[b].getElement().focus();return}}a[0].getElement().focus()},dm:{onChange:function(a,b){if(!g)return j.onChange.apply(this,arguments);else{a.on("load",function(){var a=this._.children,b=this;for(var c=0;c<a.length;c++){var d=a[c].getElement();d.on("propertychange",function(a){a=a.data.$;if(a.propertyName=="checked"&&this.$.checked)b.oW("change",{value:this.getAttribute("value")})})}},this);this.on("change",b)}return null}},eA:true},e,true);n.dialog.file.prototype=i.extend(new n.dialog.dD,e,{getInputElement:function(){var b=a.document.getById(this._.gL).getFrameDocument();return b.$.forms.length>0?new k(b.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},vy:function(a){return this.getInputElement().getParent().$.action},reset:function(){function h(){c.$.open();if(f.isCustomDomain())c.$.domain=document.domain;var a="";if(d.size)a=d.size-(g?7:0);c.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',i.htmlEncode(d.action),'">','<input type="file" name="',i.htmlEncode(d.id||"cke_upload"),'" size="',i.htmlEncode(a>0?a:""),'" />',"</form>","</body></html>"].join(""));c.$.close();for(var b=0;b<e.length;b++)e[b].enable()}var b=a.document.getById(this._.gL),c=b.getFrameDocument(),d=this._.dg,e=this._.buttons;if(f.gecko)setTimeout(h,500);else h()},getValue:function(){return""},dm:j,eA:true},true);n.dialog.fileButton.prototype=new n.dialog.button;a.dialog.addUIElement("text",c);a.dialog.addUIElement("password",c);a.dialog.addUIElement("textarea",d);a.dialog.addUIElement("checkbox",d);a.dialog.addUIElement("radio",d);a.dialog.addUIElement("button",d);a.dialog.addUIElement("select",d);a.dialog.addUIElement("file",d);a.dialog.addUIElement("fileButton",d);a.dialog.addUIElement("html",d);i.extend(CKFinder.dialog,a.dialog)})();(function(){m.add("help",{bM:["toolbar","button"],bz:function b(b){if(!b.config.disableHelpButton){b.bD("help",{exec:function(b){b.aG["filesview.filesview"][0].bn().focus();window.open(a.basePath+"help/"+(b.lang.HelpLang||"en")+"/index.html")}});b.bY.add("Help",a.UI_BUTTON,{label:b.lang.Help,command:"help"})}}})})();a.skins.add("kama",function(){var b=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];if(g&&f.version<7)b.push("icons.png","images/sprites_ie6.png");return{ls:b,application:{css:["app.css"]},host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(b){function j(a,b,c){var d,e,h;for(var i=0;i<a.length;i++){if(f.webkit){for(e=0;e<a[i].$.sheet.rules.length;e++)a[i].$.sheet.removeRule(e);for(e=0;e<b.length;e++){h=b[e][1];for(d=0;d<c.length;d++)h=h.replace(c[d][0],c[d][1]);a[i].$.sheet.addRule(b[e][0],h)}}else{h=b;for(d=0;d<c.length;d++)h=h.replace(c[d][0],c[d][1]);if(g)a[i].$.styleSheet.cssText=h;else a[i].setHtml(h)}}}function h(a){var b=a.eD().append("style");b.setAttribute("id","cke_ui_color");b.setAttribute("type","text/css");return b}if(b.config.width&&!isNaN(b.config.width))b.config.width-=12;var c=[],d="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";if(f.webkit){d=d.split("}").slice(0,-1);for(var e=0;e<d.length;e++)d[e]=d[e].split("{")}var k=/\$color/g;i.extend(b,{fm:null,rk:function(){return this.fm},setUiColor:function(e){var g,i,l=h(a.oC),m=h(this.document),n="#cke_"+b.name.replace(".","\\."),o=[n+" .cke_wrapper",n+"_dialog .cke_dialog_contents",n+"_dialog a.cke_dialog_tab",n+"_dialog .cke_dialog_footer"].join(","),p="background-color: $color !important;";if(f.webkit){g=[[o,p]];i=[["body,"+o,p]]}else{g=o+"{"+p+"}";i="body,"+o+"{"+p+"}"}return(this.setUiColor=function(a){var e=[[k,a]];b.fm=a;j([l],g,e);j([m],i,e);j(c,d,e)})(e)}});b.on("menuShow",function(a){var e=a.data[0],f=e.ax.eG("iframe").getItem(0).getFrameDocument();if(!f.getById("cke_ui_color")){var g=h(f);c.push(g);var i=b.rk();if(i)j([g],d,[[k,i]])}});if(b.config.fm)b.setUiColor(b.config.fm)}}}());(function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.bO.contents;if(b.skin!="kama")return;f.setStyles({width:c+"px",height:d+"px"});setTimeout(function(){var a=e.bO.dialog.aC([0,0,0]),b=a.aC(0),c=a.aC(2);c.setStyle("width",b.$.offsetWidth+"px");c=a.aC(7);c.setStyle("width",b.$.offsetWidth-28+"px");c=a.aC(4);c.setStyle("height",b.$.offsetHeight-31-14+"px");c=a.aC(5);c.setStyle("height",b.$.offsetHeight-31-14+"px")},100)})}a.dialog?b():a.on("dialogPluginReady",b);})();a.skins.add("v1",function(){var a=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];if(g&&f.version<7)a.push("icons.png","images/sprites_ie6.png");return{ls:a,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}}}());(function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.bO.contents;if(b.skin!="v1")return;f.setStyles({width:c+"px",height:d+"px"});setTimeout(function(){var a=e.bO.dialog.aC([0,0,0]),b=a.aC(0),c=a.aC(2);c.setStyle("width",b.$.offsetWidth+"px");c=a.aC(7);c.setStyle("width",b.$.offsetWidth-28+"px");c=a.aC(4);c.setStyle("height",b.$.offsetHeight-31-14+"px");c=a.aC(5);c.setStyle("height",b.$.offsetHeight-31-14+"px")},100)})}a.dialog?b():a.on("dialogPluginReady",b);})();a.gc.add("default",function(){return{dQ:function(b){function m(){if(f.ie6Compat)b.layout.oG=b.document.getWindow().eR()}var c=b.name,d=b.ax,e=b.ff;if(!d||e==a.kZ)return;b.layout=new a.application.layout(b);var g=b.oW("themeSpace",{space:"head",html:""}),h=b.oW("themeSpace",{space:"sidebar",html:""}),i=b.oW("themeSpace",{space:"mainTop",html:""}),j=b.oW("themeSpace",{space:"mainMiddle",html:""}),k=b.oW("themeSpace",{space:"mainBottom",html:""}),l='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+b.lang.LangCode+'" dir="'+b.lang.dir+'">'+"<head>"+'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+'<meta http-equiv="X-UA-Compatible" content="IE=8" />'+g.html+"</head>"+"<body>"+(f.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+"<!-- 1. CKE Skin class. -->"+'<div class="fake_wrapper cke_skin_'+(b.config.skin||"kama")+'">'+"<!-- 2. High contrast class. -->"+'<div class="fake_wrapper"><!-- Applicable: hc cke_hc -->'+"<!-- 3. Browser class. -->"+'<div class="fake_wrapper '+f.cssClass+'">'+"<!-- 4. RTL class. -->"+'<div class="fake_wrapper"><!-- Applicable: rtl cke_rtl -->'+"<!-- 5. Layout class. -->"+'<div class="fake_wrapper">'+'<div id="ckfinder_view" class="columns_2"><!-- Applicable: columns_1 columns_2 -->'+'<div id="sidebar_container" class="container" role="region">'+'<div id="sidebar_wrapper" class="wrapper">'+h.html+"</div>"+"</div>"+'<div id="main_container" class="container" role="region">'+i.html+j.html+k.html+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</body>"+"</html>";a.log("[THEME] DOM flush using document.write");b.document.$.write(l);b.cr("themeLoaded");b.cr("uiReady",function(){m();b.cr("appReady",function(){function h(){g=g||b.document.eD().eG("link").getItem(0);var a=0;if(g)try{if(g.$.sheet&&g.$.sheet.cssRules.length>0)a=1;else if(g.$.styleSheet&&g.$.styleSheet.cssText.length>0)a=1;else if(g.$.innerHTML&&g.$.innerHTML.length>0)a=1}catch(c){}if(!a){window.setTimeout(h,250);return}if(f.ie6Compat){m();b.layout.ea();setTimeout(function(){b.layout.ea()},500)}else{b.layout.ea(true);setTimeout(function(){b.document.getById("ckfinder").removeStyle("visibility")})}return undefined}m();if(f.ie8){var a=b.document.$,c;if(a.documentMode)c=a.documentMode;else{c=5;if(a.compatMode)if(a.compatMode=="CSS1Compat")c=7}if(c<8){var d='<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>',e=b.plugins.tools;e.showTool(e.addTool(d))}}if(f.ie6Compat)b.document.getWindow().on("resize",m);b.document.getWindow().on("resize",function(){b.layout.ea.call(b.layout)});var g;h()})})},pu:function(b){var c=i.getNextNumber(),d=k.et(['<div class="cke_compatibility cke_'+b.name.replace(".","\\.")+"_dialog cke_skin_",b.gd,'" dir="',b.lang.dir,'" lang="',b.langCode,'"><table class="cke_dialog'," "+f.cssClass.replace(/browser/g,"cke_browser")," cke_",b.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',g?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+c).replace(/%/g,"cke_dialog_"),a.document),e=d.aC([0,0,0,0,0]),h=e.aC(0),j=e.aC(1);h.unselectable();j.unselectable();return{ax:d,bO:{dialog:d.aC(0),title:h,close:j,tabs:e.aC(2),contents:e.aC([3,0,0,0]),footer:e.aC(4)}}},fH:function(b){var c=b.container,d=b.ia;if(c)c.remove();for(var e=0;d&&e<d.length;e++)d[e].remove();if(b.ff==a.fc){b.ax.show();delete b.ax}}}}());a.application.prototype.vU=function(b){var c=""+b,d=this._[c]||(this._[c]=a.document.getById(c+"_"+this.name));return d};a.application.prototype.nJ=function(a){var b=/^\d+$/;if(b.test(a))a+="px";var c=this.layout.dV();c.setStyle("width",a);this.oW("resize");this.layout.ea()};(function(){function c(a,b){var c=0,d=0;for(var e=0;e<a.$.parentNode.childNodes.length;e++){var h=a.$.parentNode.childNodes[e];if(h.nodeType==1){var i=h==a.$;if(!h.offsetHeight&&!i)continue;d++;if(!i)c+=h.offsetHeight}}var j=a.$.offsetHeight-a.$.clientHeight,k=(d-1)*b;if(f.ie6Compat&&!f.ie8&&!f.ie7Compat)k+=b*2;var l=g&&f.version>=9?a.$.parentNode.parentNode.parentNode.offsetHeight:a.$.parentNode.offsetHeight,m=l-j-c-(k||0);try{a.setStyle("height",m+"px")}catch(n){}}var b="<div class='view tool_panel' style='display: block !important; position: static !important; color: black !important; background-color: white !important;'>This is the DEMO version of CKFinder. Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license.</div>";a.application.layout=function(a){this.app=b.length?a:null;this.jB=null};a.application.layout.prototype={ea:function(d){if(this.jB)return;this.jB=i.setTimeout(function(){a.log("[THEME] Repainting layout");if(a.bF&&1==a.bs.indexOf(a.bF.substr(1,1))%5&&window.top[a.hf+"cation"][a.hg+"st"].toLowerCase().replace(a.jG,"")!=a.ed.replace(a.jG,"")||a.bF&&a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1)){var e=this.dV().aC(0).getChildren(),h=0;for(var j=0;j<e.count();j++){if(e.getItem(j).rd("position")=="static")h=1}if(!h)this.dV().aC(0).appendHtml(b)}var k=this.pn(),l=this.pS(),m=a.skins.loaded[this.app.gd];if(m.ps&&g&&f.ie6Compat&&!f.ie8){var n=this.mB(),o=this.dV(),s=3*m.kN,t=m.rv?m.rv:0,u=this.oG.width-o.$.offsetWidth-s+t;n.setStyle("width",u+"px")}if(k)c(k,m.mA);if(l)c(l,m.kN);this.jB=null;d=false;this.app.oW("afterRepaintLayout");if(f.ie6Compat)i.setTimeout(function(){this.app.ax.$.style.cssText+=""},0,this)},d===true?0:500,this)},dV:function(){var a=this;if(!a.kS)a.kS=a.app.document.getById("sidebar_container");return a.kS},mB:function(){var a=this;if(!a.lb)a.lb=a.app.document.getById("main_container");return a.lb},pS:function(){var a=this;if(typeof a.kK==="undefined")a.kK=a.app.document.getById("folders_view");return a.kK},pn:function(){var a=this;if(typeof a.kD==="undefined")a.kD=a.app.document.getById("files_view");return a.kD}}})()})()